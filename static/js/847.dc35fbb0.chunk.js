"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[847,5997],{90847:function(e,t,r){r.r(t),r.d(t,{parseBedBuffer:function(){return l},parseBedPEBuffer:function(){return m},removeBedHeaders:function(){return p}});var n,a,u=r(32723),s=r(34795),o=r(45997),c="browser ".split("").map((function(e){return e.charCodeAt(0)})),i="track ".split("").map((function(e){return e.charCodeAt(0)})),f="#".split("").map((function(e){return e.charCodeAt(0)}));function d(e,t,r){for(var n=0;n<r.length;n+=1)if(t[e+n]!==r[n])return!1;return!0}function p(e){for(var t=0;t<e.length&&(d(t,e,c)||d(t,e,i)||d(t,e,f));t+=1)do{t+=1}while(10!==e[t]);return t?e.slice(t):e}function l(e,t){return(n=n||(0,s.Z)((0,u.Z)().mark((function e(t,r){var n,a,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p(t),e.next=3,(0,o.parseTsvBuffer)(n);case 3:return a=e.sent,s=[{name:"chrom",dataType:{type:"LocRef"}},{name:"chromStart",dataType:{type:"LocStart"}},{name:"chromEnd",dataType:{type:"LocEnd"}},{name:"name",dataType:{type:"Text"}},{name:"score",dataType:{type:"Number"}},{name:"strand",dataType:{type:"Text"}}],a.columns.forEach((function(e,t){var r=s[t];r&&(e.name=r.name,e.dataType=r.dataType)})),a.hasColumnNames=!0,a.assemblyName=r.selectedAssemblyName,a.columnDisplayOrder.push(a.columnDisplayOrder.length),a.columns.unshift({name:"Location",dataType:{type:"LocString"},isDerived:!0,derivationFunctionText:"jexl:{text:row.cells[0].text+':'+row.cells[1].text+'..'+row.cells[2].text,\n\n    extendedData: {refName: row.cells.ref.text, start: parseInt(row.cells.start.text,10), end: parseInt(row.cells.end.text,10)}}"}),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return(a=a||(0,s.Z)((0,u.Z)().mark((function e(t,r){var n,a,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p(t),e.next=3,(0,o.parseTsvBuffer)(n);case 3:return a=e.sent,s=[{name:"chrom1",dataType:{type:"Text"},featureField:["refName"]},{name:"start1",dataType:{type:"Number"},featureField:["start"]},{name:"end1",dataType:{type:"Number"},featureField:["end"]},{name:"chrom2",dataType:{type:"Text"},featureField:["mate","refName"]},{name:"start2",dataType:{type:"Number"},featureField:["mate","start"]},{name:"end2",dataType:{type:"Number"},featureField:["mate","end"]},{name:"name",dataType:{type:"Text"},featureField:["name"]},{name:"score",dataType:{type:"Number"},featureField:["score"]},{name:"strand1",dataType:{type:"Text"},featureField:["strand"]},{name:"strand2",dataType:{type:"Text"},featureField:["mate","strand"]}],a.columns.forEach((function(e,t){var r=s[t];r&&(e.name=r.name,e.dataType=r.dataType)})),a.hasColumnNames=!0,a.rowSet.rows.forEach((function(e,t){var r={};e.cells.forEach((function(e,t){var n=e.text,a=s[t],u=a&&"Number"===a.dataType.type&&n?parseFloat(n):n;a?2===a.featureField.length?(r[a.featureField[0]]||(r[a.featureField[0]]={}),r[a.featureField[0]][a.featureField[1]]=u):r[a.featureField[0]]=u:r["column".concat(t+1)]=u})),r.uniqueId="bedpe-".concat(t),e.extendedData={feature:r}})),a.assemblyName=r.selectedAssemblyName,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},45997:function(e,t,r){r.r(t),r.d(t,{bufferToString:function(){return p},parseCsvBuffer:function(){return h},parseTsvBuffer:function(){return v}});var n,a,u,s=r(41361),o=r(96234),c=r(32723),i=r(33028),f=r(34795),d=r(81073);function p(e){return new TextDecoder("utf8",{fatal:!0}).decode(e)}function l(e){return(n=n||(0,f.Z)((0,c.Z)().mark((function e(t){var n,a,u=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,r.e(2745).then(r.t.bind(r,12745,23)).then((function(e){return e.default}));case 3:return a=e.sent,e.abrupt("return",a((0,i.Z)({noheader:!0,output:"csv"},n)).fromString(p(t)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,r){var n,a,u=e.rows[0].cells[t].text||"",s="Text";try{a=(0,d.parseLocString)(u,r)}catch(o){}return null!==(n=a)&&void 0!==n&&n.refName&&"number"===typeof a.start?s="LocString":/^\d+(\.\d+)?$/.test(u)&&(s="Number"),s}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.hasColumnNameLine,n=void 0!==r&&r,a=t.columnNameLineNumber,u=void 0===a?1:a,c=t.isValidRefName,i=void 0===c?function(){return!1}:c,f=t.selectedAssemblyName,p=0,l={isLoaded:!0,rows:e.map((function(e,t){var r=t+(n?0:1);return e.length>p&&(p=e.length),{id:String(r),cells:e.map((function(e,t){return{columnNumber:t,text:e}}))}}))},y={};if(n&&void 0!==u){var h=l.rows.splice(u-1,1),v=(0,o.Z)(h,1)[0];v&&v.cells.forEach((function(e,t){y[t]=e.text||""}))}for(var T=[],x=[],b=0;b<p;b+=1){x.push(b);var w=m(l,b,i);if("LocString"===w){var N,F=(0,s.Z)(l.rows);try{for(F.s();!(N=F.n()).done;){var Z=N.value.cells[b];Z.extendedData=(0,d.parseLocString)(Z.text,i)}}catch(g){F.e(g)}finally{F.f()}}T[b]={name:y[b],dataType:{type:w}}}return{rowSet:l,columnDisplayOrder:x,hasColumnNames:!!n,columns:T,assemblyName:f}}function h(e,t){return(a=a||(0,f.Z)((0,c.Z)().mark((function e(t,r){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:return n=e.sent,e.abrupt("return",y(n,r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return(u=u||(0,f.Z)((0,c.Z)().mark((function e(t,r){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,{delimiter:"\t"});case 2:return n=e.sent,e.abrupt("return",y(n,r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=847.dc35fbb0.chunk.js.map