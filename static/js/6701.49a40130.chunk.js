"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[6701],{86701:(e,n,t)=>{t.r(n),t.d(n,{default:()=>je});var s=t(41867),a=t(43800),l=t(81108),r=t(89170),o=t(51590),i=t(3725),c=t(45489),d=t(47192),u=t(3762),p=t(31625),x=t(67666),h=t(95460),m=t(90872),j=t(35421),v=t(84535),g=t(49133),b=t(77081),Z=t(59231),f=t(7229),C=t(68367),y=t(35544),N=t(74735),k=t(33065),T=t(72280),S=t(78693),w=t(23801),L=t(17329),M=t(98662),A=t(80838);const I=(0,u.observer)((function(e){let{slot:n}=e;const[t,a]=(0,s.useState)(""),[l,r]=(0,s.useState)(!1);return(0,A.jsxs)(A.Fragment,{children:[n.name?(0,A.jsx)(N.Z,{children:n.name}):null,(0,A.jsxs)(k.Z,{disablePadding:!0,children:[n.value.map(((e,t)=>(0,A.jsx)(T.ZP,{disableGutters:!0,children:(0,A.jsx)(g.Z,{value:e,onChange:e=>n.setAtIndex(t,e.target.value),InputProps:{endAdornment:(0,A.jsx)(S.Z,{position:"end",children:(0,A.jsx)(C.Z,{onClick:()=>n.removeAtIndex(t),children:(0,A.jsx)(M.Z,{})})})}})},t))),l?(0,A.jsx)(T.ZP,{disableGutters:!0,children:(0,A.jsx)(g.Z,{value:t,placeholder:"add new",onChange:e=>a(e.target.value),InputProps:{endAdornment:(0,A.jsx)(S.Z,{position:"end",children:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(w.Z,{color:"primary",variant:"contained",style:{margin:2},"data-testid":"stringArrayAdd-".concat(n.name),onClick:()=>{r(!1),n.add(t),a("")},children:"OK"}),(0,A.jsx)(w.Z,{color:"primary",variant:"contained",style:{margin:2},onClick:()=>{r(!1),a("")},children:"Cancel"})]})})}})}):null,(0,A.jsx)(w.Z,{color:"primary",variant:"contained",style:{margin:4},disabled:l,onClick:()=>r(!0),children:"Add item"})]}),(0,A.jsx)(L.Z,{children:n.description})]})}));var F=t(77573),E=t(88826),P=t(42844);const W='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',H=(0,d.ZL)()((e=>({callbackEditor:{marginTop:"16px",borderBottom:"1px solid ".concat(e.palette.divider),width:"100%",fontFamily:W},textAreaFont:{fontFamily:W},callbackContainer:{width:"100%",overflowX:"auto"},error:{color:"red",fontSize:"0.8em"}}))),O=(0,u.observer)((function(e){let{slot:n}=e;const{classes:t}=H(),[a,l]=(0,s.useState)(n.value),[r,o]=(0,s.useState)(),i=(0,m.useDebounce)(a,400);return(0,s.useEffect)((()=>{try{var e;const t=i.startsWith("jexl:")?i:"jexl:".concat(i);if("jexl:"===t)throw new Error("Empty jexl expression is not valid");(0,E.P)(t,null===(e=(0,p.getEnv)(n).pluginManager)||void 0===e?void 0:e.jexl),n.set(t),o(void 0)}catch(t){console.error({e:t}),o(t)}}),[i,n]),(0,A.jsxs)(A.Fragment,{children:[r?(0,A.jsx)("p",{className:t.error,children:"".concat(r)}):null,(0,A.jsxs)("div",{className:t.callbackContainer,children:[(0,A.jsx)(g.Z,{multiline:!0,className:t.callbackEditor,value:a.startsWith("jexl:")?a.split("jexl:")[1]:a,onChange:e=>l(e.target.value),style:{background:r?"#fdd":void 0},InputProps:{classes:{input:t.textAreaFont}}}),(0,A.jsx)("p",{children:n.description}),(0,A.jsx)(F.Z,{title:(0,A.jsxs)("div",{children:["Callbacks are written in Jexl format. Click to learn more.",(0,A.jsx)("br",{})," Names of available context items: ",n.contextVariable]}),arrow:!0,children:(0,A.jsx)(C.Z,{color:"primary",onClick:()=>{const e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)},children:(0,A.jsx)(P.Z,{})})})]})]})})),V=(0,s.lazy)((()=>t.e(2291).then(t.bind(t,52291)))),D=e=>{const{value:n="#000",label:t="",TextFieldProps:a={},onChange:l}=e,[r,o]=(0,s.useState)(!1);return(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)(g.Z,{value:n,label:t,onClick:()=>o(!r),onChange:e=>l(e.target.value),...a}),(0,A.jsx)("div",{style:{marginTop:10},children:(0,A.jsx)(s.Suspense,{fallback:(0,A.jsx)("div",{}),children:(0,A.jsx)(V,{color:n,onChange:e=>l(e)})})})]})},_=(0,u.observer)((function(e){const{slot:n}=e;return(0,A.jsx)(D,{label:n.name,value:n.value,onChange:e=>n.set(e),TextFieldProps:{helperText:n.description,fullWidth:!0}})}));var z=t(24137),K=t(6743),B=t(79118),U=t(45673),G=t(36686);const J=(0,d.ZL)()((e=>({card:{marginTop:e.spacing(1)}}))),X=(0,u.observer)((function(e){let{slot:n}=e;const{classes:t}=J(),[a,l]=(0,s.useState)("");return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(N.Z,{children:n.name}),[...n.value].map((e=>{let[s,a]=e;return(0,A.jsxs)(K.Z,{raised:!0,className:t.card,children:[(0,A.jsx)(B.Z,{title:s,action:(0,A.jsx)(C.Z,{onClick:()=>n.remove(s),children:(0,A.jsx)(M.Z,{})})}),(0,A.jsx)(U.Z,{children:(0,A.jsx)(I,{slot:{name:n.name,value:a,description:"Values associated with entry ".concat(s),setAtIndex:(e,t)=>n.setAtKeyIndex(s,e,t),removeAtIndex:e=>n.removeAtKeyIndex(s,e),add:e=>n.addToKey(s,e)}})})]},s)})),(0,A.jsx)(K.Z,{raised:!0,className:t.card,children:(0,A.jsx)(B.Z,{disableTypography:!0,title:(0,A.jsx)(g.Z,{fullWidth:!0,value:a,placeholder:"add new",onChange:e=>l(e.target.value),InputProps:{endAdornment:(0,A.jsx)(S.Z,{position:"end",children:(0,A.jsx)(C.Z,{disabled:""===a,onClick:()=>{n.add(a,[]),l("")},children:(0,A.jsx)(G.Z,{})})})}})})}),(0,A.jsx)(L.Z,{children:n.description})]})}));function R(e){const{helperText:n}=e;return(0,A.jsx)(g.Z,{...e,helperText:(0,A.jsx)(j.SanitizedHTML,{html:n||""}),FormHelperTextProps:{component:"div"},fullWidth:!0})}const q=(0,u.observer)((function(e){let{slot:n}=e;const[t,a]=(0,s.useState)(n.value);return(0,s.useEffect)((()=>{const e=Number.parseFloat(t);var s;Number.isNaN(e)?null===(s=n.reset)||void 0===s||s.call(n):n.set(e)}),[n,t]),(0,A.jsx)(R,{label:n.name,helperText:n.description,value:t,type:"number",onChange:e=>a(e.target.value)})})),Q=(0,d.ZL)()((e=>({card:{marginTop:e.spacing(1)}}))),Y=(0,u.observer)((function(e){let{slot:n}=e;const{classes:t}=Q(),[a,l]=(0,s.useState)("");return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(N.Z,{children:n.name}),[...n.value].map((e=>{let[s,a]=e;return(0,A.jsxs)(K.Z,{raised:!0,className:t.card,children:[(0,A.jsx)(B.Z,{title:s,action:(0,A.jsx)(C.Z,{onClick:()=>n.remove(s),children:(0,A.jsx)(M.Z,{})})}),(0,A.jsx)(U.Z,{children:(0,A.jsx)(q,{slot:{value:a,set:e=>n.add(s,e)}})})]},s)})),(0,A.jsx)(K.Z,{raised:!0,className:t.card,children:(0,A.jsx)(B.Z,{disableTypography:!0,title:(0,A.jsx)(g.Z,{fullWidth:!0,value:a,placeholder:"add new",onChange:e=>l(e.target.value),InputProps:{endAdornment:(0,A.jsx)(S.Z,{position:"end",children:(0,A.jsx)(C.Z,{disabled:""===a,onClick:()=>{n.add(a,0),l("")},children:(0,A.jsx)(G.Z,{})})})}})})}),(0,A.jsx)(L.Z,{children:n.description})]})}));var $=t(90552),ee=t(96614),ne=t(83171);const te=(0,u.observer)((function(e){let{slot:n}=e;return(0,A.jsxs)($.Z,{children:[(0,A.jsx)(ee.Z,{label:n.name,control:(0,A.jsx)(ne.Z,{checked:n.value,onChange:e=>n.set(e.target.checked)})}),(0,A.jsx)(L.Z,{children:n.description})]})})),se=(0,d.ZL)()((e=>({paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}}))),ae=(0,u.observer)((function(e){let{slot:n}=e;return(0,A.jsx)(R,{label:n.name,helperText:n.description,value:n.value,onChange:e=>n.set(e.target.value)})})),le=(0,u.observer)((function(e){let{slot:n}=e;return(0,A.jsx)(g.Z,{label:n.name,helperText:n.description,multiline:!0,value:n.value,onChange:e=>n.set(e.target.value)})})),re=()=>(0,A.jsx)(b.Z,{children:(0,A.jsx)("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"})}),oe=(0,u.observer)((function(e){let{slot:n}=e;const[t,a]=(0,s.useState)(n.value);return(0,s.useEffect)((()=>{const e=Number.parseInt(t,10);Number.isNaN(e)||n.set(e)}),[n,t]),(0,A.jsx)(R,{label:n.name,helperText:n.description,value:t,type:"number",onChange:e=>a(e.target.value)})})),ie=(0,u.observer)((function(e){let{slot:n,slotSchema:t}=e;const s=(0,p.getPropertyMembers)((0,v.getSubType)(t)),a=(0,v.getUnionSubTypes)((0,v.getUnionSubTypes)((0,v.getSubType)(s.properties.value))[1]).map((e=>e.value));return(0,A.jsx)(R,{value:n.value,label:n.name,select:!0,helperText:n.description,onChange:e=>n.set(e.target.value),children:a.map((e=>(0,A.jsx)(Z.Z,{value:e,children:e},e)))})})),ce=(0,u.observer)((function(e){var n;let{slot:t}=e;return(0,A.jsx)(j.FileSelector,{location:t.value,setLocation:e=>t.set(e),name:t.name,description:t.description,rootModel:null===(n=(0,m.getEnv)(t).pluginManager)||void 0===n?void 0:n.rootModel})})),de={string:ae,text:le,fileLocation:ce,stringArray:I,stringArrayMap:X,numberMap:Y,number:q,integer:oe,color:_,stringEnum:ie,boolean:te,frozen:z.Z,configRelationships:z.Z},ue=(0,u.observer)((function(e){let{slot:n,slotSchema:t}=e;const{classes:s}=se(),{type:a}=n;let l=n.isCallback?O:de[a];return l||(console.warn("no slot editor defined for ".concat(a,", editing as string")),l=ae),a in de||console.warn("SlotEditor needs to implement ".concat(a)),(0,A.jsxs)(f.Z,{className:s.paper,children:[(0,A.jsx)("div",{className:s.paperContent,children:(0,A.jsx)(l,{slot:n,slotSchema:t})}),(0,A.jsx)("div",{className:s.slotModeSwitch,children:n.contextVariable.length?(0,A.jsx)(C.Z,{onClick:()=>n.isCallback?n.convertToValue():n.convertToCallback(),title:"convert to ".concat(n.isCallback?"regular value":"callback"),children:n.isCallback?(0,A.jsx)(re,{}):(0,A.jsx)(y.Z,{})}):null})]})})),pe=(0,u.observer)((function(e){let{typeNameChoices:n,slot:t,slotName:s,onChange:a}=e;const{classes:l}=se();return(0,A.jsx)(f.Z,{className:l.paper,children:(0,A.jsx)("div",{className:l.paperContent,children:(0,A.jsx)(g.Z,{value:t.type,label:"Type",select:!0,helperText:"Type of ".concat(s," to use"),fullWidth:!0,onChange:a,children:n.map((e=>(0,A.jsx)(Z.Z,{value:e,children:e},e)))})})})})),xe=(0,d.ZL)()((e=>{var n;return{expandIcon:{color:(null===(n=e.palette.tertiary)||void 0===n?void 0:n.contrastText)||"#fff"},root:{padding:e.spacing(1,3,1,1)},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:"1px solid ".concat(e.palette.text.primary)},noOverflow:{width:"100%",overflowX:"auto"}}})),he=(0,u.observer)((function(e){const{classes:n}=xe(),{slotName:t,slotSchema:d,schema:u,slot:p=u[t],path:m=[]}=e;let j;if((0,a.isConfigurationSchemaType)(d)){if(p.length)return p.map(((n,a)=>{const l="".concat((0,x.singular)(t)," ").concat(a+1);return(0,s.createElement)(he,{...e,key:l,slot:n,slotName:l})}));const v=(0,a.getTypeNamesFromExplicitlyTypedUnion)(d);return v.length&&(j=(0,A.jsx)(pe,{typeNameChoices:v,slotName:t,slot:p,onChange:e=>{e.target.value!==p.type&&u.setSubschema(t,{type:e.target.value})}})),(0,A.jsxs)(l.Z,{defaultExpanded:!0,className:n.accordion,children:[(0,A.jsx)(r.Z,{expandIcon:(0,A.jsx)(h.Z,{className:n.expandIcon}),children:(0,A.jsx)(o.Z,{children:[...m,t].join("\u2794")})}),(0,A.jsxs)(i.Z,{className:n.expansionPanelDetails,children:[j,(0,A.jsx)(c.Z,{className:n.noOverflow,children:(0,A.jsx)(me,{schema:p,path:[...m,t]})})]})]})}return(0,a.isConfigurationSlotType)(d)?(0,A.jsx)(ue,{slot:p,slotSchema:d},t):null})),me=(0,u.observer)((function(e){let{schema:n,path:t=[]}=e;const s=(0,p.getMembers)(n).properties;return(0,A.jsx)(A.Fragment,{children:Object.entries(s).map((e=>{let[s,a]=e;return(0,A.jsx)(he,{slotName:s,slotSchema:a,path:t,schema:n},s)}))})})),je=(0,u.observer)((function(e){let{model:n}=e;const{classes:t}=xe(),{target:s}=n,c=s&&(0,a.readConfObject)(s,"trackId"),d=s&&(0,a.readConfObject)(s,"name");return(0,A.jsxs)(l.Z,{defaultExpanded:!0,className:t.accordion,children:[(0,A.jsx)(r.Z,{expandIcon:(0,A.jsx)(h.Z,{className:t.expandIcon}),children:(0,A.jsx)(o.Z,{children:null!==d&&void 0!==d?d:"Configuration"})}),(0,A.jsx)(i.Z,{className:t.expansionPanelDetails,"data-testid":"configEditor",children:s?(0,A.jsx)(me,{schema:s}):"no target set"})]},c)}))}}]);
//# sourceMappingURL=6701.49a40130.chunk.js.map