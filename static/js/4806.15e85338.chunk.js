"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4806],{74806:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var n=t(7552),l=t(68446),i=t(29499),r=t(36715),s=t(1343),o=t(29629),c=t(58507),p=t(5401),u=t(49823),d=t(36422),y=t(99546),g=t(80256),m=t(91476);const f=(0,l.observer)((function(e){const{model:a,handleClose:t}=e,[l,f]=(0,n.useState)(""),[h,D]=(0,n.useState)(),[k,v]=(0,n.useState)(!1),[A,E]=(0,n.useState)(),C=/^[A-Za-z][A-Za-z0-9]$/.exec(l),L=2===l.length&&!C,$=(0,y.useDebounce)(l,1e3),[b,w]=(0,n.useState)("");return(0,n.useEffect)((()=>{(async()=>{try{if(!L){E(void 0),v(!0);const e=await(0,g.X)({self:a,tag:$,blocks:(0,y.getContainingView)(a).staticBlocks});D(e)}}catch(e){console.error(e),E(e)}finally{v(!1)}})()}),[a,L,$]),n.createElement(u.Dialog,{open:!0,onClose:t,title:"Group by"},n.createElement(i.A,null,n.createElement(r.A,null,'NOTE: this will create new session tracks with the "filter by" set to the values chosen here rather than affecting the current track state'),n.createElement(s.A,{fullWidth:!0,value:b,onChange:e=>{w(e.target.value)},label:"Group by...",select:!0},n.createElement(o.A,{value:"strand"},"Strand"),n.createElement(o.A,{value:"tag"},"Tag")),"tag"===b?n.createElement(n.Fragment,null,n.createElement(r.A,{color:"textSecondary"},"Examples: HP for haplotype, RG for read group, etc."),n.createElement(s.A,{value:l,onChange:e=>{f(e.target.value)},placeholder:"Enter tag name",error:L,helperText:L?"Not a valid tag":"",autoComplete:"off","data-testid":"group-tag-name",slotProps:{htmlInput:{maxLength:2,"data-testid":"group-tag-name-input"}}}),A?n.createElement(u.ErrorMessage,{error:A}):k?n.createElement(u.LoadingEllipses,{title:"Loading unique tags"}):h?n.createElement("div",null,n.createElement("div",null,"Found unique ",l," values:"),n.createElement("div",null,h.join(", "))):null):null),n.createElement(c.A,null,n.createElement(p.A,{variant:"contained",color:"primary",type:"submit",disabled:!h,autoFocus:!0,onClick:()=>{const e=(0,y.getContainingTrack)(a),n=(i=(0,d.getSnapshot)(e.configuration),JSON.parse(JSON.stringify(i)));var i;const r=(0,y.getSession)(a),s=(0,y.getContainingView)(a);if("tag"===b){if(h){const e=[...h,void 0];for(const a of e){const e=`${n.trackId}-${l}:${a}-${+Date.now()}-sessionTrack`;r.addTrackConf({...n,trackId:e,name:`${n.name} (-)`,displays:[{displayId:`${e}-LinearAlignmentsDisplay`,type:"LinearAlignmentsDisplay",pileupDisplay:{displayId:`${e}-LinearAlignmentsDisplay-LinearPileupDisplay`,type:"LinearPileupDisplay",filterBy:{...m.JD,tagFilter:{tag:l,value:a}}}}]}),s.showTrack(e)}}}else if("strand"===b){const e=`${n.trackId}-${l}:(-)-${+Date.now()}-sessionTrack`,a=`${n.trackId}-${l}:(+)-${+Date.now()}-sessionTrack`;r.addTrackConf({...n,trackId:e,name:`${n.name} (-)`,displays:[{displayId:`${e}-LinearAlignmentsDisplay`,type:"LinearAlignmentsDisplay",pileupDisplay:{displayId:`${e}-LinearAlignmentsDisplay-LinearPileupDisplay`,type:"LinearPileupDisplay",filterBy:m.CQ}},{displayId:`${e}-LinearSNPCoverageDisplay`,type:"LinearSNPCoverageDisplay",filterBy:m.CQ}]}),r.addTrackConf({...n,trackId:a,name:`${n.name} (+)`,displays:[{displayId:`${a}-LinearAlignmentsDisplay`,type:"LinearAlignmentsDisplay",pileupDisplay:{displayId:`${a}-LinearAlignmentsDisplay-LinearPileupDisplay`,type:"LinearPileupDisplay",filterBy:m.Ar}},{displayId:`${a}-LinearSNPCoverageDisplay`,type:"LinearSNPCoverageDisplay",filterBy:m.Ar}]}),s.showTrack(e),s.showTrack(a)}t()}},"Submit"),n.createElement(p.A,{variant:"contained",color:"secondary",onClick:()=>{t()}},"Cancel")))}))}}]);
//# sourceMappingURL=4806.15e85338.chunk.js.map