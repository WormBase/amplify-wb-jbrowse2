"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[8010],{38010:function(t,e,r){r.r(e),r.d(e,{renderToSvg:function(){return g}});var n=r(32723),a=r(33028),i=r(34795),s=(r(96902),r(30908)),c=r(75717),o=r(27664),u=r(93751),l=r(17867),f=r(50209),d=r(88636),h=r(29938);function p(t){var e=t.width,r=t.height,n=t.shift,a=(0,d.Z)();return(0,h.jsx)("rect",{width:e+2*n,height:r,fill:a.palette.background.default})}var x=r(16151),m=r(12905);function v(t,e,r){return(0,o.max)(t.flatMap((function(t){return t.tracks.map((function(t){return(0,o.measureText)((0,x.getTrackName)(t.configuration,r),e)}))})),0)}function w(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={},a=e,i=0;i<t.tracks.length;i++){var s=t.tracks[i];n[s.configuration.trackId]=a+r,a+=s.displays[0].height+e}return n}function g(t,e){return k.apply(this,arguments)}function k(){return k=(0,i.Z)((0,n.Z)().mark((function t(e,r){var d,x,g,k,j,b,y,Z,S,T,z,H,L,P,I,N,_,O,R,B,C,G,M,U,Y,F,J,W,X,q;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x=r.textHeight,g=void 0===x?18:x,k=r.headerHeight,j=void 0===k?30:k,b=r.rulerHeight,y=void 0===b?30:b,Z=r.fontSize,S=void 0===Z?13:Z,T=r.trackLabels,z=void 0===T?"offset":T,H=r.Wrapper,L=void 0===H?function(t){var e=t.children;return(0,h.jsx)(h.Fragment,{children:e})}:H,P=r.themeName,I=void 0===P?"default":P,N=(0,o.getSession)(e),_=null===(d=N.allThemes)||void 0===d?void 0:d.call(N)[I],O=e.width,R=e.views,B=50,C=j+y,G=R.map((function(t){return(0,f.hY)(t.tracks,g,z)+C})),M=(0,o.sum)(G)+100,t.next=10,Promise.all(R.map(function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,Promise.all(e.tracks.map(function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.displays[0],t.next=3,(0,c.when)((function(){return void 0===i.ready||i.ready}));case 3:return t.t0=e,t.next=6,i.renderSvg((0,a.Z)((0,a.Z)({},r),{},{theme:_}));case 6:return t.t1=t.sent,t.abrupt("return",{track:t.t0,result:t.t1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.t1=t.sent,t.abrupt("return",{view:t.t0,data:t.t1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 10:return U=t.sent,Y=v(R,S,N)+40,F="left"===z?Y:0,J="offset"===z?g:0,W=[w(R[0],J,S+C),w(R[1],J,S+G[0]+C)],X=O+F,q=(0,l.createJBrowseTheme)(_),t.abrupt("return",(0,s.renderToStaticMarkup)((0,h.jsx)(u.Z,{theme:q,children:(0,h.jsx)(L,{children:(0,h.jsxs)("svg",{width:O,height:M,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,X+2*B,M].toString(),children:[(0,h.jsx)(p,{width:X,height:M,shift:B}),(0,h.jsxs)("g",{transform:"translate(".concat(B," ").concat(S,")"),children:[(0,h.jsxs)("g",{transform:"translate(".concat(F,")"),children:[(0,h.jsx)("text",{x:0,fontSize:S,fill:q.palette.text.primary,children:R[0].assemblyNames.join(", ")}),(0,h.jsx)(f.Uc,{model:U[0].view,fontSize:S})]}),(0,h.jsx)(f.Ge,{textHeight:g,trackLabels:z,fontSize:S,model:U[0].view,displayResults:U[0].data,offset:C,trackLabelOffset:F})]}),(0,h.jsxs)("g",{transform:"translate(".concat(B," ").concat(S+G[0],")"),children:[(0,h.jsxs)("g",{transform:"translate(".concat(F,")"),children:[(0,h.jsx)("text",{x:0,fontSize:S,fill:q.palette.text.primary,children:R[1].assemblyNames.join(", ")}),(0,h.jsx)(f.Uc,{model:U[1].view,fontSize:S})]}),(0,h.jsx)(f.Ge,{textHeight:g,trackLabels:z,fontSize:S,model:U[1].view,displayResults:U[1].data,offset:C,trackLabelOffset:F})]}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip-bsv",children:(0,h.jsx)("rect",{x:0,y:0,width:O,height:M})})}),(0,h.jsx)("g",{transform:"translate(".concat(F+B,")"),clipPath:"url(#clip-bsv)",children:e.matchedTracks.map((function(t){return(0,h.jsx)(m.Z,{parentRef:{current:null},model:e,trackId:t.configuration.trackId,getTrackYPosOverride:function(t,e){return W[e][t]}},t.configuration.trackId)}))})]})})})));case 18:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}}}]);
//# sourceMappingURL=8010.466e5a82.chunk.js.map