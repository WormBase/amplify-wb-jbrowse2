/*! For license information please see 1238.660c12ba.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[1238],{31238:(t,i,e)=>{e.d(i,{q5:()=>R,unzip:()=>r,y$:()=>o});var n=e(59737),h=e(37168),s=e(69426);async function r(t){try{let i,e=0,h=0;const r=[];let o,u=0;do{const n=t.subarray(e);if(o=new s.Inflate,({strm:i}=o),o.push(n,s.Z_SYNC_FLUSH),o.err)throw new Error(o.msg);e+=i.next_in,r[h]=o.result,u+=r[h].length,h+=1}while(i.avail_in);const a=new Uint8Array(u);for(let t=0,n=0;t<r.length;t++)a.set(r[t],n),n+=r[t].length;return n.Buffer.from(a)}catch(i){if("".concat(i).match(/incorrect header check/))throw new Error("problem decompressing block: incorrect gzip header check");throw i}}async function o(t,i){try{let e;const{minv:h,maxv:r}=i;let o=h.blockPosition,u=h.dataPosition;const a=[],g=[],l=[];let f=0,c=0;do{const i=t.subarray(o-h.blockPosition),n=new s.Inflate;if(({strm:e}=n),n.push(i,s.Z_SYNC_FLUSH),n.err)throw new Error(n.msg);const d=n.result;a.push(d);let w=d.length;g.push(o),l.push(u),1===a.length&&h.dataPosition&&(a[0]=a[0].subarray(h.dataPosition),w=a[0].length);const m=o;if(o+=e.next_in,u+=w,m>=r.blockPosition){a[c]=a[c].subarray(0,r.blockPosition===h.blockPosition?r.dataPosition-h.dataPosition+1:r.dataPosition+1),g.push(o),l.push(u),f+=a[c].length;break}f+=a[c].length,c++}while(e.avail_in);const d=new Uint8Array(f);for(let t=0,i=0;t<a.length;t++)d.set(a[t],i),i+=a[t].length;return{buffer:n.Buffer.from(d),cpositions:g,dpositions:l}}catch(e){if("".concat(e).match(/incorrect header check/))throw new Error("problem decompressing block: incorrect gzip header check");throw e}}var u=null;try{u=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(S){}function a(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function g(t){return!0===(t&&t.__isLong__)}function l(t){var i=Math.clz32(t&-t);return t?31-i:i}a.prototype.__isLong__,Object.defineProperty(a.prototype,"__isLong__",{value:!0}),a.isLong=g;var f={},c={};function d(t,i){var e,n,h;return i?(h=0<=(t>>>=0)&&t<256)&&(n=c[t])?n:(e=m(t,0,!0),h&&(c[t]=e),e):(h=-128<=(t|=0)&&t<128)&&(n=f[t])?n:(e=m(t,t<0?-1:0,!1),h&&(f[t]=e),e)}function w(t,i){if(isNaN(t))return i?L:B;if(i){if(t<0)return L;if(t>=E)return z}else{if(t<=-_)return T;if(t+1>=_)return k}return t<0?w(-t,i).neg():m(t%y|0,t/y|0,i)}function m(t,i,e){return new a(t,i,e)}a.fromInt=d,a.fromNumber=w,a.fromBits=m;var v=Math.pow;function b(t,i,e){if(0===t.length)throw Error("empty string");if("number"===typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?L:B;if((e=e||10)<2||36<e)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return b(t.substring(1),i,e).neg();for(var h=w(v(e,8)),s=B,r=0;r<t.length;r+=8){var o=Math.min(8,t.length-r),u=parseInt(t.substring(r,r+o),e);if(o<8){var a=w(v(e,o));s=s.mul(a).add(w(u))}else s=(s=s.mul(h)).add(w(u))}return s.unsigned=i,s}function p(t,i){return"number"===typeof t?w(t,i):"string"===typeof t?b(t,i):m(t.low,t.high,"boolean"===typeof i?i:t.unsigned)}a.fromString=b,a.fromValue=p;var y=4294967296,E=y*y,_=E/2,N=d(1<<24),B=d(0);a.ZERO=B;var L=d(0,!0);a.UZERO=L;var q=d(1);a.ONE=q;var I=d(1,!0);a.UONE=I;var U=d(-1);a.NEG_ONE=U;var k=m(-1,2147483647,!1);a.MAX_VALUE=k;var z=m(-1,-1,!0);a.MAX_UNSIGNED_VALUE=z;var T=m(0,-2147483648,!1);a.MIN_VALUE=T;var O=a.prototype;O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*y+(this.low>>>0):this.high*y+(this.low>>>0)},O.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var i=w(t),e=this.div(i),n=e.mul(i).sub(this);return e.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var h=w(v(t,6),this.unsigned),s=this,r="";;){var o=s.div(h),u=(s.sub(o.mul(h)).toInt()>>>0).toString(t);if((s=o).isZero())return u+r;for(;u.length<6;)u="0"+u;r=""+u+r}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},O.isZero=function(){return 0===this.high&&0===this.low},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return 1===(1&this.low)},O.isEven=function(){return 0===(1&this.low)},O.equals=function(t){return g(t)||(t=p(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},O.eq=O.equals,O.notEquals=function(t){return!this.eq(t)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(t){return this.comp(t)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(t){return this.comp(t)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(t){return this.comp(t)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(t){return this.comp(t)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(t){if(g(t)||(t=p(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(q)},O.neg=O.negate,O.add=function(t){g(t)||(t=p(t));var i=this.high>>>16,e=65535&this.high,n=this.low>>>16,h=65535&this.low,s=t.high>>>16,r=65535&t.high,o=t.low>>>16,u=0,a=0,l=0,f=0;return l+=(f+=h+(65535&t.low))>>>16,a+=(l+=n+o)>>>16,u+=(a+=e+r)>>>16,u+=i+s,m((l&=65535)<<16|(f&=65535),(u&=65535)<<16|(a&=65535),this.unsigned)},O.subtract=function(t){return g(t)||(t=p(t)),this.add(t.neg())},O.sub=O.subtract,O.multiply=function(t){if(this.isZero())return this;if(g(t)||(t=p(t)),u)return m(u.mul(this.low,this.high,t.low,t.high),u.get_high(),this.unsigned);if(t.isZero())return this.unsigned?L:B;if(this.eq(T))return t.isOdd()?T:B;if(t.eq(T))return this.isOdd()?T:B;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(N)&&t.lt(N))return w(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,n=this.low>>>16,h=65535&this.low,s=t.high>>>16,r=65535&t.high,o=t.low>>>16,a=65535&t.low,l=0,f=0,c=0,d=0;return c+=(d+=h*a)>>>16,f+=(c+=n*a)>>>16,c&=65535,f+=(c+=h*o)>>>16,l+=(f+=e*a)>>>16,f&=65535,l+=(f+=n*o)>>>16,f&=65535,l+=(f+=h*r)>>>16,l+=i*a+e*o+n*r+h*s,m((c&=65535)<<16|(d&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},O.mul=O.multiply,O.divide=function(t){if(g(t)||(t=p(t)),t.isZero())throw Error("division by zero");var i,e,n;if(u)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?m((this.unsigned?u.div_u:u.div_s)(this.low,this.high,t.low,t.high),u.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?L:B;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return L;if(t.gt(this.shru(1)))return I;n=L}else{if(this.eq(T))return t.eq(q)||t.eq(U)?T:t.eq(T)?q:(i=this.shr(1).div(t).shl(1)).eq(B)?t.isNegative()?q:U:(e=this.sub(t.mul(i)),n=i.add(e.div(t)));if(t.eq(T))return this.unsigned?L:B;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();n=B}for(e=this;e.gte(t);){i=Math.max(1,Math.floor(e.toNumber()/t.toNumber()));for(var h=Math.ceil(Math.log(i)/Math.LN2),s=h<=48?1:v(2,h-48),r=w(i),o=r.mul(t);o.isNegative()||o.gt(e);)o=(r=w(i-=s,this.unsigned)).mul(t);r.isZero()&&(r=q),n=n.add(r),e=e.sub(o)}return n},O.div=O.divide,O.modulo=function(t){return g(t)||(t=p(t)),u?m((this.unsigned?u.rem_u:u.rem_s)(this.low,this.high,t.low,t.high),u.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return m(~this.low,~this.high,this.unsigned)},O.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},O.clz=O.countLeadingZeros,O.countTrailingZeros=function(){return this.low?l(this.low):l(this.high)+32},O.ctz=O.countTrailingZeros,O.and=function(t){return g(t)||(t=p(t)),m(this.low&t.low,this.high&t.high,this.unsigned)},O.or=function(t){return g(t)||(t=p(t)),m(this.low|t.low,this.high|t.high,this.unsigned)},O.xor=function(t){return g(t)||(t=p(t)),m(this.low^t.low,this.high^t.high,this.unsigned)},O.shiftLeft=function(t){return g(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?m(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):m(0,this.low<<t-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(t){return g(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?m(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):m(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(t){return g(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?m(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):m(32===t?this.high:this.high>>>t-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.rotateLeft=function(t){var i;return g(t)&&(t=t.toInt()),0===(t&=63)?this:32===t?m(this.high,this.low,this.unsigned):t<32?(i=32-t,m(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),m(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},O.rotl=O.rotateLeft,O.rotateRight=function(t){var i;return g(t)&&(t=t.toInt()),0===(t&=63)?this:32===t?m(this.high,this.low,this.unsigned):t<32?(i=32-t,m(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),m(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},O.rotr=O.rotateRight,O.toSigned=function(){return this.unsigned?m(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:m(this.low,this.high,!0)},O.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},O.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},a.fromBytes=function(t,i,e){return e?a.fromBytesLE(t,i):a.fromBytesBE(t,i)},a.fromBytesLE=function(t,i){return new a(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},a.fromBytesBE=function(t,i){return new a(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};const A=a;class M{constructor(t){let{filehandle:i,path:e}=t;if(i)this.filehandle=i;else{if(!e)throw new TypeError("either filehandle or path must be defined");this.filehandle=new h.S9(e)}}_readLongWithOverflow(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=A.fromBytesLE(t.slice(i,i+8),e);if(n.greaterThan(Number.MAX_SAFE_INTEGER)||n.lessThan(Number.MIN_SAFE_INTEGER))throw new TypeError("integer overflow");return n.toNumber()}_getIndex(){return this.index||(this.index=this._readIndex()),this.index}async _readIndex(){let t=n.Buffer.allocUnsafe(8);await this.filehandle.read(t,0,8,0);const i=this._readLongWithOverflow(t,0,!0);if(!i)return[[0,0]];const e=new Array(i+1);e[0]=[0,0];const h=16*i;if(h>Number.MAX_SAFE_INTEGER)throw new TypeError("integer overflow");t=n.Buffer.allocUnsafe(h),await this.filehandle.read(t,0,h,8);for(let n=0;n<i;n+=1){const i=this._readLongWithOverflow(t,16*n),h=this._readLongWithOverflow(t,16*n+8);e[n+1]=[i,h]}return e}async getLastBlock(){const t=await this._getIndex();if(t.length)return t[t.length-1]}async getRelevantBlocksForRead(t,i){const e=i+t;if(0===t)return[];const n=await this._getIndex(),h=[],s=(t,e)=>{const n=t[1],h=e?e[1]:1/0;return n<=i&&h>i?0:n<i?-1:1};let r=0,o=n.length-1,u=Math.floor(n.length/2),a=s(n[u],n[u+1]);for(;0!==a;)a>0?o=u-1:a<0&&(r=u+1),u=Math.ceil((o-r)/2)+r,a=s(n[u],n[u+1]);h.push(n[u]);let g=u+1;for(;g<n.length&&(h.push(n[g]),!(n[g][1]>=e));g+=1);return h[h.length-1][1]<e&&h.push([]),h}}class R{constructor(t){let{filehandle:i,path:e,gziFilehandle:n,gziPath:s}=t;if(i)this.filehandle=i;else{if(!e)throw new TypeError("either filehandle or path must be defined");this.filehandle=new h.S9(e)}if(!n&&!s&&!e)throw new TypeError("either gziFilehandle or gziPath must be defined");this.gzi=new M({filehandle:n,path:n||s||!e?"".concat(e,".gzi"):s})}async stat(){const t=await this.filehandle.stat();return Object.assign(t,{size:await this.getUncompressedFileSize(),blocks:void 0,blksize:void 0})}async getUncompressedFileSize(){const[,t]=await this.gzi.getLastBlock(),{size:i}=await this.filehandle.stat(),e=n.Buffer.allocUnsafe(4),{bytesRead:h}=await this.filehandle.read(e,0,4,i-28-4);if(4!==h)throw new Error("read error");return t+e.readUInt32LE(0)}async _readAndUncompressBlock(t,i,e){let[n]=i,[h]=e,s=h;s||(s=(await this.filehandle.stat()).size);const o=s-n;await this.filehandle.read(t,0,o,n);return await r(t.slice(0,o))}async read(t,i,e,h){const s=await this.gzi.getRelevantBlocksForRead(e,h),r=n.Buffer.allocUnsafe(65536);let o=i,u=0;for(let n=0;n<s.length-1;n+=1){const i=await this._readAndUncompressBlock(r,s[n],s[n+1]),[,a]=s[n],g=a>=h?0:h-a,l=Math.min(h+e,a+i.length)-a;g>=0&&g<i.length&&(i.copy(t,o,g,l),o+=l-g,u+=l-g)}return{bytesRead:u,buffer:t}}}}}]);
//# sourceMappingURL=1238.660c12ba.chunk.js.map