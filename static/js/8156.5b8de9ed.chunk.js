"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[8156],{38156:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var s=a(41867),n=a(90552),o=a(98484),r=a(21126),i=a(96614),c=a(23738),l=a(47500),d=a(45294),u=a(7229),m=a(23801),h=a(47192),p=a(3762),f=a(90872),x=a(35421),b=a(51590);var Z=a(80838);function y(e){let{radioOption:t,assembly1:a,assembly2:s,fileLocation:n,bed1Location:o,bed2Location:r}=e;if(".paf"===t)return{type:"PAFAdapter",pafLocation:n,queryAssembly:a,targetAssembly:s};if(".out"===t)return{type:"MashMapAdapter",outLocation:n,queryAssembly:a,targetAssembly:s};if(".delta"===t)return{type:"DeltaAdapter",deltaLocation:n,queryAssembly:a,targetAssembly:s};if(".chain"===t)return{type:"ChainAdapter",chainLocation:n,queryAssembly:a,targetAssembly:s};if(".anchors"===t)return{type:"MCScanAnchorsAdapter",mcscanAnchorsLocation:n,bed1Location:o,bed2Location:r,assemblyNames:[a,s]};if(".anchors.simple"===t)return{type:"MCScanSimpleAnchorsAdapter",mcscanSimpleAnchorsLocation:n,bed1Location:o,bed2Location:r,assemblyNames:[a,s]};throw new Error("Unknown to detect type ".concat(t," from filename (select radio button to clarify)"))}const g=(0,p.observer)((e=>{let{assembly1:t,assembly2:a,setSessionTrackData:n}=e;const[o,l]=(0,s.useState)(),[m,h]=(0,s.useState)(),[p,f]=(0,s.useState)(),[g,v]=(0,s.useState)(""),[j,S]=(0,s.useState)(),k=(w=p)?w.uri||w.localPath||w.name:void 0;var w;const C=g||(k?function(e){const t=e.split(".").pop();return t?".".concat(t):""}(function(e){return e.endsWith(".gz")?e.slice(0,-3):e}(k)):"");return(0,s.useEffect)((()=>{try{if(p){const e=k?k.split("#")[0].split("?")[0].split("/").pop():"MyTrack",s="".concat(e,"-").concat(Date.now());S(void 0),n({trackId:s,name:e,assemblyNames:[a,t],type:"SyntenyTrack",adapter:y({radioOption:C,assembly1:t,assembly2:a,fileLocation:p,bed1Location:m,bed2Location:o})})}}catch(e){console.error(e),S(e)}}),[k,t,a,m,o,p,C,n]),(0,Z.jsxs)(u.Z,{style:{padding:12},children:[j?(0,Z.jsx)(x.ErrorMessage,{error:j}):null,(0,Z.jsx)(b.Z,{style:{textAlign:"center"},children:"Add a .paf, .out (MashMap), .delta (Mummer), .chain, .anchors or .anchors.simple (MCScan) file to view in the dotplot. These file types can also be gzipped. The first assembly should be the query sequence (e.g. left column of the PAF) and the second assembly should be the target sequence (e.g. right column of the PAF)"}),(0,Z.jsx)(r.Z,{value:C,onChange:e=>v(e.target.value),children:(0,Z.jsxs)(d.ZP,{container:!0,justifyContent:"center",children:[(0,Z.jsx)(d.ZP,{item:!0,children:(0,Z.jsx)(i.Z,{value:".paf",control:(0,Z.jsx)(c.Z,{}),label:".paf"})}),(0,Z.jsx)(d.ZP,{item:!0,children:(0,Z.jsx)(i.Z,{value:".out",control:(0,Z.jsx)(c.Z,{}),label:".out"})}),(0,Z.jsx)(d.ZP,{item:!0,children:(0,Z.jsx)(i.Z,{value:".delta",control:(0,Z.jsx)(c.Z,{}),label:".delta"})}),(0,Z.jsx)(d.ZP,{item:!0,children:(0,Z.jsx)(i.Z,{value:".chain",control:(0,Z.jsx)(c.Z,{}),label:".chain"})}),(0,Z.jsx)(d.ZP,{item:!0,children:(0,Z.jsx)(i.Z,{value:".anchors",control:(0,Z.jsx)(c.Z,{}),label:".anchors"})}),(0,Z.jsx)(d.ZP,{item:!0,children:(0,Z.jsx)(i.Z,{value:".anchors.simple",control:(0,Z.jsx)(c.Z,{}),label:".anchors.simple"})})]})}),(0,Z.jsx)(d.ZP,{container:!0,justifyContent:"center",children:(0,Z.jsx)(d.ZP,{item:!0,children:".anchors"===g||".anchors.simple"===g?(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{style:{margin:20},children:["Open the ",g," and .bed files for both genome assemblies from the MCScan (Python version) pipeline"," ",(0,Z.jsx)("a",{href:"https://github.com/tanghaibao/jcvi/wiki/MCscan-(Python-version)",children:"(more info)"})]}),(0,Z.jsxs)("div",{style:{display:"flex"},children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(x.FileSelector,{name:".anchors file",description:"",location:p,setLocation:e=>f(e)})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(x.FileSelector,{name:"genome 1 .bed (left column of anchors file)",description:"",location:m,setLocation:e=>h(e)})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(x.FileSelector,{name:"genome 2 .bed (right column of anchors file)",description:"",location:o,setLocation:e=>l(e)})})]})]}):(0,Z.jsx)(x.FileSelector,{name:g?g+" location":"",description:"",location:p,setLocation:e=>f(e)})})})]})}));var v=a(36669),j=a(59231),S=a(99512),k=a(43800);const w=(0,p.observer)((e=>{var t;let{model:a,assembly1:n,assembly2:o,setShowTrackId:r}=e;const i=(0,f.getSession)(a),{tracks:c=[],sessionTracks:l=[]}=i,d=[...c,...l].filter((e=>function(e,t,a){const s=(0,k.readConfObject)(e,"assemblyNames");return s.includes(t)&&s.includes(a)&&e.type.includes("Synteny")}(e,o,n))),m=(null===(t=d[0])||void 0===t?void 0:t.trackId)||"",[h,p]=(0,s.useState)(m);return(0,s.useEffect)((()=>{p(m)}),[m]),(0,s.useEffect)((()=>{r(h)}),[h,r]),(0,Z.jsxs)(u.Z,{style:{padding:12},children:[(0,Z.jsx)(b.Z,{paragraph:!0,children:'Select a track from the select box below, the track will be shown when you hit "Launch".'}),d.length?(0,Z.jsx)(v.Z,{value:h,onChange:e=>p(e.target.value),children:d.map((e=>(0,Z.jsx)(j.Z,{value:e.trackId,children:(0,S.getTrackName)(e,i)},e.trackId)))}):(0,Z.jsx)(x.ErrorMessage,{error:"No synteny tracks found for ".concat(n,",").concat(o)})]})})),C=(0,h.ZL)()((e=>({importFormContainer:{padding:e.spacing(4),margin:"0 auto"},assemblySelector:{width:"75%",margin:"0 auto"}})));function P(e){let{setSessionTrackData:t,setShowTrackId:a,sessionTrackData:l,assembly1:d,assembly2:u,model:m}=e;const[h,p]=(0,s.useState)("none");return(0,s.useEffect)((()=>{"none"===h&&(t(void 0),a(void 0))}),[h,t,a]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(n.Z,{children:[(0,Z.jsx)(o.Z,{id:"group-label",children:"(Optional) Select or add a synteny track"}),(0,Z.jsxs)(r.Z,{row:!0,value:h,onChange:e=>p(e.target.value),"aria-labelledby":"group-label",children:[(0,Z.jsx)(i.Z,{value:"none",control:(0,Z.jsx)(c.Z,{}),label:"None"}),(0,Z.jsx)(i.Z,{value:"tracklist",control:(0,Z.jsx)(c.Z,{}),label:"Existing track"}),(0,Z.jsx)(i.Z,{value:"custom",control:(0,Z.jsx)(c.Z,{}),label:"New track"})]})]}),"custom"===h?(0,Z.jsx)(g,{setSessionTrackData:t,sessionTrackData:l,assembly2:u,assembly1:d}):null,"tracklist"===h?(0,Z.jsx)(w,{model:m,assembly1:d,assembly2:u,setShowTrackId:a}):null]})}const A=(0,p.observer)((function(e){let{model:t}=e;const{classes:a}=C(),o=(0,f.getSession)(t),{assemblyNames:r}=o,[i,c]=(0,s.useState)(r[0]||""),[h,p]=(0,s.useState)(r[0]||""),[b,y]=(0,s.useState)(),[g,v]=(0,s.useState)(),[j,S]=(0,s.useState)();const k=b;return(0,Z.jsxs)(l.Z,{className:a.importFormContainer,children:[k?(0,Z.jsx)(x.ErrorMessage,{error:k}):null,(0,Z.jsx)(d.ZP,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",className:a.assemblySelector,children:(0,Z.jsxs)(d.ZP,{item:!0,children:[(0,Z.jsxs)(u.Z,{style:{padding:12},children:[(0,Z.jsx)("p",{style:{textAlign:"center"},children:"Select assemblies for linear synteny view"}),(0,Z.jsxs)(d.ZP,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[(0,Z.jsx)(d.ZP,{item:!0,children:(0,Z.jsx)(x.AssemblySelector,{selected:h,onChange:e=>p(e),session:o})}),(0,Z.jsx)(d.ZP,{item:!0,children:(0,Z.jsx)(x.AssemblySelector,{selected:i,onChange:e=>c(e),session:o})}),(0,Z.jsx)(d.ZP,{item:!0,children:(0,Z.jsx)(n.Z,{children:(0,Z.jsx)(m.Z,{onClick:async function(){try{if(!(0,f.isSessionWithAddTracks)(o))return;y(void 0);const{assemblyManager:e}=o,a=[h,i];t.setViews(await Promise.all(a.map((async t=>{const a=await e.waitForAssembly(t);if(!a)throw new Error("Assembly ".concat(t," failed to load"));return{type:"LinearGenomeView",bpPerPx:1,offsetPx:0,hideHeader:!0,displayedRegions:a.regions}})))),t.views.forEach((e=>e.setWidth(t.width))),g?(o.addTrackConf(g),t.toggleTrack(g.trackId)):j&&t.showTrack(j)}catch(e){console.error(e),y(e)}},variant:"contained",color:"primary",children:"Launch"})})})]})]}),(0,Z.jsx)(P,{setShowTrackId:S,assembly2:i,assembly1:h,setSessionTrackData:v,sessionTrackData:g,model:t})]})})]})}))},47500:(e,t,a)=>{a.d(t,{Z:()=>j});var s=a(31461),n=a(7896),o=a(41867),r=a(66184),i=a(19092),c=a(88498),l=a(92705),d=a(8380),u=a(35283),m=a(15453),h=a(80838);const p=["className","component","disableGutters","fixed","maxWidth","classes"],f=(0,m.Z)(),x=(0,u.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t["maxWidth".concat((0,i.Z)(String(a.maxWidth)))],a.fixed&&t.fixed,a.disableGutters&&t.disableGutters]}}),b=e=>(0,d.Z)({props:e,name:"MuiContainer",defaultTheme:f});var Z=a(9931),y=a(75693),g=a(90293);const v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=x,useThemeProps:a=b,componentName:d="MuiContainer"}=e,u=t((e=>{let{theme:t,ownerState:a}=e;return(0,n.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:a}=e;return a.fixed&&Object.keys(t.breakpoints.values).reduce(((e,a)=>{const s=a,n=t.breakpoints.values[s];return 0!==n&&(e[t.breakpoints.up(s)]={maxWidth:"".concat(n).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:a}=e;return(0,n.Z)({},"xs"===a.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},a.maxWidth&&"xs"!==a.maxWidth&&{[t.breakpoints.up(a.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[a.maxWidth]).concat(t.breakpoints.unit)}})})),m=o.forwardRef((function(e,t){const o=a(e),{className:m,component:f="div",disableGutters:x=!1,fixed:b=!1,maxWidth:Z="lg"}=o,y=(0,s.Z)(o,p),g=(0,n.Z)({},o,{component:f,disableGutters:x,fixed:b,maxWidth:Z}),v=((e,t)=>{const{classes:a,fixed:s,disableGutters:n,maxWidth:o}=e,r={root:["root",o&&"maxWidth".concat((0,i.Z)(String(o))),s&&"fixed",n&&"disableGutters"]};return(0,l.Z)(r,(e=>(0,c.Z)(t,e)),a)})(g,d);return(0,h.jsx)(u,(0,n.Z)({as:f,ownerState:g,className:(0,r.Z)(v.root,m),ref:t},y))}));return m}({createStyledComponent:(0,y.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t["maxWidth".concat((0,Z.Z)(String(a.maxWidth)))],a.fixed&&t.fixed,a.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,g.Z)({props:e,name:"MuiContainer"})}),j=v},23738:(e,t,a)=>{a.d(t,{Z:()=>A});var s=a(31461),n=a(7896),o=a(41867),r=a(66184),i=a(92705),c=a(71939),l=a(9886),d=a(90293),u=a(17886),m=a(80838);const h=(0,u.Z)((0,m.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),p=(0,u.Z)((0,m.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");var f=a(75693);const x=(0,f.ZP)("span",{shouldForwardProp:f.FO})({position:"relative",display:"flex"}),b=(0,f.ZP)(h)({transform:"scale(1)"}),Z=(0,f.ZP)(p)((e=>{let{theme:t,ownerState:a}=e;return(0,n.Z)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},a.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})}));const y=function(e){const{checked:t=!1,classes:a={},fontSize:s}=e,o=(0,n.Z)({},e,{checked:t});return(0,m.jsxs)(x,{className:a.root,ownerState:o,children:[(0,m.jsx)(b,{fontSize:s,className:a.background,ownerState:o}),(0,m.jsx)(Z,{fontSize:s,className:a.dot,ownerState:o})]})};var g=a(9931),v=a(46275),j=a(20326),S=a(33812);const k=["checked","checkedIcon","color","icon","name","onChange","size","className"],w=(0,f.ZP)(l.Z,{shouldForwardProp:e=>(0,f.FO)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,"medium"!==a.size&&t["size".concat((0,g.Z)(a.size))],t["color".concat((0,g.Z)(a.color))]]}})((e=>{let{theme:t,ownerState:a}=e;return(0,n.Z)({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===a.color?t.vars.palette.action.activeChannel:t.vars.palette[a.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,c.Fq)("default"===a.color?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==a.color&&{["&.".concat(S.Z.checked)]:{color:(t.vars||t).palette[a.color].main}},{["&.".concat(S.Z.disabled)]:{color:(t.vars||t).palette.action.disabled}})}));const C=(0,m.jsx)(y,{checked:!0}),P=(0,m.jsx)(y,{}),A=o.forwardRef((function(e,t){var a,c;const l=(0,d.Z)({props:e,name:"MuiRadio"}),{checked:u,checkedIcon:h=C,color:p="primary",icon:f=P,name:x,onChange:b,size:Z="medium",className:y}=l,A=(0,s.Z)(l,k),M=(0,n.Z)({},l,{color:p,size:Z}),L=(e=>{const{classes:t,color:a,size:s}=e,o={root:["root","color".concat((0,g.Z)(a)),"medium"!==s&&"size".concat((0,g.Z)(s))]};return(0,n.Z)({},t,(0,i.Z)(o,S.l,t))})(M),T=(0,j.Z)();let R=u;const z=(0,v.Z)(b,T&&T.onChange);let N=x;var W,F;return T&&("undefined"===typeof R&&(W=T.value,R="object"===typeof(F=l.value)&&null!==F?W===F:String(W)===String(F)),"undefined"===typeof N&&(N=T.name)),(0,m.jsx)(w,(0,n.Z)({type:"radio",icon:o.cloneElement(f,{fontSize:null!=(a=P.props.fontSize)?a:Z}),checkedIcon:o.cloneElement(h,{fontSize:null!=(c=C.props.fontSize)?c:Z}),ownerState:M,classes:L,name:N,checked:R,onChange:z,ref:t,className:(0,r.Z)(L.root,y)},A))}))},33812:(e,t,a)=>{a.d(t,{Z:()=>r,l:()=>o});var s=a(70101),n=a(88498);function o(e){return(0,n.Z)("MuiRadio",e)}const r=(0,s.Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"])},21126:(e,t,a)=>{a.d(t,{Z:()=>h});var s=a(7896),n=a(31461),o=a(41867),r=a(45489),i=a(40234),c=a(61291),l=a(27088),d=a(56619),u=a(80838);const m=["actions","children","defaultValue","name","onChange","value"],h=o.forwardRef((function(e,t){const{actions:a,children:h,defaultValue:p,name:f,onChange:x,value:b}=e,Z=(0,n.Z)(e,m),y=o.useRef(null),[g,v]=(0,c.Z)({controlled:b,default:p,name:"RadioGroup"});o.useImperativeHandle(a,(()=>({focus:()=>{let e=y.current.querySelector("input:not(:disabled):checked");e||(e=y.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const j=(0,i.Z)(t,y),S=(0,d.Z)(f),k=o.useMemo((()=>({name:S,onChange(e){v(e.target.value),x&&x(e,e.target.value)},value:g})),[S,x,v,g]);return(0,u.jsx)(l.Z.Provider,{value:k,children:(0,u.jsx)(r.Z,(0,s.Z)({role:"radiogroup",ref:j},Z,{children:h}))})}))},27088:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a(41867).createContext(void 0)},20326:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(41867),n=a(27088);function o(){return s.useContext(n.Z)}}}]);
//# sourceMappingURL=8156.5b8de9ed.chunk.js.map