"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[8238],{2363:(e,t,n)=>{n.d(t,{Z:()=>v});var o=n(41867),i=n(3762),r=n(90872),l=n(43800),s=n(98303),a=n(11233),d=n(80838);function c(e,t){const n=t?(0,s.I)(t):void 0;let o=e.get("start"),i=e.get("end");const r=e.get("strand"),l=e.get("mate"),a=e.get("refName");let d,c=0,u=0;if(["<TRA","<DEL","<INV","<INS","<DUP","<CNV"].some((e=>null===t||void 0===t?void 0:t.startsWith(e)))){var f,g,h,v,m;const t=(null===(f=e.get("INFO"))||void 0===f||null===(g=f.END)||void 0===g?void 0:g[0])||e.get("end");c=t,u=t-1,d=null!==(h=null===(v=e.get("INFO"))||void 0===v||null===(m=v.CHR2)||void 0===m?void 0:m[0])&&void 0!==h?h:a,o=e.get("start"),i=e.get("start")+1}else if(null!==n&&void 0!==n&&n.MatePosition){const e=n.MatePosition.split(":");c=+e[1],u=+e[1]-1,d=e[0]}return{k1:{refName:a,start:o,end:i,strand:r},k2:null!==l&&void 0!==l?l:{refName:d,end:c,start:u}}}const u=o.forwardRef((function(e,t){let{feature:n,alt:o}=e;const i=function(e,t){var n;const{k1:o,k2:i}=c(e,t);return[e.get("name"),e.get("id"),(0,r.assembleLocString)(o),(0,r.assembleLocString)(i),null===(n=e.get("INFO"))||void 0===n?void 0:n.SVTYPE,t].filter((e=>!!e)).join(" - ")}(n,o),l=20+(0,r.measureText)(i);return null!==t?(0,d.jsxs)(a.u,{triggerRef:t,children:[(0,d.jsx)("rect",{x:12,y:0,width:l,height:20,rx:5,ry:5,fill:"black",fillOpacity:"50%"}),(0,d.jsx)("text",{x:22,y:14,fontSize:10,fill:"white",textLength:l-20,children:i})]}):null})),f=(0,i.observer)((function(e){var t,n;let{model:i,feature:r,alt:s,assembly:a,view:f}=e;const[g,h]=(0,o.useState)(!1),{height:v}=i,{k1:m,k2:x}=c(r,s),b=(0,o.useRef)(null),j=(0,l.getConf)(i,"color",{feature:r,alt:s}),w=a.getCanonicalRefName(m.refName)||m.refName,N=a.getCanonicalRefName(x.refName)||x.refName,k=m.start,p=x.start,P=null===(t=f.bpToPx({refName:w,coord:k}))||void 0===t?void 0:t.offsetPx,y=null===(n=f.bpToPx({refName:N,coord:p}))||void 0===n?void 0:n.offsetPx;if(void 0!==P&&void 0!==y){const e=(y-P)/2,t=Math.abs(e),n=Math.min(v,t),o=P-f.offsetPx,l=y-f.offsetPx;return t>1?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M ".concat(o," 0 C ").concat(o," ").concat(n,", ").concat(l," ").concat(n,", ").concat(l," 0"),ref:b,stroke:g?"black":j,strokeWidth:3,onMouseOut:()=>h(!1),onMouseOver:()=>h(!0),onClick:()=>i.selectFeature(r),fill:"none",pointerEvents:"stroke"}),g?(0,d.jsx)(u,{feature:r,alt:s,ref:b}):null]}):null}return null})),g=(0,i.observer)((function(e){let{model:t,exportSVG:n,children:o}=e;const{height:i}=t,l=(0,r.getContainingView)(t),s=Math.round(l.dynamicBlocks.totalWidthPx);return n?(0,d.jsx)(d.Fragment,{children:o}):(0,d.jsx)("svg",{width:s,height:i,children:o})})),h=(0,i.observer)((function(e){let{model:t,exportSVG:n}=e;const o=(0,r.getContainingView)(t),i=(0,r.getSession)(t),{assemblyManager:l}=i,{features:s}=t,a=l.get(o.assemblyNames[0]);return a?(0,d.jsx)(g,{model:t,exportSVG:n,children:null===s||void 0===s?void 0:s.map((e=>{var n;const r=e.get("ALT");return null!==(n=null===r||void 0===r?void 0:r.map((n=>(0,d.jsx)(f,{session:i,feature:e,alt:n,view:o,model:t,assembly:a},e.id()+"-"+n))))&&void 0!==n?n:(0,d.jsx)(f,{session:i,feature:e,view:o,model:t,assembly:a},e.id())}))}):null})),v=h},68238:(e,t,n)=>{n.d(t,{renderArcSvg:()=>l});n(41867);var o=n(90872),i=n(2363),r=n(80838);async function l(e,t){await(0,o.when)((()=>!e.loading));const n=(0,o.getContainingView)(e).dynamicBlocks.totalWidthPx,l=e.height,s="arc-"+e.id;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:s,children:(0,r.jsx)("rect",{x:0,y:0,width:n,height:l})})}),(0,r.jsx)("g",{clipPath:"url(#".concat(s,")"),children:(0,r.jsx)(i.Z,{model:e,exportSVG:!0})})]})}}}]);
//# sourceMappingURL=8238.aaad99d2.chunk.js.map