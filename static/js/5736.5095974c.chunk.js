"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[5736],{15736:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var a=n(7552),l=n(99546),r=n(87083),i=n(36715),s=n(87731),o=n(95805),u=n(51762);function m({tag:e,model:t}){return a.createElement("div",null,a.createElement(i.A,null,"List of supplementary alignment locations"),a.createElement("ul",null,e.split(";").filter((e=>!!e)).map(((e,n)=>{const[l,r,i,m]=e.split(","),c=(0,o.getLengthOnRef)(m),f=Math.floor(c/5),p=+r,g=+r+c,d=p-f,y=g+f,w=`${l}:${Math.max(1,d)}-${y}`,v=`${l}:${p.toLocaleString("en-US")}-${g.toLocaleString("en-US")} (${i}) [${c}bp]`;return a.createElement("li",{key:`${w}-${n}`},a.createElement(s.A,{href:"#",onClick:async e=>{e.preventDefault(),(0,u.h)(w,t)}},v))}))))}var c=n(49823);const f=(0,a.lazy)((()=>n.e(5930).then(n.bind(n,45930)))),p=(0,a.lazy)((()=>n.e(457).then(n.bind(n,80457))));function g({model:e,feature:t,viewType:n}){const{view:r}=e,[s,u]=(0,a.useState)(),[m,f]=(0,a.useState)();(0,a.useEffect)((()=>{(async()=>{try{const e=await async function({view:e,feature:t}){const{assemblyManager:n}=(0,l.getSession)(e),a=t.get("CIGAR"),r=t.get("strand"),i=t.get("tags")?.SA||"",s=t.get("name"),u=(0,o.getClip)(a,1),m=await n.waitForAssembly(e.assemblyNames[0]);if(!m)throw new Error("assembly not found");const c=(0,o.featurizeSA)(i,t.id(),r,s,!0),f=t.toJSON();f.clipPos=u,f.strand=1,f.mate={refName:s,start:u,end:u+(0,o.getLengthSansClipping)(a)};const p=[f,...c];return p.forEach(((e,t)=>{e.refName=m.getCanonicalRefName(e.refName)||e.refName,e.syntenyId=t,e.mate.syntenyId=t,e.mate.uniqueId=`${e.uniqueId}_mate`})),p.sort(((e,t)=>e.clipPos-t.clipPos)),p}({view:r,feature:new l.SimpleFeature(t)});u(e)}catch(e){f(e),console.error(e)}})()}),[t,r]);const p=[];if(s)for(let e=0;e<s.length-1;e++)p.push([s[e],s[e+1]]);return p.length?a.createElement("div",null,a.createElement(i.A,null,"Launch split view"),m?a.createElement(c.ErrorMessage,{error:m}):null,a.createElement("ul",null,p.map(((t,r)=>{const[i,s]=t;return a.createElement("li",{key:`${JSON.stringify(t)}-${r}`},i.refName,":",(0,l.toLocale)(1===i.strand?i.end:i.start)," ->"," ",s.refName,":",(0,l.toLocale)(1===s.strand?s.start:s.end)," ",a.createElement(d,{model:e,f1:i,f2:s,viewType:n})," ",a.createElement(y,{model:e,f1:i,f2:s,viewType:n}))})))):null}function d({model:e,f1:t,f2:n,viewType:r}){return a.createElement(s.A,{href:"#",onClick:a=>{a.preventDefault(),(0,l.getSession)(e).queueDialog((a=>[f,{handleClose:a,model:e,feature:new l.SimpleFeature({...t,mate:n}),viewType:r,view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}]))}},"(top/bottom)")}function y({model:e,f1:t,f2:n,viewType:r}){return a.createElement(s.A,{href:"#",onClick:a=>{a.preventDefault(),(0,l.getSession)(e).queueDialog((a=>[p,{handleClose:a,model:e,feature:new l.SimpleFeature({...t,mate:n}),viewType:r,view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}]))}},"(single row)")}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},w.apply(null,arguments)}function v(e){const{model:t,tag:n,feature:i}=e,s=(0,l.getSession)(t),{pluginManager:o}=(0,l.getEnv)(s);let u;try{u=o.getViewType("BreakpointSplitView")}catch(e){}return a.createElement(r.default,w({},e,{title:"Supplementary alignments"}),a.createElement(m,{model:t,tag:n}),u?a.createElement(g,{viewType:u,model:t,feature:i}):null)}}}]);
//# sourceMappingURL=5736.5095974c.chunk.js.map