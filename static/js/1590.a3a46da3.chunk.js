"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1590],{11590:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(46377),i=s(99834),n=s(66885),r=s(6434),o=s(39763),c=s(68584);class u extends a.BaseSequenceAdapter{async initChromSizes(){const e=(0,c.readConfObject)(this.config,"chromSizesLocation");if("/path/to/default.chrom.sizes"!==e.uri&&""!==e.uri){const t=(0,i.openLocation)(e,this.pluginManager),s=await t.readFile("utf8");return Object.fromEntries(s.split(/\n|\r\n|\r/).filter((e=>!!e.trim())).map((e=>{const[t,s]=e.split("\t");return[t,+s]})))}}async setupPre(){return{twobit:new o.e({filehandle:(0,i.openLocation)(this.getConf("twoBitLocation"),this.pluginManager)}),chromSizesData:await this.initChromSizes()}}async setup(){return this.setupP||(this.setupP=this.setupPre().catch((e=>{throw this.setupP=void 0,e}))),this.setupP}async getRefNames(){const{chromSizesData:e,twobit:t}=await this.setup();return e?Object.keys(e):t.getSequenceNames()}async getRegions(){const{chromSizesData:e,twobit:t}=await this.setup();if(e)return Object.keys(e).map((t=>({refName:t,start:0,end:e[t]})));{const e=await t.getSequenceSizes();return Object.keys(e).map((t=>({refName:t,start:0,end:e[t]})))}}getFeatures({refName:e,start:t,end:s}){return(0,n.ObservableCreate)((async a=>{const{twobit:i}=await this.setup(),n=await i.getSequenceSize(e),o=void 0!==n?Math.min(n,s):s,c=await i.getSequence(e,t,o);c&&a.next(new r.A({id:`${e} ${t}-${o}`,data:{refName:e,start:t,end:o,seq:c}})),a.complete()}))}freeResources(){}}}}]);
//# sourceMappingURL=1590.a3a46da3.chunk.js.map