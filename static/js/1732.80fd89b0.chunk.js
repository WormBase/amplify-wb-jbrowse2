"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[1732],{71442:function(n,e,t){if(t.d(e,{Ac:function(){return i},N_:function(){return c}}),179==t.j)var o=t(68559);if(179==t.j)var r=t(40909);function i(n){return r.types.model({id:r.types.optional(r.types.identifier,(0,o.x0)()),name:r.types.string,margin:0}).volatile((function(){return{selection:void 0}})).views((function(n){return{get root(){return(0,r.getParent)(n)}}})).views((function(n){return{get jbrowse(){return n.root.jbrowse},get rpcManager(){return n.root.rpcManager},get configuration(){return this.jbrowse.configuration},get adminMode(){return n.root.adminMode},get textSearchManager(){return n.root.textSearchManager}}})).views((function(n){return{get assemblies(){return n.jbrowse.assemblies}}})).actions((function(n){return{setSelection:function(e){n.selection=e},clearSelection:function(){n.selection=void 0}}}))}function c(n){return"id"in n&&"name"in n&&"root"in n}},14129:function(n,e,t){if(t.d(e,{C:function(){return s},n:function(){return u}}),179==t.j)var o=t(41361);if(179==t.j)var r=t(33028);var i=t(9077);if(179==t.j)var c=t(40909);var a=t(71442);function s(n){return c.types.model({connectionInstances:c.types.array(n.pluggableMstType("connection","stateModel"))}).views((function(n){return{get connections(){return n.jbrowse.connections}}})).actions((function(e){return{makeConnection:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=t.type;if(!c)throw new Error("track configuration has no `type` listed");var a=(0,i.readConfObject)(t,"name");if(!n.getConnectionType(c))throw new Error("unknown connection type ".concat(c));var s=e.connectionInstances.push((0,r.Z)((0,r.Z)({},o),{},{name:a,type:c,configuration:t}));return e.connectionInstances[s-1]},prepareToBreakConnection:function(n){var t=this,r=e,c=[],a={},s=(0,i.readConfObject)(n,"name"),u=e.connectionInstances.find((function(n){return n.name===s}));if(u){var l,f=(0,o.Z)(u.tracks);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=r.getReferring(d);r.removeReferring(p,d,c,a)}}catch(g){f.e(g)}finally{f.f()}return[function(){c.forEach((function(n){return n()})),t.breakConnection(n)},a]}},breakConnection:function(n){var t=(0,i.readConfObject)(n,"name"),o=e.connectionInstances.find((function(n){return n.name===t}));if(!o)throw new Error("no connection found with name ".concat(t));e.connectionInstances.remove(o)},deleteConnection:function(n){return e.jbrowse.deleteConnectionConf(n)},addConnectionConf:function(n){return e.jbrowse.addConnectionConf(n)},clearConnections:function(){e.connectionInstances.clear()}}}))}function u(n){return(0,a.N_)(n)&&"connectionInstances"in n}},51732:function(n,e,t){t.r(e),t.d(e,{default:function(){return Z}});var o=t(96234),r=t(30969),i=t(60548),c=t(60059),a=t(26952),s=t(80160),u=t(72097),l=t(81073),f=t(53276),d=t(90550),p=t(79629),g=t(59767),m=t(37574),v=(0,d.observer)((function(n){var e=n.connectionType,t=n.model,o=n.session,i=e.configEditorComponent||p.wP;return(0,m.jsx)(r.Suspense,{fallback:(0,m.jsx)(g.LoadingEllipses,{}),children:(0,m.jsx)(i,{model:{target:t},session:o})})})),h=t(87006),C=t(94551),j=t(2689),b=t(16374),y=(0,d.observer)((function(n){var e=n.connectionTypeChoices,t=n.connectionType,o=n.setConnectionType,i=e[0];return(0,r.useEffect)((function(){t||o(i)}),[t,i,o]),(0,m.jsx)("form",{autoComplete:"off",children:t?(0,m.jsx)(h.Z,{value:t.name,label:"connectionType",helperText:t.description?(0,m.jsxs)(m.Fragment,{children:[t.description,t.url?(0,m.jsx)(C.Z,{href:t.url,rel:"noopener noreferrer",target:"_blank",children:(0,m.jsx)(b.Z,{})}):null]}):null,select:!0,fullWidth:!0,onChange:function(n){return o(e.find((function(e){return e.name===n.target.value})))},variant:"outlined",children:e.map((function(n){return(0,m.jsx)(j.Z,{value:n.name,children:n.displayName||n.name},n.name)}))}):null})})),w=t(14129),x=(0,f.ZL)()((function(n){return{root:{marginTop:n.spacing(1)},stepper:{backgroundColor:n.palette.background.default},button:{marginTop:n.spacing(1),marginRight:n.spacing(1)},actionsContainer:{marginBottom:n.spacing(2)}}})),k=["Select a Connection Type","Configure Connection"],Z=(0,d.observer)((function(n){var e=n.model,t=(0,r.useState)(),f=(0,o.Z)(t,2),d=f[0],p=f[1],g=(0,r.useState)(),h=(0,o.Z)(g,2),C=h[0],j=h[1],b=(0,r.useState)(0),Z=(0,o.Z)(b,2),T=Z[0],S=Z[1],N=x().classes,E=(0,l.getSession)(e),M=(0,l.getEnv)(E).pluginManager,I=(0,r.useMemo)((function(){return null===d||void 0===d?void 0:d.configSchema.create({connectionId:C},(0,l.getEnv)(e))}),[C,d,e]);return(0,m.jsx)("div",{className:N.root,children:(0,m.jsx)(i.Z,{className:N.stepper,activeStep:T,orientation:"vertical",children:k.map((function(n){return(0,m.jsxs)(c.Z,{children:[(0,m.jsx)(a.Z,{children:n}),(0,m.jsxs)(s.Z,{children:[0===T?(0,m.jsx)(y,{connectionTypeChoices:M.getConnectionElements(),connectionType:d,setConnectionType:function(n){p(n),n&&j("".concat(n.name,"-").concat(Date.now()))}}):d&&I?(0,m.jsx)(v,{connectionType:d,model:I,session:E}):null,(0,m.jsxs)("div",{className:N.actionsContainer,children:[(0,m.jsx)(u.Z,{disabled:0===T,onClick:function(){return S(T-1)},className:N.button,children:"Back"}),(0,m.jsx)(u.Z,{disabled:!(0===T&&d||1===T&&I),variant:"contained",color:"primary",onClick:function(){if(T===k.length-1){if(I&&(0,w.n)(E)){var n=E.addConnectionConf(I);E.makeConnection(n)}else E.notify("No config model to add");E.hideWidget(e)}else S(T+1)},className:N.button,"data-testid":"addConnectionNext",children:T===k.length-1?"Connect":"Next"})]})]})]},n)}))})})}))}}]);
//# sourceMappingURL=1732.80fd89b0.chunk.js.map