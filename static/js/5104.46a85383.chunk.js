"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[5104],{58041:function(e,t,r){var n=r(68079),a=(r(30969),r(90550)),i=r(81073),s=r(74426),o=r(94702),l=r(53276),c=r(37574),d=(0,l.ZL)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function u(e,t,r,a){if(e.flipped){var i=[a,r];r=i[0],a=i[1]}var s=e.bpToXY(r,t),o=e.bpToXY(a,t),l=Math.abs(a-r)/e.bpPerRadian>Math.PI?"1":"0";return["M"].concat((0,n.Z)(s),["A",t,t,"0",l,"1"],(0,n.Z)(o)).join(" ")}var h=(0,a.observer)((function(e){var t=e.model,r=e.slice,a=e.region,s=(0,o.Z)(),l=t.radiusPx+1,d=r.endRadians,u=r.startRadians,h=(0,i.polarToCartesian)(l,u),m=(0,i.polarToCartesian)(l,d),f=(d-u)*l,g=d-u>Math.PI?"1":"0",p=(d+u)/2,v="[".concat(Number(a.regions.length).toLocaleString(),"]");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x,{text:v,view:t,maxWidthPx:f,radians:p,radiusPx:l,title:"".concat(v," more regions"),color:s.palette.text.primary}),(0,c.jsx)("path",{d:["M"].concat((0,n.Z)(h),["A",l,l,"0",g,"1"],(0,n.Z)(m)).join(" "),stroke:s.palette.text.secondary,strokeWidth:2,strokeDasharray:"2,2",fill:"none"})]})})),x=(0,a.observer)((function(e){var t=e.view,r=e.text,n=e.maxWidthPx,a=e.radians,s=e.radiusPx,o=e.title,l=e.color,u=d().classes,h=(0,i.polarToCartesian)(s+5,a);return r?6.5*r.length<n?(0,c.jsxs)("text",{x:0,y:0,className:u.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:"translate(".concat(h,") rotate(").concat((0,i.radToDeg)(a)+90,")"),style:{fill:l},children:[r,(0,c.jsx)("title",{children:o||r})]}):n>4?(0,i.radToDeg)(a+t.offsetRadians-Math.PI/2)>=180?(0,c.jsxs)("text",{x:0,y:0,className:u.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:"translate(".concat(h,") rotate(").concat((0,i.radToDeg)(a),")"),style:{fill:l},children:[r,(0,c.jsx)("title",{children:o||r})]}):(0,c.jsxs)("text",{x:0,y:0,className:u.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:"translate(".concat(h,") rotate(").concat((0,i.radToDeg)(a)+180,")"),style:{fill:l},children:[r,(0,c.jsx)("title",{children:o||r})]}):null:null})),m=(0,a.observer)((function(e){var t,r=e.model,n=e.slice,a=e.region,l=(0,o.Z)(),d=r.radiusPx,h=n.endRadians,m=n.startRadians,f=(h+m)/2,g=(h-m)*d,p=(0,i.getSession)(r).assemblyManager.get(a.assemblyName);if(p&&(t=p.getRefNameColor(a.refName)),t)try{t=(0,s.makeContrasting)(t,l.palette.background.paper)}catch(v){t=l.palette.text.primary}else t=l.palette.text.primary;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x,{text:a.refName,view:r,maxWidthPx:g,radians:f,radiusPx:d,color:t}),(0,c.jsx)("path",{d:u(n,d+1,a.start,a.end),stroke:t,strokeWidth:2,fill:"none"})]})})),f=(0,a.observer)((function(e){var t=e.model,r=e.slice;return r.region.elided?(0,c.jsx)(h,{model:t,region:r.region,slice:r},(0,i.assembleLocString)(r.region.regions[0])):(0,c.jsx)(m,{region:r.region,model:t,slice:r},(0,i.assembleLocString)(r.region))}));t.Z=f},5104:function(e,t,r){r.r(t),r.d(t,{renderToSvg:function(){return p}});var n=r(32723),a=r(33028),i=r(34795),s=r(30969),o=r(75844),l=r(2082),c=r(90689),d=r(81073),u=r(59767),h=r(94702),x=r(37574);function m(e){var t=e.width,r=e.height,n=e.shift,a=(0,h.Z)();return(0,x.jsx)("rect",{width:t+2*n,height:r,fill:(0,d.stripAlpha)(a.palette.background.default)})}var f,g=r(58041);function p(e,t){return(f=f||(0,i.Z)((0,n.Z)().mark((function e(t,r){var h,f,p,v,w,b,j,y,Z,k,P,T,S,N,L,R,C;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.when)((function(){return t.initialized}));case 2:return p=r.themeName,v=void 0===p?"default":p,w=r.Wrapper,b=void 0===w?function(e){var t=e.children;return(0,x.jsx)(x.Fragment,{children:t})}:w,j=(0,d.getSession)(t),y=null===(h=j.allThemes)||void 0===h?void 0:h.call(j)[v],Z=t.width,k=t.tracks,P=t.height,T=50,e.next=9,Promise.all(k.map((function(e){return(f=f||(0,i.Z)((0,n.Z)().mark((function e(t){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.displays[0],e.next=3,(0,c.when)((function(){return void 0===i.ready||i.ready}));case 3:return e.t0=t,e.next=6,i.renderSvg((0,a.Z)((0,a.Z)({},r),{},{theme:y}));case 6:return e.t1=e.sent,e.abrupt("return",{track:e.t0,result:e.t1});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)})));case 9:return S=e.sent,N=t.staticSlices,L=t.offsetRadians,R=t.centerXY,C=(0,d.radToDeg)(L),e.abrupt("return",(0,l.uS)((0,x.jsx)(o.Z,{theme:(0,u.createJBrowseTheme)(y),children:(0,x.jsx)(b,{children:(0,x.jsxs)("svg",{width:Z,height:P,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,Z+2*T,P].toString(),children:[(0,x.jsx)(m,{width:Z,height:P,shift:T}),(0,x.jsxs)("g",{transform:"translate(".concat(R,") rotate(").concat(C,")"),children:[N.map((function(e,r){return(0,x.jsx)(g.Z,{model:t,slice:e},r)})),S.map((function(e,t){var r=e.result;return(0,x.jsx)(s.Fragment,{children:r},t)}))]})]})})})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=5104.46a85383.chunk.js.map