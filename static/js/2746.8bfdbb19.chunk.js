"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[2746],{52746:(e,t,o)=>{o.r(t),o.d(t,{default:()=>j});var n=o(41867),a=o(47409),s=o(51590),r=o(90552),c=o(98484),l=o(21126),i=o(96614),d=o(23738),u=o(49133),h=o(27768),f=o(23801),m=o(47192),p=o(40753),v=o(3762),Z=o(35421),g=o(90872),x=o(43800),C=o(83713),k=o(80838);const b=(0,m.ZL)()({root:{width:"80em"},textAreaFont:{fontFamily:"Courier New"}});const j=(0,v.observer)((function(e){let{model:t,handleClose:o}=e;const m=t.saveTrackFileFormatOptions(),{classes:v}=b(),[j,w]=(0,n.useState)(),[S,y]=(0,n.useState)(),[z,R]=(0,n.useState)(Object.keys(m)[0]),[F,M]=(0,n.useState)("");(0,n.useEffect)((()=>{(async()=>{try{const e=(0,g.getContainingView)(t);w(void 0),y(await async function(e,t,o){const{rpcManager:n}=(0,g.getSession)(e),a=(0,x.getConf)(e,["adapter"]),s="getFeatures";return n.call(s,"CoreGetFeatures",{adapterConfig:a,regions:t,sessionId:s,signal:o})}(t,e.visibleRegions||[]))}catch(e){console.error(e),w(e)}})()}),[t]),(0,n.useEffect)((()=>{(async()=>{try{const{visibleRegions:e}=(0,g.getContainingView)(t),o=(0,g.getSession)(t);if(!S||!e)return;const n=m[z]||{callback:()=>"Unknown"};M(await n.callback({features:S,session:o,assemblyName:e[0].assemblyName}))}catch(e){w(e)}})()}),[z,S,m,t]);const N=!S;return(0,k.jsxs)(Z.Dialog,{maxWidth:"xl",open:!0,onClose:o,title:"Save track data",children:[(0,k.jsxs)(a.Z,{className:v.root,children:[j?(0,k.jsx)(Z.ErrorMessage,{error:j}):null,S&&!S.length?(0,k.jsx)(s.Z,{children:"No features found"}):null,(0,k.jsxs)(r.Z,{children:[(0,k.jsx)(c.Z,{children:"File type"}),(0,k.jsx)(l.Z,{value:z,onChange:e=>R(e.target.value),children:Object.entries(m).map((e=>{let[t,o]=e;return(0,k.jsx)(i.Z,{value:t,control:(0,k.jsx)(d.Z,{}),label:o.name},t)}))})]}),(0,k.jsx)(u.Z,{variant:"outlined",multiline:!0,minRows:5,maxRows:15,fullWidth:!0,value:N?"Loading...":F.length>1e5?'Too large to view here, click "Download" to results to file':F,InputProps:{readOnly:!0,classes:{input:v.textAreaFont}}})]}),(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(f.Z,{onClick:()=>{const e=m[z].extension,t=new Blob([F],{type:"text/plain;charset=utf-8"});(0,p.saveAs)(t,"jbrowse_track_data.".concat(e))},startIcon:(0,k.jsx)(C.Z,{}),children:"Download"}),(0,k.jsx)(f.Z,{variant:"contained",type:"submit",onClick:()=>o(),children:"Close"})]})]})}))},83713:(e,t,o)=>{var n=o(71600);t.Z=void 0;var a=n(o(80337)),s=o(80838),r=(0,a.default)((0,s.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"GetApp");t.Z=r},23738:(e,t,o)=>{o.d(t,{Z:()=>R});var n=o(31461),a=o(7896),s=o(41867),r=o(66184),c=o(92705),l=o(71939),i=o(9886),d=o(90293),u=o(17886),h=o(80838);const f=(0,u.Z)((0,h.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),m=(0,u.Z)((0,h.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");var p=o(75693);const v=(0,p.ZP)("span",{shouldForwardProp:p.FO})({position:"relative",display:"flex"}),Z=(0,p.ZP)(f)({transform:"scale(1)"}),g=(0,p.ZP)(m)((e=>{let{theme:t,ownerState:o}=e;return(0,a.Z)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},o.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})}));const x=function(e){const{checked:t=!1,classes:o={},fontSize:n}=e,s=(0,a.Z)({},e,{checked:t});return(0,h.jsxs)(v,{className:o.root,ownerState:s,children:[(0,h.jsx)(Z,{fontSize:n,className:o.background,ownerState:s}),(0,h.jsx)(g,{fontSize:n,className:o.dot,ownerState:s})]})};var C=o(9931),k=o(46275),b=o(20326),j=o(33812);const w=["checked","checkedIcon","color","icon","name","onChange","size","className"],S=(0,p.ZP)(i.Z,{shouldForwardProp:e=>(0,p.FO)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,"medium"!==o.size&&t["size".concat((0,C.Z)(o.size))],t["color".concat((0,C.Z)(o.color))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,a.Z)({color:(t.vars||t).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===o.color?t.vars.palette.action.activeChannel:t.vars.palette[o.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.Fq)("default"===o.color?t.palette.action.active:t.palette[o.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==o.color&&{["&.".concat(j.Z.checked)]:{color:(t.vars||t).palette[o.color].main}},{["&.".concat(j.Z.disabled)]:{color:(t.vars||t).palette.action.disabled}})}));const y=(0,h.jsx)(x,{checked:!0}),z=(0,h.jsx)(x,{}),R=s.forwardRef((function(e,t){var o,l;const i=(0,d.Z)({props:e,name:"MuiRadio"}),{checked:u,checkedIcon:f=y,color:m="primary",icon:p=z,name:v,onChange:Z,size:g="medium",className:x}=i,R=(0,n.Z)(i,w),F=(0,a.Z)({},i,{color:m,size:g}),M=(e=>{const{classes:t,color:o,size:n}=e,s={root:["root","color".concat((0,C.Z)(o)),"medium"!==n&&"size".concat((0,C.Z)(n))]};return(0,a.Z)({},t,(0,c.Z)(s,j.l,t))})(F),N=(0,b.Z)();let O=u;const P=(0,k.Z)(Z,N&&N.onChange);let I=v;var _,E;return N&&("undefined"===typeof O&&(_=N.value,O="object"===typeof(E=i.value)&&null!==E?_===E:String(_)===String(E)),"undefined"===typeof I&&(I=N.name)),(0,h.jsx)(S,(0,a.Z)({type:"radio",icon:s.cloneElement(p,{fontSize:null!=(o=z.props.fontSize)?o:g}),checkedIcon:s.cloneElement(f,{fontSize:null!=(l=y.props.fontSize)?l:g}),ownerState:F,classes:M,name:I,checked:O,onChange:P,ref:t,className:(0,r.Z)(M.root,x)},R))}))},33812:(e,t,o)=>{o.d(t,{Z:()=>r,l:()=>s});var n=o(70101),a=o(88498);function s(e){return(0,a.Z)("MuiRadio",e)}const r=(0,n.Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"])},21126:(e,t,o)=>{o.d(t,{Z:()=>f});var n=o(7896),a=o(31461),s=o(41867),r=o(45489),c=o(40234),l=o(61291),i=o(27088),d=o(56619),u=o(80838);const h=["actions","children","defaultValue","name","onChange","value"],f=s.forwardRef((function(e,t){const{actions:o,children:f,defaultValue:m,name:p,onChange:v,value:Z}=e,g=(0,a.Z)(e,h),x=s.useRef(null),[C,k]=(0,l.Z)({controlled:Z,default:m,name:"RadioGroup"});s.useImperativeHandle(o,(()=>({focus:()=>{let e=x.current.querySelector("input:not(:disabled):checked");e||(e=x.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const b=(0,c.Z)(t,x),j=(0,d.Z)(p),w=s.useMemo((()=>({name:j,onChange(e){k(e.target.value),v&&v(e,e.target.value)},value:C})),[j,v,k,C]);return(0,u.jsx)(i.Z.Provider,{value:w,children:(0,u.jsx)(r.Z,(0,n.Z)({role:"radiogroup",ref:b},g,{children:f}))})}))},27088:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(41867).createContext(void 0)},20326:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(41867),a=o(27088);function s(){return n.useContext(a.Z)}}}]);
//# sourceMappingURL=2746.8bfdbb19.chunk.js.map