"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[2986,2291],{52291:(e,o,t)=>{t.r(o),t.d(o,{ColorPicker:()=>Y,ColorPopover:()=>X,PopoverPicker:()=>A,default:()=>U});var r=t(41867),n=t(622),a=t(64980),c=t(36669),l=t(59231),s=t(49133),i=t(47192),u=t(39092),d=t(90872);function h(){return(h=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function f(e,o){if(null==e)return{};var t,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o.indexOf(t=a[r])>=0||(n[t]=e[t]);return n}function p(e){const o=(0,r.useRef)(e),t=(0,r.useRef)((e=>{o.current&&o.current(e)}));return o.current=e,t.current}const v=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e>t?t:e<o?o:e},g=e=>"touches"in e,m=e=>e&&e.ownerDocument.defaultView||self,b=(e,o,t)=>{const r=e.getBoundingClientRect(),n=g(o)?((e,o)=>{for(let t=0;t<e.length;t++)if(e[t].identifier===o)return e[t];return e[0]})(o.touches,t):o;return{left:v((n.pageX-(r.left+m(e).pageXOffset))/r.width),top:v((n.pageY-(r.top+m(e).pageYOffset))/r.height)}},x=e=>{!g(e)&&e.preventDefault()},C=r.memo((e=>{let{onMove:o,onKey:t}=e,n=f(e,["onMove","onKey"]);const a=(0,r.useRef)(null),c=p(o),l=p(t),s=(0,r.useRef)(null),i=(0,r.useRef)(!1),[u,d,v]=(0,r.useMemo)((()=>{const e=e=>{x(e),(g(e)?e.touches.length>0:e.buttons>0)&&a.current?c(b(a.current,e,s.current)):t(!1)},o=()=>t(!1);function t(t){const r=i.current,n=m(a.current),c=t?n.addEventListener:n.removeEventListener;c(r?"touchmove":"mousemove",e),c(r?"touchend":"mouseup",o)}return[e=>{let{nativeEvent:o}=e;const r=a.current;if(r&&(x(o),!((e,o)=>o&&!g(e))(o,i.current)&&r)){if(g(o)){i.current=!0;const e=o.changedTouches||[];e.length&&(s.current=e[0].identifier)}r.focus(),c(b(r,o,s.current)),t(!0)}},e=>{const o=e.which||e.keyCode;o<37||o>40||(e.preventDefault(),l({left:39===o?.05:37===o?-.05:0,top:40===o?.05:38===o?-.05:0}))},t]}),[l,c]);return(0,r.useEffect)((()=>v),[v]),r.createElement("div",h({},n,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:a,onKeyDown:d,tabIndex:0,role:"slider"}))})),_=e=>e.filter(Boolean).join(" "),k=e=>{let{className:o,color:t,left:n,top:a=.5}=e;const c=_(["react-colorful__pointer",o]);return r.createElement("div",{className:c,style:{top:100*a+"%",left:100*n+"%"}},r.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},j=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(10,o);return Math.round(t*e)/t},w=(Math.PI,e=>{let{h:o,s:t,v:r,a:n}=e;const a=(200-t)*r/100;return{h:j(o),s:j(a>0&&a<200?t*r/100/(a<=100?a:200-a)*100:0),l:j(a/2),a:j(n,2)}}),Z=e=>{const{h:o,s:t,l:r}=w(e);return"hsl(".concat(o,", ").concat(t,"%, ").concat(r,"%)")},y=e=>{const{h:o,s:t,l:r,a:n}=w(e);return"hsla(".concat(o,", ").concat(t,"%, ").concat(r,"%, ").concat(n,")")},N=e=>{let{h:o,s:t,v:r,a:n}=e;o=o/360*6,t/=100,r/=100;const a=Math.floor(o),c=r*(1-t),l=r*(1-(o-a)*t),s=r*(1-(1-o+a)*t),i=a%6;return{r:j(255*[r,l,c,c,s,r][i]),g:j(255*[s,r,r,l,c,c][i]),b:j(255*[c,c,s,r,r,l][i]),a:j(n,2)}},E=e=>{const o=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return o?S({r:Number(o[1])/(o[2]?100/255:1),g:Number(o[3])/(o[4]?100/255:1),b:Number(o[5])/(o[6]?100/255:1),a:void 0===o[7]?1:Number(o[7])/(o[8]?100:1)}):{h:0,s:0,v:0,a:1}},S=e=>{let{r:o,g:t,b:r,a:n}=e;const a=Math.max(o,t,r),c=a-Math.min(o,t,r),l=c?a===o?(t-r)/c:a===t?2+(r-o)/c:4+(o-t)/c:0;return{h:j(60*(l<0?l+6:l)),s:j(a?c/a*100:0),v:j(a/255*100),a:n}},M=r.memo((e=>{let{className:o,hue:t,onChange:n}=e;const a=_(["react-colorful__hue",o]);return r.createElement("div",{className:a},r.createElement(C,{onMove:e=>{n({h:360*e.left})},onKey:e=>{n({h:v(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":j(t)},r.createElement(k,{className:"react-colorful__hue-pointer",left:t/360,color:Z({h:t,s:100,v:100,a:1})})))})),z=r.memo((e=>{let{hsva:o,onChange:t}=e;const n={backgroundColor:Z({h:o.h,s:100,v:100,a:1})};return r.createElement("div",{className:"react-colorful__saturation",style:n},r.createElement(C,{onMove:e=>{t({s:100*e.left,v:100-100*e.top})},onKey:e=>{t({s:v(o.s+100*e.left,0,100),v:v(o.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation ".concat(j(o.s),"%, Brightness ").concat(j(o.v),"%")},r.createElement(k,{className:"react-colorful__saturation-pointer",top:1-o.v/100,left:o.s/100,color:Z(o)})))})),P=(e,o)=>{if(e===o)return!0;for(const t in e)if(e[t]!==o[t])return!1;return!0},R=(e,o)=>e.replace(/\s/g,"")===o.replace(/\s/g,"");function O(e,o,t){const n=p(t),[a,c]=(0,r.useState)((()=>e.toHsva(o))),l=(0,r.useRef)({color:o,hsva:a});(0,r.useEffect)((()=>{if(!e.equal(o,l.current.color)){const t=e.toHsva(o);l.current={hsva:t,color:o},c(t)}}),[o,e]),(0,r.useEffect)((()=>{let o;P(a,l.current.hsva)||e.equal(o=e.fromHsva(a),l.current.color)||(l.current={hsva:a,color:o},n(o))}),[a,e,n]);const s=(0,r.useCallback)((e=>{c((o=>Object.assign({},o,e)))}),[]);return[a,s]}const H="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;let D;const F=new Map,I=e=>{H((()=>{const o=e.current?e.current.ownerDocument:document;if(void 0!==o&&!F.has(o)){const e=o.createElement("style");e.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',F.set(o,e);const r=D||t.nc;r&&e.setAttribute("nonce",r),o.head.appendChild(e)}}),[])},K=e=>{let{className:o,hsva:t,onChange:n}=e;const a={backgroundImage:"linear-gradient(90deg, ".concat(y(Object.assign({},t,{a:0})),", ").concat(y(Object.assign({},t,{a:1})),")")},c=_(["react-colorful__alpha",o]);return r.createElement("div",{className:c},r.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),r.createElement(C,{onMove:e=>{n({a:e.left})},onKey:e=>{n({a:v(t.a+e.left)})},"aria-label":"Alpha","aria-valuetext":"".concat(j(100*t.a),"%")},r.createElement(k,{className:"react-colorful__alpha-pointer",left:t.a,color:y(t)})))},L=e=>{let{className:o,colorModel:t,color:n=t.defaultColor,onChange:a}=e,c=f(e,["className","colorModel","color","onChange"]);const l=(0,r.useRef)(null);I(l);const[s,i]=O(t,n,a),u=_(["react-colorful",o]);return r.createElement("div",h({},c,{ref:l,className:u}),r.createElement(z,{hsva:s,onChange:i}),r.createElement(M,{hue:s.h,onChange:i}),r.createElement(K,{hsva:s,onChange:i,className:"react-colorful__last-control"}))},B={defaultColor:"rgba(0, 0, 0, 1)",toHsva:E,fromHsva:e=>{const{r:o,g:t,b:r,a:n}=N(e);return"rgba(".concat(o,", ").concat(t,", ").concat(r,", ").concat(n,")")},equal:R},T=e=>r.createElement(L,h({},e,{colorModel:B}));var q=t(80838);const V=(0,i.ZL)()({picker:{position:"relative"},swatches:{display:"flex",padding:12,flexWrap:"wrap"},swatch:{width:24,height:24,margin:4,border:"none",padding:0,cursor:"pointer",outline:"none"}}),A=e=>{let{color:o,onChange:t}=e;const[n,a]=(0,r.useState)(null),{classes:c}=V();return(0,q.jsxs)("div",{className:c.picker,children:[(0,q.jsx)("div",{className:c.swatch,style:{backgroundColor:o},onClick:e=>a(e.currentTarget)}),(0,q.jsx)(X,{anchorEl:n,onClose:()=>a(null),color:o,onChange:t})]})};function X(e){let{anchorEl:o,onChange:t,onClose:r,color:n}=e;return(0,q.jsx)(a.ZP,{open:!!o,anchorEl:o,onClose:r,children:(0,q.jsx)(Y,{color:n,onChange:t})})}function Y(e){let{onChange:o,color:t}=e;const{classes:a}=V(),[i,h]=(0,d.useLocalStorage)("colorPickerPalette","set1"),f=u[i],p=Object.keys(u),[v,g]=(0,r.useState)(t),m=(0,n.V)(t).toRgbString(),b=(0,d.useDebounce)(m,1e3),x=e=>{g(e);try{o((0,n.V)(e).toRgbString())}catch(t){}};return(0,q.jsxs)("div",{style:{display:"flex",padding:10},children:[(0,q.jsx)("div",{style:{width:200,margin:5},children:(0,q.jsx)(T,{color:b,onChange:x})}),(0,q.jsxs)("div",{style:{width:200,margin:5},children:[(0,q.jsx)(c.Z,{value:i,onChange:e=>{const o=e.target.value;h(o)},children:p.map((e=>(0,q.jsx)(l.Z,{value:e,children:e},e)))}),(0,q.jsx)("div",{className:a.swatches,children:f.map(((e,o)=>(0,q.jsx)("button",{className:a.swatch,style:{background:e},onClick:()=>x(e)},"".concat(e,"-").concat(o))))}),(0,q.jsx)(s.Z,{helperText:"Manually set color (hex, rgb, or css color name)",value:v,onChange:e=>x(e.target.value)})]})]})}const U=A},32986:(e,o,t)=>{t.r(o),t.d(o,{default:()=>p});var r=t(41867),n=t(3762),a=t(47409),c=t(51590),l=t(96614),s=t(23738),i=t(27768),u=t(23801),d=t(35421),h=t(52291),f=t(80838);const p=(0,n.observer)((function(e){let{model:o,handleClose:t}=e;const[n,p]=(0,r.useState)(!1);return(0,f.jsxs)(d.Dialog,{open:!0,onClose:t,title:"Set color",children:[(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(c.Z,{children:"Select either an overall color, or the positive/negative colors. Note that density renderers only work properly with positive/negative colors"}),(0,f.jsx)(l.Z,{checked:!n,onClick:()=>p(!1),control:(0,f.jsx)(s.Z,{}),label:"Overall color"}),(0,f.jsx)(l.Z,{checked:n,onClick:()=>p(!0),control:(0,f.jsx)(s.Z,{}),label:"Positive/negative color"}),n?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Z,{children:"Positive color"}),(0,f.jsx)(h.ColorPicker,{color:o.posColor||"black",onChange:e=>{o.setPosColor(e),o.setColor(void 0)}}),(0,f.jsx)(c.Z,{children:"Negative color"}),(0,f.jsx)(h.ColorPicker,{color:o.negColor||"black",onChange:e=>{o.setNegColor(e),o.setColor(void 0)}})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Z,{children:"Overall color"}),(0,f.jsx)(h.ColorPicker,{color:o.color||"black",onChange:e=>o.setColor(e)})]})]}),(0,f.jsxs)(i.Z,{children:[(0,f.jsx)(u.Z,{onClick:()=>{o.setPosColor(void 0),o.setNegColor(void 0),o.setColor(void 0)},color:"secondary",variant:"contained",children:"Restore default"}),(0,f.jsx)(u.Z,{variant:"contained",color:"primary",type:"submit",onClick:()=>t(),children:"Submit"})]})]})}))},23738:(e,o,t)=>{t.d(o,{Z:()=>E});var r=t(31461),n=t(7896),a=t(41867),c=t(66184),l=t(92705),s=t(71939),i=t(9886),u=t(90293),d=t(17886),h=t(80838);const f=(0,d.Z)((0,h.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),p=(0,d.Z)((0,h.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");var v=t(75693);const g=(0,v.ZP)("span",{shouldForwardProp:v.FO})({position:"relative",display:"flex"}),m=(0,v.ZP)(f)({transform:"scale(1)"}),b=(0,v.ZP)(p)((e=>{let{theme:o,ownerState:t}=e;return(0,n.Z)({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})})}));const x=function(e){const{checked:o=!1,classes:t={},fontSize:r}=e,a=(0,n.Z)({},e,{checked:o});return(0,h.jsxs)(g,{className:t.root,ownerState:a,children:[(0,h.jsx)(m,{fontSize:r,className:t.background,ownerState:a}),(0,h.jsx)(b,{fontSize:r,className:t.dot,ownerState:a})]})};var C=t(9931),_=t(46275),k=t(20326),j=t(33812);const w=["checked","checkedIcon","color","icon","name","onChange","size","className"],Z=(0,v.ZP)(i.Z,{shouldForwardProp:e=>(0,v.FO)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,"medium"!==t.size&&o["size".concat((0,C.Z)(t.size))],o["color".concat((0,C.Z)(t.color))]]}})((e=>{let{theme:o,ownerState:t}=e;return(0,n.Z)({color:(o.vars||o).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:o.vars?"rgba(".concat("default"===t.color?o.vars.palette.action.activeChannel:o.vars.palette[t.color].mainChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,s.Fq)("default"===t.color?o.palette.action.active:o.palette[t.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{["&.".concat(j.Z.checked)]:{color:(o.vars||o).palette[t.color].main}},{["&.".concat(j.Z.disabled)]:{color:(o.vars||o).palette.action.disabled}})}));const y=(0,h.jsx)(x,{checked:!0}),N=(0,h.jsx)(x,{}),E=a.forwardRef((function(e,o){var t,s;const i=(0,u.Z)({props:e,name:"MuiRadio"}),{checked:d,checkedIcon:f=y,color:p="primary",icon:v=N,name:g,onChange:m,size:b="medium",className:x}=i,E=(0,r.Z)(i,w),S=(0,n.Z)({},i,{color:p,size:b}),M=(e=>{const{classes:o,color:t,size:r}=e,a={root:["root","color".concat((0,C.Z)(t)),"medium"!==r&&"size".concat((0,C.Z)(r))]};return(0,n.Z)({},o,(0,l.Z)(a,j.l,o))})(S),z=(0,k.Z)();let P=d;const R=(0,_.Z)(m,z&&z.onChange);let O=g;return z&&("undefined"===typeof P&&(P=function(e,o){return"object"===typeof o&&null!==o?e===o:String(e)===String(o)}(z.value,i.value)),"undefined"===typeof O&&(O=z.name)),(0,h.jsx)(Z,(0,n.Z)({type:"radio",icon:a.cloneElement(v,{fontSize:null!=(t=N.props.fontSize)?t:b}),checkedIcon:a.cloneElement(f,{fontSize:null!=(s=y.props.fontSize)?s:b}),ownerState:S,classes:M,name:O,checked:P,onChange:R,ref:o,className:(0,c.Z)(M.root,x)},E))}))},33812:(e,o,t)=>{t.d(o,{Z:()=>c,l:()=>a});var r=t(70101),n=t(88498);function a(e){return(0,n.Z)("MuiRadio",e)}const c=(0,r.Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"])},27088:(e,o,t)=>{t.d(o,{Z:()=>r});const r=t(41867).createContext(void 0)},20326:(e,o,t)=>{t.d(o,{Z:()=>a});var r=t(41867),n=t(27088);function a(){return r.useContext(n.Z)}}}]);
//# sourceMappingURL=2986.ab47a361.chunk.js.map