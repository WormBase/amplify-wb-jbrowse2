/*! For license information please see 4926.eb581699.chunk.js.LICENSE.txt */
(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[4926],{34926:function(e,r,t){"use strict";t.r(r),t.d(r,{createFinalConfig:function(){return J},fetchConfigFile:function(){return q},fetchJb1:function(){return A},parseJb1:function(){return Z}});var n,o,a,s,i=t(32723),c=t(56666),u=t(34795),f=t(33528),l=t(33028),p=t(96234),d=t(68079),h=t(7382),v=t.n(h),y=t(72339),w=t.n(y),b=t(81073);function g(e){return(null===e||void 0===e?void 0:e.label)&&"string"===typeof e.label}function m(e,r){for(var t=0,n=Object.keys(r);t<n.length;t++){var o=n[t];o in e&&"object"===typeof r[o]&&"object"===typeof e[o]?m(e[o],r[o]):void 0!==e[o]&&void 0===r[o]||(e[o]=r[o])}return e}function S(e){if(!e||"object"!==typeof e||"[object Function]"===Object.prototype.toString.call(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var r,t,n;if(Array.isArray(e))for(r=[],t=0,n=e.length;t<n;++t)t in e&&(r[t]=S(e[t]));else r=e.constructor?new e.constructor:{};return function(e,r,t){var n,o,a={};for(n in r)o=r[n],n in e&&(e[n]===o||n in a&&a[n]===o)||(e[n]=t?t(o):o);return e}(r,e,S)}function k(e,r){var t;try{t=function(e,r){var t,n,o,a,s=[],i={tracks:{}};function c(){var e;if(void 0!==o)try{var c=o.match(/^json:(.+)/i);if(e=c?JSON.parse(c[1]):/^[+-]?[\d.,]+([eE][-+]?\d+)?$/.test(o)?parseFloat(o.replaceAll(",","")):o,!t)throw new Error("Error parsing in section ".concat(s.join(" - ")));var u=[].concat((0,d.Z)(s),(0,d.Z)(t)).join(".");if("+="===n){var f=v()(i,u);f?Array.isArray(f)||(f=[f]):f=[],f.push(e),e=f}"true"===e&&(e=!0),"false"===e&&(e=!1),w()(i,u,e)}catch(l){throw new Error("syntax error".concat(r?" in ".concat(r):"").concat(a?" at line ".concat(a-1):""))}}return e.split(/\n|\r\n|\r/).forEach((function(e,r){a=r+1;var i,u=e.replace(/^\s*#.+/,"");if(i=u.match(/^\s*\[([^\]]+)/))c(),t=void 0,o=void 0,1===(s=i[1].trim().split(/\s*\.\s*/)).length&&"general"===s[0].toLowerCase()&&(s=[]);else if(i=u.match(void 0===o?/^([^+=]+)(\+?=)(.*)/:/^(\S[^+=]+)(\+?=)(.*)/)){c(),t=i[1].trim().split(/\s*\.\s*/);var f=i,l=(0,p.Z)(f,3);n=l[2],function(e){if("include"===e)return!0;return!1}([].concat((0,d.Z)(s),(0,d.Z)(t)).join("."))&&(n="+="),o=i[3].trim()}else void 0!==t&&(i=u.match(/^\s{0,4}\+\s*(.+)/))?(c(),n="+=",o=i[1].trim()):void 0!==o&&(i=u.match(/^\s+(\S.*)/))?o+=o.length?" ".concat(i[1].trim()):i[1].trim():(c(),t=void 0,o=void 0)})),c(),i}(e,r)}catch(n){throw new Error("".concat(n," when parsing configuration."))}return j(t,r)}function j(e,r){if(e.tracks&&!Array.isArray(e.tracks))if(g(e.tracks))e.tracks=[e.tracks];else{for(var t=[],n=0,o=Object.keys(e.tracks);n<o.length;n++){var a=o[n],s=e.tracks[a];g(s)?t.push(s):t.push((0,l.Z)({label:a},s))}e.tracks=t}var i,c=e.trackMetadata;if(null!==c&&void 0!==c&&c.sources){if("string"===typeof c.sources&&(c.sources=[c.sources]),(null===(i=c.sources)||void 0===i?void 0:i.url)&&"string"===typeof i.url&&(c.sources=[c.sources]),!Array.isArray(c.sources)){for(var u=[],f=0,p=Object.keys(c.sources);f<p.length;f++){var h=p[f],v=c.sources[h];"name"in v||(v.name=h),u.push(v)}c.sources=u}c.sources=c.sources.map((function(e){if("string"===typeof e){var r={url:e},t=e.match(/\.(\w+)$/);return t&&(r.type=t[1].toLowerCase()),r}return e}))}if(e.sourceUrl=e.sourceUrl||r,e.sourceUrl.startsWith("/")&&(e.sourceUrl=new URL(e.sourceUrl,window.location.href).href),e.baseUrl=e.baseUrl||new URL(".",e.sourceUrl).href,e.baseUrl.length&&!e.baseUrl.endsWith("/")&&(e.baseUrl+="/"),e.sourceUrl){var y=[];e.tracks&&y.push.apply(y,(0,d.Z)(e.tracks)),e.stores&&y.push.apply(y,(0,d.Z)(Object.values(e.stores))),e.names&&y.push(e.names),y.forEach((function(r){r.baseUrl||(r.baseUrl=e.baseUrl||"/")})),e.refSeqs&&"string"===typeof e.refSeqs&&(e.refSeqs=new URL(e.refSeqs,e.sourceUrl).href),e.nameUrl&&(e.nameUrl=new URL(e.nameUrl,e.sourceUrl).href)}return e.stores=e.stores||{},(e.tracks||[]).forEach((function(r){if(r.config){var t=r.config;delete r.config,r=(0,l.Z)((0,l.Z)({},t),r)}var n;r.store||(n="FeatureTrack"===r.type?"JBrowse/View/Track/HTMLFeatures":"ImageTrack"===r.type?"JBrowse/View/Track/FixedImage":"ImageTrack.Wiggle"===r.type?"JBrowse/View/Track/FixedImage/Wiggle":"SequenceTrack"===r.type?"JBrowse/View/Track/Sequence":x("JBrowse/View/Track",r.type),r.type=n,B(e,r),r.histograms&&(r.histograms.baseUrl||(r.histograms.baseUrl=r.baseUrl),B(e,r.histograms)))})),e}function x(e,r){return r?(r.includes("/")||(r="".concat(e,"/").concat(r)),r=r.replace(/^\//,"")):""}function B(e,r){var t,n=r.urlTemplate,o=void 0===n?"":n,a=r.storeClass?x("JBrowse/Store",r.storeClass):function(e,r){return e?e.type&&e.type.includes("/FixedImage")?"JBrowse/Store/TiledImage/Fixed".concat(0===e.backendVersion?"_v0":""):/\.jsonz?$/i.test(r)?"JBrowse/Store/SeqFeature/NCList".concat(0===e.backendVersion?"_v0":""):/\.bam$/i.test(r)?"JBrowse/Store/SeqFeature/BAM":/\.cram$/i.test(r)?"JBrowse/Store/SeqFeature/CRAM":/\.gff3?$/i.test(r)?"JBrowse/Store/SeqFeature/GFF3":/\.bed$/i.test(r)?"JBrowse/Store/SeqFeature/BED":/\.vcf.b?gz$/i.test(r)?"JBrowse/Store/SeqFeature/VCFTabix":/\.gff3?.b?gz$/i.test(r)?"JBrowse/Store/SeqFeature/GFF3Tabix":/\.bed.b?gz$/i.test(r)?"JBrowse/Store/SeqFeature/BEDTabix":/\.(bw|bigwig)$/i.test(r)?"JBrowse/Store/SeqFeature/BigWig":/\.(bb|bigbed)$/i.test(r)?"JBrowse/Store/SeqFeature/BigBed":/\.(fa|fasta)$/i.test(r)?"JBrowse/Store/SeqFeature/IndexedFasta":/\.(fa|fasta)\.b?gz$/i.test(r)?"JBrowse/Store/SeqFeature/BgzipIndexedFasta":/\.2bit$/i.test(r)?"JBrowse/Store/SeqFeature/TwoBit":e.type&&e.type.endsWith("/Sequence")?"JBrowse/Store/Sequence/StaticChunked":"":""}(r,o);if(a){var s=(0,l.Z)((0,l.Z)({},r),{},{type:a});s.name="JBrowse/Store/Sequence/StaticChunked"!==a&&"JBrowse/Store/Sequence/IndexedFasta"!==a&&"JBrowse/Store/SeqFeature/IndexedFasta"!==a&&"JBrowse/Store/SeqFeature/BgzipIndexedFasta"!==a&&"JBrowse/Store/SeqFeature/TwoBit"!==a&&"JBrowse/Store/Sequence/TwoBit"!==a&&!r.useAsRefSeqStore||null!==(t=e.stores)&&void 0!==t&&t.refseqs?"store".concat((0,b.objectHash)(s)):"refseqs",e.stores||(e.stores={}),e.stores[s.name]=s,r.store=s.name}else console.warn("Unable to determine an appropriate data store to use with track '".concat(r.label,"', please explicitly specify a storeClass in the configuration."))}function U(e){return void 0!==e.uri}function F(e){return void 0!==e.localPath}function A(){return(n=n||(0,u.Z)((0,i.Z)().mark((function e(){var r,t,n,o,a,s,u,f,l,p,d,h,v,y,w=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.length>1&&void 0!==w[1]?w[1]:{include:["{dataRoot}/trackList.json","{dataRoot}/tracks.conf"]},n=w.length>2&&void 0!==w[2]?w[2]:{uri:"",locationType:"UriLocation"},o="uri"in(r=w.length>0&&void 0!==w[0]?w[0]:{uri:"",locationType:"UriLocation"})?"uri":"localPath",a=JSON.parse(JSON.stringify(r)),s="",U(r)&&(s=r.uri),F(r)&&(s=r.localPath),s.endsWith("/")&&(a[o]=s.slice(0,-1)),!(U(n)&&n.uri||F(n)&&n.localPath)){e.next=35;break}u="uri"in n?"uri":"localPath",f="",U(n)&&(f=n.uri),F(n)&&(f=n.localPath),f.endsWith("/")&&(f=f.slice(0,-1)),l={},p=0,d=["jbrowse.conf","jbrowse_conf.json"];case 17:if(!(p<d.length)){e.next=33;break}return h=d[p],v=null,e.prev=20,e.next=23,q((0,c.Z)({},u,"".concat(f,"/").concat(h)));case 23:v=e.sent,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(20),console.error("tried to access ".concat(f,"/").concat(h,", but failed"));case 29:l=E(l,v)||{};case 30:p++,e.next=17;break;case 33:return a[o]&&(l.dataRoot=a[o]),e.abrupt("return",J(l));case 35:return y=j(t,window.location.href),a[o]&&(y.dataRoot=a[o]),e.abrupt("return",J(y));case 38:case"end":return e.stop()}}),e,null,[[20,26]])})))).apply(this,arguments)}function J(e){return(o=o||(0,u.Z)((0,i.Z)().mark((function e(r){var t,n,o=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m(S(o.length>1&&void 0!==o[1]?o[1]:L),r),e.next=4,_(t);case 4:return O(n=E(n=e.sent,r)||n,n),C(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return(a=a||(0,u.Z)((0,i.Z)().mark((function e(r){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.openLocation)(r).readFile("utf8");case 2:if(t=e.sent,!U(r)){e.next=5;break}return e.abrupt("return",Z(t,r.uri));case 5:if(!F(r)){e.next=7;break}return e.abrupt("return",Z(t,r.localPath));case 7:return e.abrupt("return",Z(t));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.trim().startsWith("{")?function(e,r){if("string"===typeof e){var t;try{t=JSON.parse(e)}catch(n){throw new Error("".concat(n," when parsing configuration."))}return j(t,r)}return j(e,r)}(e,r):k(e,r)}function E(e,r){if(null===r)return null;null===e&&(e={});for(var t=0,n=Object.keys(r);t<n.length;t++){var o=n[t];if("tracks"===o&&o in e){var a=e[o]||[],s=r[o]||[];if(!Array.isArray(a)||!Array.isArray(s))throw new Error("Track config has not been properly regularized: ".concat(a," ").concat(s));e[o]=T(a||[],s||[])}else"datasets"!==o&&o in e&&"object"===typeof r[o]&&"object"===typeof e[o]?e[o]=m(e[o],r[o]):"dataRoot"===o?(void 0===e[o]||"data"===e[o]&&void 0!==r[o])&&(e[o]=r[o]):void 0!==e[o]&&void 0===r[o]||(e[o]=r[o])}return e}function T(e,r){if(!r.length)return e;var t={};return e.forEach((function(e,r){e.index=r,t[e.label]=e})),r.forEach((function(r){var n=t[r.label];n?E(n,r):e.push(r)})),e}function _(e){return(s=s||(0,u.Z)((0,i.Z)().mark((function e(r){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e,o){return(t=t||(0,u.Z)((0,i.Z)().mark((function e(t,o){var a,s,c,f,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.sourceUrl||t.baseUrl){e.next=3;break}throw new Error("Could not determine source URL: ".concat(JSON.stringify(t)));case 3:if(c=E(S(o),t)){e.next=6;break}throw new Error("Problem merging configs");case 6:return f=O(R(t.include||[]),c),delete t.include,l=f.map((function(e){return(a=a||(0,u.Z)((0,i.Z)().mark((function e(t){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.cacheBuster=r.cacheBuster,e.next=3,q({uri:new URL(t.url,s).href,locationType:"UriLocation"});case 3:return o=e.sent,e.abrupt("return",n(o,c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)})),e.next=11,Promise.all(l);case 11:return e.sent.forEach((function(e){t=E(t,e)||t})),e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)},r=S(r),e.abrupt("return",n(r,{}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return e?(Array.isArray(e)||(e=[e]),e.map((function(e){return"string"===typeof e&&(e={url:e}),"format"in e||(e.format=e.url.endsWith(".conf")?"conf":"JB_json"),"JB_json"!==e.format||"version"in e||(e.version=1),e}))):[]}function O(e,r){if(!e)return e;if(Array.isArray(e))for(var t=0;t<e.length;t+=1)e[t]=O(e[t],r);else if("object"===typeof e)for(var n=e,o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];n[s]=O(n[s],r)}else if("string"===typeof e)return function(e,r){var t=this;return e.replaceAll(/{([\s\w.]+)}/g,(function(e,n){n=n.replaceAll(/\s+/g,"");var o=v()(r,n);if(void 0!==o)return"function"===typeof o?o(n):o;if(r.callback){var a=r.callback.call(t,n);if(void 0!==a)return a}return e}))}(e,r);return e}var L={tracks:[],containerID:"GenomeBrowser",dataRoot:"data",show_tracklist:!0,show_nav:!0,show_menu:!0,show_overview:!0,show_fullviewlink:!0,update_browser_title:!0,updateBrowserURL:!0,refSeqs:"{dataRoot}/seq/refSeqs.json",include:["jbrowse.conf","jbrowse_conf.json"],nameUrl:"{dataRoot}/names/root.json",datasets:{_DEFAULT_EXAMPLES:!0,volvox:{url:"?data=sample_data/json/volvox",name:"Volvox Example"},modencode:{url:"?data=sample_data/json/modencode",name:"MODEncode Example"},yeast:{url:"?data=sample_data/json/yeast",name:"Yeast Example"}},highlightSearchedRegions:!1,highResolutionMode:"auto"};function C(e){if(e.tracks||(e.tracks=[]),!e.baseUrl)throw new Error("Must provide a `baseUrl` in configuration")}},7382:function(e,r,t){var n=t(2917);function o(e,r,t){return"function"===typeof t.join?t.join(e):e[0]+r+e[1]}function a(e,r,t){return"function"!==typeof t.isValid||t.isValid(e,r)}function s(e){return n(e)||Array.isArray(e)||"function"===typeof e}e.exports=function(e,r,t){if(n(t)||(t={default:t}),!s(e))return"undefined"!==typeof t.default?t.default:e;"number"===typeof r&&(r=String(r));var i=Array.isArray(r),c="string"===typeof r,u=t.separator||".",f=t.joinChar||("string"===typeof u?u:".");if(!c&&!i)return e;if(c&&r in e)return a(r,e,t)?e[r]:t.default;var l=i?r:function(e,r,t){if("function"===typeof t.split)return t.split(e);return e.split(r)}(r,u,t),p=l.length,d=0;do{var h=l[d];for("number"===typeof h&&(h=String(h));h&&"\\"===h.slice(-1);)h=o([h.slice(0,-1),l[++d]||""],f,t);if(h in e){if(!a(h,e,t))return t.default;e=e[h]}else{for(var v=!1,y=d+1;y<p;)if(v=(h=o([h,l[y++]],f,t))in e){if(!a(h,e,t))return t.default;e=e[h],d=y-1;break}if(!v)return t.default}}while(++d<p&&s(e));return d===p?e:t.default}},68531:function(e){"use strict";e.exports=function(e){return"object"===typeof e?null===e:"function"!==typeof e}},2917:function(e){"use strict";e.exports=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)}},72339:function(e,r,t){"use strict";var n=Reflect.deleteProperty,o=t(68531),a=t(64687),s=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},i=function(e){if(!o(e))throw new TypeError("Object keys must be strings or symbols");if(function(e){return"__proto__"===e||"constructor"===e||"prototype"===e}(e))throw new Error('Cannot set unsafe key: "'.concat(e,'"'))},c=function(e,r,t){var n=function(e){return Array.isArray(e)?e.flat().map(String).join(","):e}(r?function(e,r){if("string"!==typeof e||!r)return e;var t=e+";";return void 0!==r.arrays&&(t+="arrays=".concat(r.arrays,";")),void 0!==r.separator&&(t+="separator=".concat(r.separator,";")),void 0!==r.split&&(t+="split=".concat(r.split,";")),void 0!==r.merge&&(t+="merge=".concat(r.merge,";")),void 0!==r.preservePaths&&(t+="preservePaths=".concat(r.preservePaths,";")),t}(e,r):e);i(n);var o=l.cache.get(n)||t();return l.cache.set(n,o),o},u=function(e,r){return r&&"function"===typeof r.split?r.split(e):"symbol"===typeof e?[e]:Array.isArray(e)?e:c(e,r,(function(){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.separator||".",n="/"!==t&&r.preservePaths;if("string"===typeof e&&!1!==n&&/\//.test(e))return[e];for(var o=[],a="",s=function(e){var r;""!==e.trim()&&Number.isInteger(r=Number(e))?o.push(r):o.push(e)},i=0;i<e.length;i++){var c=e[i];"\\"!==c?c!==t?a+=c:(s(a),a=""):a+=e[++i]}return a&&s(a),o}(e,r)}))},f=function(e,r,t,o){if(i(r),void 0===t)n(e,r);else if(o&&o.merge){var s="function"===o.merge?o.merge:Object.assign;s&&a(e[r])&&a(t)?e[r]=s(e[r],t):e[r]=t}else e[r]=t;return e},l=function(e,r,t,n){if(!r||!s(e))return e;for(var o=u(r,n),a=e,c=0;c<o.length;c++){var l=o[c],p=o[c+1];if(i(l),void 0===p){f(a,l,t,n);break}"number"!==typeof p||Array.isArray(a[l])?(s(a[l])||(a[l]={}),a=a[l]):a=a[l]=[]}return e};l.split=u,l.cache=new Map,l.clear=function(){l.cache=new Map},e.exports=l},64687:function(e,r,t){"use strict";var n=t(2917);function o(e){return!0===n(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var r,t;return!1!==o(e)&&("function"===typeof(r=e.constructor)&&(!1!==o(t=r.prototype)&&!1!==t.hasOwnProperty("isPrototypeOf")))}}}]);
//# sourceMappingURL=4926.eb581699.chunk.js.map