"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[1007],{67765:(e,t,r)=>{r.d(t,{UL:()=>m,WK:()=>f,i1:()=>g,u_:()=>x});r(41867);var n=r(47192),i=r(3762),o=r(31625),s=r(90872),l=r(56726),a=r(17280),c=r(63008),d=r(80838);const h=(0,n.ZL)()((()=>({vtext:{gridColumn:"1/2",gridRow:"1/2",pointerEvents:"none",userSelect:"none"},htext:{gridColumn:"2/2",gridRow:"2/2",pointerEvents:"none",userSelect:"none"}}))),x=(0,i.observer)((function(e){let{model:t}=e;const{viewWidth:r,borderY:n}=t,{classes:i}=h();return(0,d.jsx)("svg",{width:r,height:n,className:i.htext,children:(0,d.jsx)(f,{model:t})})})),f=(0,i.observer)((function(e){let{model:t}=e;const{viewWidth:r,borderX:n,borderY:i,hview:h,htextRotation:x,hticks:f}=t,{offsetPx:m,width:g,dynamicBlocks:p,bpPerPx:u}=h,y=p.contentBlocks,w=(0,c.F$)(y,r,m),v=(0,a.Z)(),j={...(0,o.getSnapshot)(h),width:g,staticBlocks:h.staticBlocks},k=f.map((e=>{var t;return[e,null===(t=(0,l.R)({refName:e.refName,coord:e.base,self:j}))||void 0===t?void 0:t.offsetPx]})).filter((e=>void 0!==e[1])).map((e=>[e[0],e[1]-m]));return(0,d.jsxs)(d.Fragment,{children:[y.filter((e=>!w.has(e.key))).map((e=>{const t=e.offsetPx,r=Math.floor(t-h.offsetPx);return(0,d.jsx)("text",{transform:"rotate(".concat(x,",").concat(r,",").concat(0,")"),x:r,y:1,fill:v.palette.text.primary,fontSize:11,dominantBaseline:"hanging",textAnchor:"end",children:e.refName},JSON.stringify(e))})),k.map((e=>{let[t,r]=e;return(0,d.jsx)("line",{x1:r,x2:r,y1:0,y2:"major"===t.type?6:4,strokeWidth:1,stroke:v.palette.grey[400]},"line-".concat(JSON.stringify(t)))})),k.filter((e=>"major"===e[0].type)).map((e=>{let[t,r]=e;return r>10?(0,d.jsx)("text",{x:r-7,y:0,transform:"rotate(".concat(x,",").concat(r,",").concat(0,")"),fill:v.palette.text.primary,fontSize:11,dominantBaseline:"middle",textAnchor:"end",children:(0,s.getTickDisplayStr)(t.base+1,u)},"text-".concat(JSON.stringify(t))):null})),(0,d.jsx)("text",{y:i-12,x:(r-n)/2,fill:v.palette.text.primary,textAnchor:"middle",fontSize:11,dominantBaseline:"hanging",children:h.assemblyNames.join(",")})]})})),m=(0,i.observer)((function(e){let{model:t}=e;const{borderX:r,viewHeight:n}=t,{classes:i}=h();return(0,d.jsx)("svg",{className:i.vtext,width:r,height:n,children:(0,d.jsx)(g,{model:t})})})),g=(0,i.observer)((function(e){let{model:t}=e;const{viewHeight:r,borderX:n,borderY:i,vview:h,vtextRotation:x,vticks:f}=t,{offsetPx:m,width:g,dynamicBlocks:p,bpPerPx:u}=h,y=p.contentBlocks,w=(0,c.F$)(y,r,m),v=(0,a.Z)(),j={...(0,o.getSnapshot)(h),width:g,staticBlocks:h.staticBlocks},k=f.map((e=>{var t;return[e,null===(t=(0,l.R)({refName:e.refName,coord:e.base,self:j}))||void 0===t?void 0:t.offsetPx]})).filter((e=>void 0!==e[1])).map((e=>[e[0],e[1]-m]));return(0,d.jsxs)(d.Fragment,{children:[y.filter((e=>!w.has(e.key))).map((e=>{const t=e.offsetPx,i=n,o=Math.floor(r-t+m);return(0,d.jsx)("text",{transform:"rotate(".concat(x,",").concat(i,",").concat(t,")"),x:i,y:o,fill:v.palette.text.primary,fontSize:11,textAnchor:"end",children:e.refName},JSON.stringify(e))})),k.map((e=>{let[t,i]=e;return(0,d.jsx)("line",{y1:r-i,y2:r-i,x1:n,x2:n-("major"===t.type?6:4),strokeWidth:1,stroke:v.palette.grey[400]},"line-".concat(JSON.stringify(t)))})),k.filter((e=>"major"===e[0].type)).map((e=>{let[t,i]=e;return i>10?(0,d.jsx)("text",{y:r-i-3,x:n-7,textAnchor:"end",fill:v.palette.text.primary,dominantBaseline:"hanging",fontSize:11,children:(0,s.getTickDisplayStr)(t.base+1,u)},"text-".concat(JSON.stringify(t))):null})),(0,d.jsx)("text",{y:(r-i)/2,x:12,fill:v.palette.text.primary,transform:"rotate(-90,12,".concat((r-i)/2,")"),textAnchor:"middle",fontSize:11,children:h.assemblyNames.join(",")})]})}))},90903:(e,t,r)=>{r.d(t,{B:()=>s,Z:()=>l});r(41867);var n=r(3762),i=r(17280),o=r(80838);const s=(0,n.observer)((function(e){let{model:t,children:r}=e;const{viewWidth:n,viewHeight:s,hview:l,vview:a}=t,c=l.dynamicBlocks.contentBlocks,d=a.dynamicBlocks.contentBlocks;if(!c.length||!d.length)return null;const h=l.displayedRegionsTotalPx-l.offsetPx,x=a.displayedRegionsTotalPx-a.offsetPx,f=c[0].offsetPx-l.offsetPx,m=d[0].offsetPx-a.offsetPx,g=(0,i.Z)(),p=g.palette.divider,u=Math.max(f,0),y=Math.max(s-x,0),w=Math.min(h-f,n),v=Math.min(s-m-y,s);let j=1/0,k=1/0;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{x:u,y:y,width:w,height:v,fill:g.palette.background.default}),(0,o.jsxs)("g",{children:[c.map((e=>{const t=e.offsetPx-l.offsetPx,r=Math.floor(t)!==Math.floor(j);return r&&(j=t),r?(0,o.jsx)("line",{x1:t,y1:0,x2:t,y2:s,stroke:p},JSON.stringify(e)):null})),d.map((e=>{const t=s-(e.offsetPx-a.offsetPx),r=Math.floor(t)!==Math.floor(k);return r&&(k=t),r?(0,o.jsx)("line",{x1:0,y1:t,x2:n,y2:t,stroke:p},JSON.stringify(e)):null})),(0,o.jsx)("line",{x1:h,y1:0,x2:h,y2:s,stroke:p}),(0,o.jsx)("line",{x1:0,y1:s-x,x2:n,y2:s-x,stroke:p})]}),r]})}));function l(e){let{model:t,children:r}=e;const{viewWidth:n,viewHeight:i}=t;return(0,o.jsx)("svg",{width:n,height:i,style:{background:"rgba(0,0,0,0.12)"},children:(0,o.jsx)(s,{model:t,children:r})})}},41007:(e,t,r)=>{r.d(t,{renderToSvg:()=>f});r(41867);var n=r(49665),i=r(85815),o=r(90872),s=r(81096),l=r(35421),a=r(90903),c=r(67765),d=r(17280),h=r(80838);function x(e){let{width:t,height:r}=e;const n=(0,d.Z)();return(0,h.jsx)("rect",{x:0,y:0,width:t,height:r,fill:(0,o.stripAlpha)(n.palette.background.default)})}async function f(e,t){var r;await(0,i.when)((()=>e.initialized));const{themeName:d="default",Wrapper:f=(e=>{let{children:t}=e;return(0,h.jsx)(h.Fragment,{children:t})})}=t,m=(0,o.getSession)(e),g=null===(r=m.allThemes)||void 0===r?void 0:r.call(m)[d],{width:p,borderX:u,viewWidth:y,viewHeight:w,tracks:v,height:j}=e,k=await Promise.all(v.map((async e=>{const r=e.displays[0];return await(0,i.when)((()=>void 0===r.ready||r.ready)),{track:e,result:await r.renderSvg({...t,theme:g})}}))),b=p+100;return(0,n.uS)((0,h.jsx)(s.Z,{theme:(0,l.createJBrowseTheme)(g),children:(0,h.jsx)(f,{children:(0,h.jsxs)("svg",{width:p,height:j,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,b,j].toString(),children:[(0,h.jsx)(x,{width:b,height:j}),(0,h.jsx)(c.i1,{model:e}),(0,h.jsxs)("g",{transform:"translate(".concat(u," 0)"),children:[(0,h.jsx)(a.B,{model:e}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip-ruler",children:(0,h.jsx)("rect",{x:0,y:0,width:y,height:w})})}),(0,h.jsx)("g",{clipPath:"url(#clip-ruler)",children:k.map(((e,t)=>{let{result:r}=e;return(0,h.jsx)("g",{children:r},t)}))})]}),(0,h.jsx)("g",{transform:"translate(".concat(u," ").concat(w,")"),children:(0,h.jsx)(c.WK,{model:e})})]})})}))}}}]);
//# sourceMappingURL=1007.0744d282.chunk.js.map