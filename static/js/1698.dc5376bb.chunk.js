"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[1698],{81839:function(t,e,n){n.d(e,{UL:function(){return v},WK:function(){return m},i1:function(){return p},u_:function(){return x}});var r=n(96234),i=n(33028),o=(n(30969),n(53276)),a=n(90550),s=n(40909),c=n(81073),l=n(68554),f=n(94702),u=n(59594),d=n(37574),h=(0,o.ZL)()((function(){return{vtext:{gridColumn:"1/2",gridRow:"1/2",pointerEvents:"none",userSelect:"none"},htext:{gridColumn:"2/2",gridRow:"2/2",pointerEvents:"none",userSelect:"none"}}})),x=(0,a.observer)((function(t){var e=t.model,n=e.viewWidth,r=e.borderY,i=h().classes;return(0,d.jsx)("svg",{width:n,height:r,className:i.htext,children:(0,d.jsx)(m,{model:e})})})),m=(0,a.observer)((function(t){var e=t.model,n=e.viewWidth,o=e.borderX,a=e.borderY,h=e.hview,x=e.htextRotation,m=e.hticks,v=h.offsetPx,p=h.width,g=h.dynamicBlocks,y=h.bpPerPx,w=g.contentBlocks,j=(0,u.F$)(w,n,v),k=(0,f.Z)(),b=(0,i.Z)((0,i.Z)({},(0,s.getSnapshot)(h)),{},{width:p,staticBlocks:h.staticBlocks}),P=m.map((function(t){var e;return[t,null===(e=(0,l.R)({refName:t.refName,coord:t.base,self:b}))||void 0===e?void 0:e.offsetPx]})).filter((function(t){return void 0!==t[1]})).map((function(t){return[t[0],t[1]-v]}));return(0,d.jsxs)(d.Fragment,{children:[w.filter((function(t){return!j.has(t.key)})).map((function(t){var e=t.offsetPx,n=Math.floor(e-h.offsetPx);return(0,d.jsx)("text",{transform:"rotate(".concat(x,",").concat(n,",").concat(0,")"),x:n,y:1,fill:k.palette.text.primary,fontSize:11,dominantBaseline:"hanging",textAnchor:"end",children:t.refName},JSON.stringify(t))})),P.map((function(t){var e=(0,r.Z)(t,2),n=e[0],i=e[1];return(0,d.jsx)("line",{x1:i,x2:i,y1:0,y2:"major"===n.type?6:4,strokeWidth:1,stroke:k.palette.grey[400]},"line-".concat(JSON.stringify(n)))})),P.filter((function(t){return"major"===t[0].type})).map((function(t){var e=(0,r.Z)(t,2),n=e[0],i=e[1];return i>10?(0,d.jsx)("text",{x:i-7,y:0,transform:"rotate(".concat(x,",").concat(i,",").concat(0,")"),fill:k.palette.text.primary,fontSize:11,dominantBaseline:"middle",textAnchor:"end",children:(0,c.getTickDisplayStr)(n.base+1,y)},"text-".concat(JSON.stringify(n))):null})),(0,d.jsx)("text",{y:a-12,x:(n-o)/2,fill:k.palette.text.primary,textAnchor:"middle",fontSize:11,dominantBaseline:"hanging",children:h.assemblyNames.join(",")})]})})),v=(0,a.observer)((function(t){var e=t.model,n=e.borderX,r=e.viewHeight,i=h().classes;return(0,d.jsx)("svg",{className:i.vtext,width:n,height:r,children:(0,d.jsx)(p,{model:e})})})),p=(0,a.observer)((function(t){var e=t.model,n=e.viewHeight,o=e.borderX,a=e.borderY,h=e.vview,x=e.vtextRotation,m=e.vticks,v=h.offsetPx,p=h.width,g=h.dynamicBlocks,y=h.bpPerPx,w=g.contentBlocks,j=(0,u.F$)(w,n,v),k=(0,f.Z)(),b=(0,i.Z)((0,i.Z)({},(0,s.getSnapshot)(h)),{},{width:p,staticBlocks:h.staticBlocks}),P=m.map((function(t){var e;return[t,null===(e=(0,l.R)({refName:t.refName,coord:t.base,self:b}))||void 0===e?void 0:e.offsetPx]})).filter((function(t){return void 0!==t[1]})).map((function(t){return[t[0],t[1]-v]}));return(0,d.jsxs)(d.Fragment,{children:[w.filter((function(t){return!j.has(t.key)})).map((function(t){var e=t.offsetPx,r=o,i=Math.floor(n-e+v);return(0,d.jsx)("text",{transform:"rotate(".concat(x,",").concat(r,",").concat(e,")"),x:r,y:i,fill:k.palette.text.primary,fontSize:11,textAnchor:"end",children:t.refName},JSON.stringify(t))})),P.map((function(t){var e=(0,r.Z)(t,2),i=e[0],a=e[1];return(0,d.jsx)("line",{y1:n-a,y2:n-a,x1:o,x2:o-("major"===i.type?6:4),strokeWidth:1,stroke:k.palette.grey[400]},"line-".concat(JSON.stringify(i)))})),P.filter((function(t){return"major"===t[0].type})).map((function(t){var e=(0,r.Z)(t,2),i=e[0],a=e[1];return a>10?(0,d.jsx)("text",{y:n-a-3,x:o-7,textAnchor:"end",fill:k.palette.text.primary,dominantBaseline:"hanging",fontSize:11,children:(0,c.getTickDisplayStr)(i.base+1,y)},"text-".concat(JSON.stringify(i))):null})),(0,d.jsx)("text",{y:(n-a)/2,x:12,fill:k.palette.text.primary,transform:"rotate(-90,12,".concat((n-a)/2,")"),textAnchor:"middle",fontSize:11,children:h.assemblyNames.join(",")})]})}))},3754:function(t,e,n){n.d(e,{B:function(){return a},Z:function(){return s}});n(30969);var r=n(90550),i=n(94702),o=n(37574),a=(0,r.observer)((function(t){var e=t.model,n=t.children,r=e.viewWidth,a=e.viewHeight,s=e.hview,c=e.vview,l=s.dynamicBlocks.contentBlocks,f=c.dynamicBlocks.contentBlocks;if(!l.length||!f.length)return null;var u=s.displayedRegionsTotalPx-s.offsetPx,d=c.displayedRegionsTotalPx-c.offsetPx,h=l[0].offsetPx-s.offsetPx,x=f[0].offsetPx-c.offsetPx,m=(0,i.Z)(),v=m.palette.divider,p=Math.max(h,0),g=Math.max(a-d,0),y=Math.min(u-h,r),w=Math.min(a-x-g,a),j=1/0,k=1/0;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{x:p,y:g,width:y,height:w,fill:m.palette.background.default}),(0,o.jsxs)("g",{children:[l.map((function(t){var e=t.offsetPx-s.offsetPx,n=Math.floor(e)!==Math.floor(j);return n&&(j=e),n?(0,o.jsx)("line",{x1:e,y1:0,x2:e,y2:a,stroke:v},JSON.stringify(t)):null})),f.map((function(t){var e=a-(t.offsetPx-c.offsetPx),n=Math.floor(e)!==Math.floor(k);return n&&(k=e),n?(0,o.jsx)("line",{x1:0,y1:e,x2:r,y2:e,stroke:v},JSON.stringify(t)):null})),(0,o.jsx)("line",{x1:u,y1:0,x2:u,y2:a,stroke:v}),(0,o.jsx)("line",{x1:0,y1:a-d,x2:r,y2:a-d,stroke:v})]}),n]})}));function s(t){var e=t.model,n=t.children,r=e.viewWidth,i=e.viewHeight;return(0,o.jsx)("svg",{width:r,height:i,style:{background:"rgba(0,0,0,0.12)"},children:(0,o.jsx)(a,{model:e,children:n})})}},81698:function(t,e,n){n.r(e),n.d(e,{renderToSvg:function(){return p}});var r,i=n(32723),o=n(33028),a=n(34795),s=(n(30969),n(2082)),c=n(90689),l=n(81073),f=n(75844),u=n(59767),d=n(3754),h=n(81839),x=n(94702),m=n(37574);function v(t){var e=t.width,n=t.height,r=(0,x.Z)();return(0,m.jsx)("rect",{x:0,y:0,width:e,height:n,fill:(0,l.stripAlpha)(r.palette.background.default)})}function p(t,e){return(r=r||(0,a.Z)((0,i.Z)().mark((function t(e,n){var r,x,p,g,y,w,j,k,b,P,S,Z,B,N,M,W,J;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.when)((function(){return e.initialized}));case 2:return p=n.themeName,g=void 0===p?"default":p,y=n.Wrapper,w=void 0===y?function(t){var e=t.children;return(0,m.jsx)(m.Fragment,{children:e})}:y,j=(0,l.getSession)(e),k=null===(r=j.allThemes)||void 0===r?void 0:r.call(j)[g],b=e.width,P=e.borderX,S=e.viewWidth,Z=e.viewHeight,B=e.tracks,N=e.height,M=50,t.next=9,Promise.all(B.map((function(t){return(x=x||(0,a.Z)((0,i.Z)().mark((function t(e){var r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.displays[0],t.next=3,(0,c.when)((function(){return void 0===r.ready||r.ready}));case 3:return t.t0=e,t.next=6,r.renderSvg((0,o.Z)((0,o.Z)({},n),{},{theme:k}));case 6:return t.t1=t.sent,t.abrupt("return",{track:t.t0,result:t.t1});case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)})));case 9:return W=t.sent,J=b+2*M,t.abrupt("return",(0,s.uS)((0,m.jsx)(f.Z,{theme:(0,u.createJBrowseTheme)(k),children:(0,m.jsx)(w,{children:(0,m.jsxs)("svg",{width:b,height:N,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,J,N].toString(),children:[(0,m.jsx)(v,{width:J,height:N}),(0,m.jsx)(h.i1,{model:e}),(0,m.jsxs)("g",{transform:"translate(".concat(P," 0)"),children:[(0,m.jsx)(d.B,{model:e}),(0,m.jsx)("defs",{children:(0,m.jsx)("clipPath",{id:"clip-ruler",children:(0,m.jsx)("rect",{x:0,y:0,width:S,height:Z})})}),(0,m.jsx)("g",{clipPath:"url(#clip-ruler)",children:W.map((function(t,e){var n=t.result;return(0,m.jsx)("g",{children:n},e)}))})]}),(0,m.jsx)("g",{transform:"translate(".concat(P," ").concat(Z,")"),children:(0,m.jsx)(h.WK,{model:e})})]})})})));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=1698.dc5376bb.chunk.js.map