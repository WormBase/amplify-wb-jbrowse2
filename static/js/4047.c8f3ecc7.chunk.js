"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[4047],{70012:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(41867),s=n(47192),i=n(44050),a=n.n(i),l=n(93989),o=n(35421),c=n(80838);const d=(0,s.ZL)()((e=>({fieldValue:{wordBreak:"break-word",maxHeight:300,fontSize:12,padding:e.spacing(.5),overflow:"auto"}})));function u(e){let{value:t}=e;const{classes:n}=d(),s="".concat(t).match(/^https?:\/\//);return(0,c.jsx)("div",{className:n.fieldValue,children:r.isValidElement(t)?t:s?(0,c.jsx)(l.Z,{href:"".concat(t),children:"".concat(t)}):(0,c.jsx)(o.SanitizedHTML,{html:a()(t)?JSON.stringify(t):String(t)})})}},84140:(e,t,n)=>{n.d(t,{Z:()=>l});n(41867);var r=n(77573),s=n(47192),i=n(80838);const a=(0,s.ZL)()((e=>({fieldDescription:{"&:hover":{background:"dark"===e.palette.mode?"#e65100":"yellow"}},fieldName:{wordBreak:"break-all",minWidth:90,borderBottom:"1px solid #0003",fontSize:12,background:e.palette.action.disabledBackground,marginRight:e.spacing(1),padding:e.spacing(.5)}})));function l(e){let{description:t,name:n,width:s,prefix:l=[]}=e;const{classes:o,cx:c}=a(),d=[...l,n].join(".");return t?(0,i.jsx)(r.Z,{title:t,placement:"left",children:(0,i.jsx)("div",{className:c(o.fieldDescription,o.fieldName),children:d})}):(0,i.jsx)("div",{className:o.fieldName,style:{width:s},children:d})}},47693:(e,t,n)=>{n.d(t,{Z:()=>o});n(41867);var r=n(47192),s=n(84140),i=n(70012),a=n(80838);const l=(0,r.ZL)()({field:{display:"flex",flexWrap:"wrap"}});function o(e){let{name:t,value:n,description:r,prefix:o,width:c}=e;const{classes:d}=l();return null!==n&&void 0!==n?(0,a.jsxs)("div",{className:d.field,children:[(0,a.jsx)(s.Z,{prefix:o,description:r,name:t,width:c}),(0,a.jsx)(i.Z,{value:n})]}):null}},44047:(e,t,n)=>{n.r(t),n.d(t,{Attributes:()=>A,BaseAttributes:()=>X,BaseCard:()=>G,BaseCoreDetails:()=>Q,FeatureDetails:()=>Y,default:()=>ee});var r=n(41867),s=n(97486),i=n(81108),a=n(89170),l=n(51590),o=n(3725),c=n(72176),d=n(47192),u=n(3762),f=n(95460),x=n(90872),p=n(35421),m=n(23801),h=n(90552),j=n(68367),g=n(42844),v=n(80838);const b=(0,r.lazy)((()=>n.e(7972).then(n.bind(n,87972)))),w=(0,r.lazy)((()=>n.e(2109).then(n.bind(n,62109)))),Z=(0,d.ZL)()((e=>({formControl:{margin:0},container:{marginTop:e.spacing(4),marginBottom:e.spacing(4)}})));function S(e){let{model:t,feature:n}=e;const{classes:s}=Z(),[i,a]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1);return t?(0,v.jsxs)("div",{className:s.container,children:[(0,v.jsx)(m.Z,{variant:"contained",onClick:()=>a(!i),children:i?"Hide feature sequence":"Show feature sequence"}),(0,v.jsx)(h.Z,{className:s.formControl,children:(0,v.jsx)(j.Z,{onClick:()=>o(!0),children:(0,v.jsx)(g.Z,{})})}),i?(0,v.jsx)(r.Suspense,{fallback:(0,v.jsx)(p.LoadingEllipses,{}),children:(0,v.jsx)(w,{model:t,feature:n},n.uniqueId)}):null,l?(0,v.jsx)(r.Suspense,{fallback:(0,v.jsx)("div",{}),children:(0,v.jsx)(b,{handleClose:()=>o(!1)})}):null]}):null}var k=n(47693),y=n(44050),N=n.n(y),L=n(1039);function C(e,t,n){return[(0,L.Cn)("".concat(e)||"".concat(t)),"".concat(n)].filter((e=>!!e)).join(" - ")}var _=n(97102),D=n(71512),O=n(96614),E=n(83171),T=n(90375),B=n(84140),F=n(13577);const I=(0,d.ZL)()((e=>({margin:{margin:e.spacing(1),width:"100%"},cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})));function M(e){let{value:t,prefix:n,name:s}=e;const{classes:i}=I(),{ref:a,scrollLeft:o}=(0,F.x)(),[c,d]=(0,r.useState)(!1),u=Object.keys(t[0]).sort(),f=new Set(u),m=Object.entries(t).map((e=>{let[t,n]=e;const{id:r,...s}=n;return{id:t,identifier:r,...s}}));for(const r of t)for(const e of Object.keys(r))f.add(e);let h;f.has("id")?(f.delete("id"),h=["identifier",...f]):h=[...f];const[j,g]=(0,r.useState)(h.map((e=>(0,x.measureGridWidth)(m.map((t=>t[e]))))));return f.size<u.length+5?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(B.Z,{prefix:n,name:s}),(0,v.jsx)(O.Z,{control:(0,v.jsx)(E.Z,{checked:c,onChange:e=>d(e.target.checked)}),label:(0,v.jsx)(l.Z,{variant:"body2",children:"Show options"})}),(0,v.jsxs)("div",{className:i.margin,ref:a,children:[(0,v.jsx)(T.Z,{widths:j,setWidths:g,scrollLeft:o}),(0,v.jsx)(_._$,{disableRowSelectionOnClick:!0,rows:m,rowCount:25,rowHeight:25,columnHeaderHeight:35,hideFooter:m.length<25,slots:{toolbar:c?D.n:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}},columns:h.map(((e,t)=>({field:e,renderCell:e=>{const t=e.value;return(0,v.jsx)("div",{className:i.cell,children:(0,v.jsx)(p.SanitizedHTML,{html:(0,x.getStr)(t)})})},width:j[t]})))})]})]}):null}var z=n(70012);const U=(0,d.ZL)()((e=>({field:{display:"flex",flexWrap:"wrap"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),border:"1px solid ".concat(e.palette.action.selected),boxSizing:"border-box",overflow:"auto"}})));function q(e){let{name:t,value:n,description:r,prefix:s=[]}=e;const{classes:i}=U();return 1===n.length?N()(n[0])?(0,v.jsx)(A,{attributes:n[0],prefix:[...s,t]}):(0,v.jsxs)("div",{className:i.field,children:[(0,v.jsx)(B.Z,{prefix:s,description:r,name:t}),(0,v.jsx)(z.Z,{value:n[0]})]}):n.every((e=>N()(e)))?(0,v.jsx)(v.Fragment,{children:n.map(((e,n)=>(0,v.jsx)(A,{attributes:e,prefix:[...s,t+"-"+n]},JSON.stringify(e)+"-"+n)))}):(0,v.jsxs)("div",{className:i.field,children:[(0,v.jsx)(B.Z,{prefix:s,description:r,name:t}),n.map(((e,t)=>(0,v.jsx)("div",{className:i.fieldSubvalue,children:(0,v.jsx)(z.Z,{value:e})},JSON.stringify(e)+"-"+t)))]})}const H=(0,d.ZL)()({field:{display:"flex",flexWrap:"wrap"}});function P(e){let{value:t,prefix:n,name:r}=e;const{classes:s}=H(),{uri:i,baseUri:a=""}=t;let l;try{l=new URL(i,a).href}catch(o){l=i}return(0,v.jsxs)("div",{className:s.field,children:[(0,v.jsx)(B.Z,{prefix:n,name:r}),(0,v.jsx)(z.Z,{value:l})]})}const R=170,W=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"];function A(e){const{attributes:t,omit:n=[],omitSingleLevel:s=[],descriptions:i,formatter:a=(e=>e),hideUris:l,prefix:o=[]}=e,c=new Set([...n,...W,...s]),{__jbrowsefmt:d,...u}=t,f={...u,...d},p=function(e,t){return Math.ceil((0,x.max)(e.map((e=>(0,x.measureText)([...t,e[0]].join("."),12)))))+10}(Object.entries(f).filter((e=>{let[t,n]=e;return void 0!==n&&!c.has(t)})),o);return(0,v.jsx)(v.Fragment,{children:Object.entries(f).filter((e=>{let[t,n]=e;return void 0!==n&&!c.has(t)})).map((t=>{let[n,s]=t;const c=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((e=>{N()(n)&&(n=n[e])})),"string"===typeof n?n:N()(n)&&"string"===typeof(null===(t=n)||void 0===t?void 0:t.Description)?n.Description:void 0}([...o,n],i);if(Array.isArray(s))return s.length>1&&s.every((e=>N()(e)))?(0,v.jsx)(M,{name:n,prefix:o,value:s},n):(0,v.jsx)(q,{name:n,value:s,description:c,prefix:o},n);if(N()(s)){const{omitSingleLevel:t,...a}=e;return(0,x.isUriLocation)(s)?l?null:(0,v.jsx)(P,{name:n,prefix:o,value:s},n):(0,r.createElement)(A,{...a,key:n,attributes:s,descriptions:i,prefix:[...o,n]})}return(0,v.jsx)(k.Z,{name:n,value:a(s,n),description:c,prefix:o,width:Math.min(p,R)},n)}))})}const J=["name","start","end","strand","refName","description","type"],V=(0,d.ZL)()((e=>{var t;return{expansionPanelDetails:{display:"block",padding:e.spacing(1)},expandIcon:{color:(null===(t=e.palette.tertiary)||void 0===t?void 0:t.contrastText)||"#fff"}}}));function G(e){let{children:t,title:n,defaultExpanded:s=!0}=e;const{classes:c}=V(),[d,u]=(0,r.useState)(s);return(0,v.jsxs)(i.Z,{expanded:d,onChange:()=>u((e=>!e)),TransitionProps:{unmountOnExit:!0,timeout:150},children:[(0,v.jsx)(a.Z,{expandIcon:(0,v.jsx)(f.Z,{className:c.expandIcon}),children:(0,v.jsxs)(l.Z,{variant:"button",children:[" ",n]})}),(0,v.jsx)(o.Z,{className:c.expansionPanelDetails,children:t})]})}function K(e){const{feature:t}=e,n=t.strand,r={"-1":"-",0:"",1:"+"},s=r[n]?"(".concat(r[n],")"):"",i=(0,x.assembleLocString)(t);return(0,v.jsx)(v.Fragment,{children:"".concat(i," ").concat(s)})}function $(e){const{feature:t}=e,n=t,r={...n,...n.__jbrowsefmt},{start:s,end:i}=r,a={...r,length:(l=i-s,l.toLocaleString("en-US"))};var l;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k.Z,{name:"Position",value:(0,v.jsx)(K,{...e,feature:r})}),Object.entries({description:"Description",name:"Name",length:"Length",type:"Type"}).map((e=>{let[t,n]=e;return[n,a[t]]})).filter((e=>{let[,t]=e;return null!=t})).map((e=>{let[t,n]=e;return(0,v.jsx)(k.Z,{name:t,value:n},t)}))]})}const Q=e=>{const{title:t="Primary data"}=e;return(0,v.jsx)(G,{...e,title:t,children:(0,v.jsx)($,{...e})})},X=e=>{const{feature:t}=e;return(0,v.jsx)(G,{...e,title:"Attributes",children:(0,v.jsx)(A,{...e,attributes:t})})};function Y(e){const{omit:t=[],model:n,feature:r,depth:i=0}=e,{mate:a,name:o="",id:d="",type:u="",subfeatures:f,uniqueId:m}=r,h=(0,x.getEnv)(n).pluginManager,j=(0,x.getSession)(n),g=h.evaluateExtensionPoint("Core-extraFeaturePanel",null,{session:j,feature:r,model:n});return(0,v.jsxs)(G,{title:C(o,d,u),children:[(0,v.jsx)(l.Z,{children:"Core details"}),(0,v.jsx)($,{...e}),a?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.Z,{}),(0,v.jsx)(l.Z,{children:"Mate details"}),(0,v.jsx)($,{...e,feature:{...a,uniqueId:m+"-mate"}})]}):null,(0,v.jsx)(c.Z,{}),(0,v.jsx)(l.Z,{children:"Attributes"}),(0,v.jsx)(A,{attributes:r,...e,omit:t,omitSingleLevel:J}),(0,v.jsx)(s.SV,{FallbackComponent:e=>(0,v.jsx)(p.ErrorMessage,{error:e.error}),children:(0,v.jsx)(S,{...e})}),g?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.Z,{}),(0,v.jsx)(G,{title:g.name,children:(0,v.jsx)(g.Component,{...e})})]}):null,null!==f&&void 0!==f&&f.length?(0,v.jsx)(G,{title:"Subfeatures",defaultExpanded:i<1,children:f.map(((e,t)=>(0,v.jsx)(Y,{feature:{...e,uniqueId:"".concat(m,"_").concat(t)},model:n,depth:i+1},JSON.stringify(e))))}):null]})}const ee=(0,u.observer)((function(e){let{model:t}=e;const{error:n,featureData:r}=t;if(n)return(0,v.jsx)(p.ErrorMessage,{error:n});if(!r)return null;const s=JSON.parse(JSON.stringify(r,((e,t)=>void 0===t?null:t)));return i=s,0===Object.keys(i).length?null:(0,v.jsx)(Y,{model:t,feature:s});var i}))},1039:(e,t,n)=>{function r(e,t){return e.map((e=>t.slice(e.start,e.end))).join("")}function s(e){return"".concat(e.start,"-").concat(e.end)}function i(e){return e.filter(((e,t,n)=>!t||s(e)!==s(n[t-1])))}function a(e,t){return e.map((e=>({...e,start:t-e.end,end:t-e.start}))).sort(((e,t)=>e.start-t.start))}function l(e,t){if(!e.length)return[];const n=e.at(0),r=e.at(-1),s=t.findIndex((e=>e.end>=n.start&&e.start<=n.start)),i=t.findIndex((e=>e.end>=r.end&&e.start<=r.end)),a=t[i],l=t[s];return[...[...t.slice(0,s),{start:l.start,end:n.start}].map((e=>({...e,type:"five_prime_UTR"}))),...[{start:r.end,end:a.end},...t.slice(i+1)].map((e=>({...e,type:"three_prime_UTR"})))]}function o(e,t){if(!e.length)return[];const n=e.at(0),r=e.at(-1);return[...[{start:t.start,end:n.start}].map((e=>({...e,type:"five_prime_UTR"}))),...[{start:r.end,end:t.end}].map((e=>({...e,type:"three_prime_UTR"})))]}function c(e){return e.length>20?"".concat(e.slice(0,20),"..."):e}n.d(t,{Cn:()=>c,D8:()=>i,Wx:()=>a,ZK:()=>l,mw:()=>o,zo:()=>r})},90375:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(41867),s=n(47192),i=n(54560),a=n(80838);const l=(0,s.ZL)()((e=>({resizeBar:{background:e.palette.action.disabledBackground,height:12,position:"relative",overflow:"hidden"},tick:{position:"absolute",height:"100%",pointerEvents:"none",background:e.palette.action.disabled,width:1},hiddenTick:{position:"absolute",height:"100%",width:5}})));function o(e){let{left:t,scrollLeft:n,idx:s,onDrag:o,onMouseDown:c}=e;const{classes:d}=l(),u=(0,r.useCallback)(((e,t)=>o(e,t,s)),[s,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{onDrag:u,onMouseDown:c,vertical:!0,className:d.hiddenTick,style:{left:t-n-2.5}}),(0,a.jsx)("div",{style:{left:t-n},className:d.tick})]})}function c(e){let{widths:t,setWidths:n,checkbox:s,scrollLeft:i=0}=e;const{classes:c}=l(),d=[],[u,f]=(0,r.useState)();let x=s?52:0;for(let r=0;r<t.length;r++){const e=t[r];d[r]=e+x,x+=e}return(0,a.jsx)("div",{className:c.resizeBar,children:d.map(((e,r)=>(0,a.jsx)(o,{onMouseDown:()=>{f([...t])},left:r===d.length-1?e-3:e,onDrag:(e,r,s)=>{const i=[...t];i[s]=Math.max(u[s]-r,50),n(i)},idx:r,scrollLeft:i},r)))})}},13577:(e,t,n)=>{n.d(t,{x:()=>s});var r=n(41867);function s(){const e=(0,r.useRef)(null),[t,n]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const t=setInterval((()=>{var t;const r=null===(t=e.current)||void 0===t?void 0:t.querySelector(".MuiDataGrid-virtualScroller");r&&n(r.scrollLeft)}),100);return()=>{clearInterval(t)}}),[]),{ref:e,scrollLeft:t}}}}]);
//# sourceMappingURL=4047.c8f3ecc7.chunk.js.map