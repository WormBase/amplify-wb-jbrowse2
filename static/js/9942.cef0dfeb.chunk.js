"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[9942],{39942:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ae});var n=a(41867),r=a(3762),s=a(90552),o=a(36669),i=a(59231),l=a(17329),c=a(90872),d=a(51590),u=a(78882),p=a(18801),h=a(16698),m=a(73290),x=a(23801),g=a(77327),f=a(47192),v=a(31625),k=a(43800),b=a(93989),y=a(49133),j=a(96614),Z=a(83171),w=a(99512),S=a(35421),N=a(7229),T=a(74735),C=a(6743),A=a(45673),D=a(33065),M=a(72280),I=a(78693),P=a(68367),W=a(98662),E=a(36686),O=a(80838);const L=(0,f.ZL)()((e=>({paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},card:{marginTop:e.spacing(1)}}))),B=(0,r.observer)((function(e){let{model:t}=e;const{classes:a}=L(),[r,s]=(0,n.useState)(""),[o,i]=(0,n.useState)(""),[l,c]=(0,n.useState)(["Name","ID"]),[d,u]=(0,n.useState)(["CDS","exon"]),p=[{label:"Indexing attributes",values:l},{label:"Feature types to exclude",values:d}];return(0,n.useEffect)((()=>{t.setTextIndexingConf({attributes:l,exclude:d})}),[t,l,d]),(0,O.jsxs)(N.Z,{className:a.paper,children:[(0,O.jsx)(T.Z,{children:"Indexing configuration"}),p.map(((e,t)=>(0,O.jsx)(C.Z,{raised:!0,className:a.card,children:(0,O.jsxs)(A.Z,{children:[(0,O.jsx)(T.Z,{children:e.label}),(0,O.jsxs)(D.Z,{disablePadding:!0,children:[e.values.map(((a,n)=>(0,O.jsx)(M.ZP,{disableGutters:!0,children:(0,O.jsx)(y.Z,{value:a,InputProps:{endAdornment:(0,O.jsx)(I.Z,{position:"end",children:(0,O.jsx)(P.Z,{onClick:()=>{const a=e.values.filter(((e,t)=>t!==n));0===t?c(a):u(a)},children:(0,O.jsx)(W.Z,{})})})}})},n))),(0,O.jsx)(M.ZP,{disableGutters:!0,children:(0,O.jsx)(y.Z,{value:0===t?r:o,placeholder:"add new",onChange:e=>{0===t?s(e.target.value):i(e.target.value)},InputProps:{endAdornment:(0,O.jsx)(I.Z,{position:"end",children:(0,O.jsx)(P.Z,{onClick:()=>{0===t?(c([...l,r]),s("")):(u([...d,o]),i(""))},disabled:0===t?""===r:""===o,"data-testid":"stringArrayAdd-Feat",children:(0,O.jsx)(E.Z,{})})})}})})]})]})},e.label)))]})})),F=(0,f.ZL)()((e=>({spacing:{marginBottom:e.spacing(3)}}))),R=(0,r.observer)((e=>{let{model:t}=e;const{classes:a}=F(),{pluginManager:n}=(0,c.getEnv)(t),{trackType:r}=t,s=n.getTrackElements();return(0,O.jsx)(y.Z,{className:a.spacing,value:r,variant:"outlined",label:"Track type",helperText:"Select track type",select:!0,fullWidth:!0,onChange:e=>t.setTrackType(e.target.value),SelectProps:{SelectDisplayProps:{"data-testid":"trackTypeSelect"}},children:s.map((e=>{let{name:t,displayName:a}=e;return(0,O.jsx)(i.Z,{value:t,children:a},t)}))})}));var U=a(12555);const J=(0,f.ZL)()((e=>({spacing:{marginBottom:e.spacing(3)}})));function _(e){const t={};return e.forEach((e=>{var a;const n=(null===(a=e.adapterMetadata)||void 0===a?void 0:a.category)||"Default";t[n]||(t[n]=[]),t[n].push(e)})),t}const V=(0,r.observer)((e=>{let{model:t}=e;const{classes:a}=J(),{trackAdapter:n}=t,{pluginManager:r}=(0,c.getEnv)(t);return(0,O.jsx)(y.Z,{className:a.spacing,value:"UNKNOWN"!==(null===n||void 0===n?void 0:n.type)?null===n||void 0===n?void 0:n.type:"",label:"Adapter type",variant:"outlined",helperText:"Select an adapter type",select:!0,fullWidth:!0,onChange:e=>t.setAdapterHint(e.target.value),SelectProps:{SelectDisplayProps:{"data-testid":"adapterTypeSelect"}},children:Object.entries(_(r.getAdapterElements().filter((e=>{var t;return!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.hiddenFromGUI)})))).map((e=>{let[t,a]=e;return[(0,O.jsx)(U.Z,{children:t},t),a.map((e=>(0,O.jsx)(i.Z,{value:e.name,children:e.displayName},e.name)))]}))})})),G=(0,f.ZL)()((e=>({spacing:{marginBottom:e.spacing(3)}})));function H(e){let{trackAdapter:t,trackType:a}=e;const{classes:n}=G(),{type:r,subadapter:s}=t;return"SNPCoverageAdapter"===r?(0,O.jsxs)(d.Z,{className:n.spacing,children:["Selected ",(0,O.jsx)("code",{children:a}),". Using adapter ",(0,O.jsx)("code",{children:r})," with subadapter ",(0,O.jsx)("code",{children:null===s||void 0===s?void 0:s.type}),". Please enter a track name and, if necessary, update the track type."]}):(0,O.jsxs)(d.Z,{className:n.spacing,children:["Using adapter ",(0,O.jsx)("code",{children:r})," and guessing track type"," ",(0,O.jsx)("code",{children:a}),". Please enter a track name and, if necessary, update the track type."]})}function q(e){let{model:t}=e;const{classes:a}=G();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(d.Z,{className:a.spacing,children:["JBrowse was not able to guess the adapter type for this data, but it may be in the list below. If not, you can"," ",(0,O.jsx)(b.Z,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer",children:"check for new releases"})," ","of JBrowse to see if they support this data type or"," ",(0,O.jsx)(b.Z,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer",children:"file an issue"})," ","and add a feature request for this data type."]}),(0,O.jsx)(V,{model:t})]})}const z=(0,r.observer)((function(e){let{model:t}=e;const{classes:a}=G(),[r,o]=(0,n.useState)(!0),i=(0,c.getSession)(t),{trackName:l,trackAdapter:u,trackType:p,warningMessage:h,adapterHint:m}=t;if((0,n.useEffect)((()=>{""===m&&u&&t.setAdapterHint(u.type)}),[m,u,null===u||void 0===u?void 0:u.type,t]),t.unsupported)return(0,O.jsxs)(d.Z,{className:a.spacing,children:["This version of JBrowse cannot display data of this type. It is possible, however, that there is a newer version that can display them. You can"," ",(0,O.jsx)(b.Z,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer",children:"check for new releases"})," ","of JBrowse or"," ",(0,O.jsx)(b.Z,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer",children:"file an issue"})," ","and add a feature request for this data type."]});if((null===u||void 0===u?void 0:u.type)===w.UNKNOWN)return(0,O.jsx)(q,{model:t});if(null===u||void 0===u||!u.type)return(0,O.jsx)(d.Z,{children:"Could not recognize this data type."});const x=(0,c.isSupportedIndexingAdapter)(null===u||void 0===u?void 0:u.type);return(0,O.jsxs)("div",{children:[u?(0,O.jsx)(H,{trackAdapter:u,trackType:p}):null,h?(0,O.jsx)(d.Z,{style:{color:"orange"},children:h}):null,(0,O.jsx)(y.Z,{className:a.spacing,label:"trackName",helperText:"A name for this track",fullWidth:!0,value:l,onChange:e=>t.setTrackName(e.target.value),inputProps:{"data-testid":"trackNameInput"}}),(0,O.jsx)(V,{model:t}),(0,O.jsx)(R,{model:t}),(0,O.jsx)(S.AssemblySelector,{session:i,helperText:"Select assembly to add track to",selected:t.assembly,onChange:e=>t.setAssembly(e),TextFieldProps:{fullWidth:!0,SelectProps:{SelectDisplayProps:{"data-testid":"assemblyNameSelect"}}}}),c.isElectron&&x&&(0,O.jsx)(s.Z,{children:(0,O.jsx)(j.Z,{label:"Index track for text searching?",control:(0,O.jsx)(Z.Z,{checked:r,onChange:e=>{o(e.target.checked),t.setTextIndexTrack(e.target.checked)}})})}),c.isElectron&&r&&x?(0,O.jsx)(B,{model:t}):null]})})),K=(0,f.ZL)()((e=>({paper:{padding:e.spacing(2)},spacer:{height:e.spacing(8)}}))),Y=(0,r.observer)((function(e){let{model:t}=e;const{classes:a}=K(),n=(0,v.getRoot)(t);return(0,O.jsxs)(N.Z,{className:a.paper,children:[(0,O.jsx)(S.FileSelector,{name:"Main file",description:"",location:t.trackData,setLocation:t.setTrackData,setName:t.setTrackName,rootModel:n}),(0,O.jsx)("div",{className:a.spacer}),(0,O.jsx)(S.FileSelector,{name:"Index file",description:"(Optional) The URL of the index file is automatically inferred from the URL of the main file if it is not supplied.",location:t.indexTrackData,setLocation:t.setIndexTrackData,setName:t.setTrackName,rootModel:n})]})})),Q=(0,f.ZL)()((e=>({root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginRight:e.spacing(1)},actionsContainer:{marginTop:e.spacing(10),marginBottom:e.spacing(2)},alertContainer:{padding:"".concat(e.spacing(2),"px 0px ").concat(e.spacing(2),"px 0px")}}))),X=["Enter track data","Confirm track type"],$=(0,r.observer)((function(e){let{model:t}=e;const[a,r]=(0,n.useState)(0),{classes:s}=Q(),{jobsManager:o}=(0,v.getRoot)(t),i=(0,c.getSession)(t),{assembly:l,trackAdapter:f,trackData:b,trackName:y,trackType:j,textIndexTrack:Z,textIndexingConf:w}=t,[S,N]=(0,n.useState)();function T(e){switch(e){case 0:return(0,O.jsx)(Y,{model:t});case 1:return(0,O.jsx)(z,{model:t});default:return(0,O.jsx)(d.Z,{children:"Unknown step"})}}async function C(){if(a!==X.length-1)return void r(a+1);const e=["".concat(y.toLowerCase().replaceAll(" ","_"),"-").concat(Date.now()),"".concat(i.adminMode?"":"-sessionTrack")].join(""),n=i.assemblyManager.get(l);if((0,c.isSessionWithAddTracks)(i))if(n&&f&&"UNKNOWN"!==f.type){var s,d;if(i.addTrackConf({trackId:e,type:j,name:y,assemblyNames:[l],adapter:{...f,sequenceAdapter:(0,k.getConf)(n,["sequence","adapter"])}}),null===(s=(d=t.view).showTrack)||void 0===s||s.call(d,e),c.isElectron&&Z&&(0,c.isSupportedIndexingAdapter)(f.type)){const t=y+"-index",a={indexingParams:{...w||{attributes:["Name","ID"],exclude:["CDS","exon"]},assemblies:[l],tracks:[e],indexType:"perTrack",name:t,timestamp:(new Date).toISOString()},name:t,cancelCallback:()=>o.abortJob()};o.queueJob(a)}else i.notify("Open a new view, or use the track selector in an existing view, to view this track","info");t.clearData(),(0,c.isSessionModelWithWidgets)(i)&&i.hideWidget(t)}else N("Failed to add track.\nThe configuration of this file is not currently supported.");else N("Unable to add tracks to this model")}function A(){N(void 0),r(a-1)}function D(){switch(a){case 0:return!b;case 1:return!(y&&j&&null!==f&&void 0!==f&&f.type&&l);default:return!0}}return(0,O.jsx)("div",{className:s.root,children:(0,O.jsx)(u.Z,{className:s.stepper,activeStep:a,orientation:"vertical",children:X.map(((e,t)=>(0,O.jsxs)(p.Z,{children:[(0,O.jsx)(h.Z,{children:e}),(0,O.jsxs)(m.Z,{children:[T(t),(0,O.jsxs)("div",{className:s.actionsContainer,children:[(0,O.jsx)(x.Z,{disabled:0===a,onClick:A,className:s.button,children:"Back"}),(0,O.jsx)(x.Z,{disabled:D(),variant:"contained",color:"primary",onClick:C,className:s.button,"data-testid":"addTrackNextButton",children:a===X.length-1?"Add":"Next"})]}),S?(0,O.jsx)("div",{className:s.alertContainer,children:(0,O.jsx)(g.Z,{severity:"error",children:S})}):null]})]},e)))})})})),ee=(0,f.ZL)()({textbox:{width:"100%"},submit:{marginTop:25,marginBottom:100,display:"block"}}),te=(0,r.observer)((function(e){let{model:t}=e;const{classes:a}=ee(),[r,s]=(0,n.useState)(""),[o,i]=(0,n.useState)();return(0,O.jsxs)("div",{children:[o?(0,O.jsx)(S.ErrorMessage,{error:o}):null,(0,O.jsx)(y.Z,{multiline:!0,rows:10,value:r,onChange:e=>s(e.target.value),placeholder:"Paste track config or array of track configs in JSON format",variant:"outlined",className:a.textbox}),(0,O.jsx)(x.Z,{variant:"contained",className:a.submit,onClick:()=>{try{i(void 0);const e=(0,c.getSession)(t),a=JSON.parse(r),n=Array.isArray(a)?a:[a];(0,c.isSessionWithAddTracks)(e)&&(0,c.isSessionModelWithWidgets)(e)&&(n.forEach((t=>e.addTrackConf(t))),n.forEach((e=>t.view.showTrack(e.trackId))),t.clearData(),e.hideWidget(t))}catch(e){console.error(e),i(e)}},children:"Submit"})]})})),ae=(0,r.observer)((function(e){let{model:t}=e;const[a,r]=(0,n.useState)("Default add track workflow"),{pluginManager:d}=(0,c.getEnv)(t),u=d.getAddTrackWorkflowElements(),p={"Default add track workflow":$,"Add track JSON":te,...Object.fromEntries(u.map((e=>[e.name,e.ReactComponent])))},h=p[a]?a:"Default add track workflow",m=p[h];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(s.Z,{children:[(0,O.jsx)(o.Z,{value:h,onChange:e=>r(e.target.value),children:Object.keys(p).map((e=>(0,O.jsx)(i.Z,{value:e,children:e},e)))}),(0,O.jsx)(l.Z,{children:"Type of add track workflow"})]}),(0,O.jsx)("br",{}),(0,O.jsx)(m,{model:t})]})}))},98662:(e,t,a)=>{var n=a(71600);t.Z=void 0;var r=n(a(80337)),s=a(80838),o=(0,r.default)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=o},93989:(e,t,a)=>{a.d(t,{Z:()=>j});var n=a(31461),r=a(7896),s=a(41867),o=a(66184),i=a(92705),l=a(9931),c=a(75693),d=a(90293),u=a(62643),p=a(40234),h=a(51590),m=a(31633),x=a(60183),g=a(71939);const f={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},v=e=>{let{theme:t,ownerState:a}=e;const n=(e=>f[e]||e)(a.color),r=(0,x.DW)(t,"palette.".concat(n),!1)||a.color,s=(0,x.DW)(t,"palette.".concat(n,"Channel"));return"vars"in t&&s?"rgba(".concat(s," / 0.4)"):(0,g.Fq)(r,.4)};var k=a(80838);const b=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],y=(0,c.ZP)(h.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t["underline".concat((0,l.Z)(a.underline))],"button"===a.component&&t.button]}})((e=>{let{theme:t,ownerState:a}=e;return(0,r.Z)({},"none"===a.underline&&{textDecoration:"none"},"hover"===a.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===a.underline&&(0,r.Z)({textDecoration:"underline"},"inherit"!==a.color&&{textDecorationColor:v({theme:t,ownerState:a})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===a.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(m.Z.focusVisible)]:{outline:"auto"}})})),j=s.forwardRef((function(e,t){const a=(0,d.Z)({props:e,name:"MuiLink"}),{className:c,color:h="primary",component:x="a",onBlur:g,onFocus:v,TypographyClasses:j,underline:Z="always",variant:w="inherit",sx:S}=a,N=(0,n.Z)(a,b),{isFocusVisibleRef:T,onBlur:C,onFocus:A,ref:D}=(0,u.Z)(),[M,I]=s.useState(!1),P=(0,p.Z)(t,D),W=(0,r.Z)({},a,{color:h,component:x,focusVisible:M,underline:Z,variant:w}),E=(e=>{const{classes:t,component:a,focusVisible:n,underline:r}=e,s={root:["root","underline".concat((0,l.Z)(r)),"button"===a&&"button",n&&"focusVisible"]};return(0,i.Z)(s,m.w,t)})(W);return(0,k.jsx)(y,(0,r.Z)({color:h,className:(0,o.Z)(E.root,c),classes:j,component:x,onBlur:e=>{C(e),!1===T.current&&I(!1),g&&g(e)},onFocus:e=>{A(e),!0===T.current&&I(!0),v&&v(e)},ref:P,ownerState:W,variant:w,sx:[...Object.keys(f).includes(h)?[]:[{color:h}],...Array.isArray(S)?S:[S]]},N))}))},31633:(e,t,a)=>{a.d(t,{Z:()=>o,w:()=>s});var n=a(70101),r=a(88498);function s(e){return(0,r.Z)("MuiLink",e)}const o=(0,n.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"])}}]);
//# sourceMappingURL=9942.cef0dfeb.chunk.js.map