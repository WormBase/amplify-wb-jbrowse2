"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[5098,5997],{45997:function(e,t,n){n.r(t),n.d(t,{bufferToString:function(){return p},parseCsvBuffer:function(){return h},parseTsvBuffer:function(){return x}});var r,a,u,o=n(41361),s=n(96234),c=n(32723),i=n(33028),f=n(34795),d=n(81073);function p(e){return new TextDecoder("utf8",{fatal:!0}).decode(e)}function l(e){return(r=r||(0,f.Z)((0,c.Z)().mark((function e(t){var r,a,u=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,n.e(2745).then(n.t.bind(n,12745,23)).then((function(e){return e.default}));case 3:return a=e.sent,e.abrupt("return",a((0,i.Z)({noheader:!0,output:"csv"},r)).fromString(p(t)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){var r,a,u=e.rows[0].cells[t].text||"",o="Text";try{a=(0,d.parseLocString)(u,n)}catch(s){}return null!==(r=a)&&void 0!==r&&r.refName&&"number"===typeof a.start?o="LocString":/^\d+(\.\d+)?$/.test(u)&&(o="Number"),o}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasColumnNameLine,r=void 0!==n&&n,a=t.columnNameLineNumber,u=void 0===a?1:a,c=t.isValidRefName,i=void 0===c?function(){return!1}:c,f=t.selectedAssemblyName,p=0,l={isLoaded:!0,rows:e.map((function(e,t){var n=t+(r?0:1);return e.length>p&&(p=e.length),{id:String(n),cells:e.map((function(e,t){return{columnNumber:t,text:e}}))}}))},v={};if(r&&void 0!==u){var h=l.rows.splice(u-1,1),x=(0,s.Z)(h,1)[0];x&&x.cells.forEach((function(e,t){v[t]=e.text||""}))}for(var y=[],w=[],b=0;b<p;b+=1){w.push(b);var g=m(l,b,i);if("LocString"===g){var N,T=(0,o.Z)(l.rows);try{for(T.s();!(N=T.n()).done;){var S=N.value.cells[b];S.extendedData=(0,d.parseLocString)(S.text,i)}}catch(D){T.e(D)}finally{T.f()}}y[b]={name:v[b],dataType:{type:g}}}return{rowSet:l,columnDisplayOrder:w,hasColumnNames:!!r,columns:y,assemblyName:f}}function h(e,t){return(a=a||(0,f.Z)((0,c.Z)().mark((function e(t,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:return r=e.sent,e.abrupt("return",v(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return(u=u||(0,f.Z)((0,c.Z)().mark((function e(t,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,{delimiter:"\t"});case 2:return r=e.sent,e.abrupt("return",v(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},25098:function(e,t,n){n.r(t),n.d(t,{parseVcfBuffer:function(){return s},splitVcfFileHeaderAndBody:function(){return c}});var r=n(6556),a=n(91211),u=n(45997),o=[{name:"CHROM",type:"Text"},{name:"POS",type:"Number"},{name:"ID",type:"Text"},{name:"REF",type:"Text"},{name:"ALT",type:"Text"},{name:"QUAL",type:"Number"},{name:"FILTER",type:"Text"},{name:"INFO",type:"Text"},{name:"FORMAT",type:"Text"}];function s(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).selectedAssemblyName,n=c((0,u.bufferToString)(e)),s=n.header,i=n.body,f=[],d=new r.Z({header:s});s="",i.split(/\n|\r\n|\r/).forEach((function(e,t){/\S/.test(e)&&f.push(function(e,t,n){var r=e.parseLine(t),u=new a.B({variant:r,parser:e,id:"vcf-".concat(n)}),o=t.split("\t").map((function(e){return"."===e?"":e}));return 8===o.length&&o.push(""),{id:String(n+1),extendedData:{vcfFeature:u.toJSON()},cells:o.map((function(e,t){return{columnNumber:t,text:e}}))}}(d,e,t))})),i="";for(var p={isLoaded:!0,rows:f},l=[],m=[],v=0;v<o.length;v+=1)l.push(v),m[v]={name:o[v].name,dataType:{type:o[v].type}};for(var h=0;h<d.samples.length;h+=1){var x=o.length+h;l.push(x),m[x]={name:d.samples[h],dataType:{type:"Text"}}}return l.push(l.length),m.unshift({name:"Location",dataType:{type:"LocString"},isDerived:!0,derivationFunctionText:"jexl:{text:row.extendedData.vcfFeature.refName+':'\n\n    +row.extendedData.vcfFeature.start+'..'+row.extendedData.vcfFeature.end, extendedData:\n\n    {refName:row.extendedData.vcfFeature.refName,start:row.extendedData.vcfFeature.start,end:row.extendedData.vcfFeature.end}}"}),{rowSet:p,columnDisplayOrder:l,hasColumnNames:!0,columns:m,assemblyName:t}}function c(e){for(var t,n=0;n<e.length;n+=1){var r=e[n];if("\n"===t&&"#"!==r)break;t=r}return{header:e.slice(0,Math.max(0,n)),body:e.slice(n)}}}}]);
//# sourceMappingURL=5098.d6f0cd69.chunk.js.map