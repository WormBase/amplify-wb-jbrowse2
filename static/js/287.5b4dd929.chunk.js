/*! For license information please see 287.5b4dd929.chunk.js.LICENSE.txt */
(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[287],{11987:(e,t,r)=>{"use strict";r.d(t,{lr:()=>Ee,ED:()=>_e});var n=r(69426),a=r(35051).lW;function o(e){return a.from((0,n.inflate)(e))}var i=r(9231),s=r.n(i),c=r(10028),f=r.n(c),l=r(36972),d=r.n(l);class h extends Error{}class u extends Error{}class g extends h{}class m extends h{}class p extends h{}const y=12,w=1<<y,v=1<<23;class b{constructor(){this.F=void 0,this.C=void 0}}function A(e,t,r,n){return r*(e>>n)+(e&(1<<n)-1)-t}const S={FC:b,AriDecoder:class{constructor(){this.fc=new Array(256);for(let e=0;e<this.fc.length;e+=1)this.fc[e]=new b;this.R=null}},Symbol:class{constructor(){this.start=void 0,this.freq=void 0}},symbolInit:function(e,t,r){if(!(t<=65536))throw new g("assertion failed: start <= 1<<16");if(!(r<=65536-t))throw new g("assertion failed: freq <= 1<<16");e.start=t,e.freq=r},advanceStep:A,advanceSymbolStep:function(e,t,r){return A(e,t.start,t.freq,r)},get:function(e,t){return e&(1<<t)-1},advanceSymbol:function(e,t,r,n){return function(e,t,r,n,a){if((e=n*(e>>a)+(e&(1<<a)-1)-r)<v)do{e=e<<8|255&t.get()}while(e<v);return e}(e,t,r.start,r.freq,n)},renormalize:function(e,t){if(e<v)do{e=e<<8|255&t.get()}while(e<v);return e}};function R(e){if(!e)throw new g("assertion failed")}var _=r(35051).lW;function B(e,t){const r=new S.AriDecoder,n=new Array(256);for(let a=0;a<n.length;a+=1)n[a]=new S.Symbol;return function(e,t,r){let n=0,a=0,o=255&e.get();do{null==t.fc[o]&&(t.fc[o]=new S.FC),t.fc[o].F=255&e.get(),t.fc[o].F>=128&&(t.fc[o].F&=-129,t.fc[o].F=(127&t.fc[o].F)<<8|255&e.get()),t.fc[o].C=a,S.symbolInit(r[o],t.fc[o].C,t.fc[o].F),t.R||(t.R=new Array(w)),t.R.fill(o,a,a+t.fc[o].F),a+=t.fc[o].F,0===n&&o+1===(255&e.getByteAt(e.position()))?(o=255&e.get(),n=255&e.get()):0!==n?(n-=1,o+=1):o=255&e.get()}while(0!==o);R(a<w)}(e,r,n),function(e,t,r,n){let a=e.getInt(),o=e.getInt(),i=e.getInt(),s=e.getInt();const c=n.remaining(),f=-4&c;for(let d=0;d<f;d+=4){const c=t.R[S.get(a,y)],f=t.R[S.get(o,y)],l=t.R[S.get(i,y)],h=t.R[S.get(s,y)];n.putAt(d,c),n.putAt(d+1,f),n.putAt(d+2,l),n.putAt(d+3,h),a=S.advanceSymbolStep(a,r[255&c],y),o=S.advanceSymbolStep(o,r[255&f],y),i=S.advanceSymbolStep(i,r[255&l],y),s=S.advanceSymbolStep(s,r[255&h],y),a=S.renormalize(a,e),o=S.renormalize(o,e),i=S.renormalize(i,e),s=S.renormalize(s,e)}let l;switch(n.setPosition(f),3&c){case 0:break;case 1:l=t.R[S.get(a,y)],S.advanceSymbol(a,e,r[255&l],y),n.put(l);break;case 2:l=t.R[S.get(a,y)],S.advanceSymbol(a,e,r[255&l],y),n.put(l),l=t.R[S.get(o,y)],S.advanceSymbol(o,e,r[255&l],y),n.put(l);break;case 3:l=t.R[S.get(a,y)],S.advanceSymbol(a,e,r[255&l],y),n.put(l),l=t.R[S.get(o,y)],S.advanceSymbol(o,e,r[255&l],y),n.put(l),l=t.R[S.get(i,y)],S.advanceSymbol(i,e,r[255&l],y),n.put(l);break;default:throw new g("invalid output size encountered during rANS decoding")}n.setPosition(0)}(e,r,n,t),t}function C(e,t){const r=new Array(256);for(let a=0;a<r.length;a+=1)r[a]=new S.AriDecoder;const n=new Array(256);for(let a=0;a<n.length;a+=1){n[a]=new Array(256);for(let e=0;e<n[a].length;e+=1)n[a][e]=new S.Symbol}return function(e,t,r){let n=0,a=255&e.get();do{let o=0,i=0,s=255&e.get();null==t[a]&&(t[a]=new S.AriDecoder);do{null==t[a].fc[s]&&(t[a].fc[s]=new S.FC),t[a].fc[s].F=255&e.get(),t[a].fc[s].F>=128&&(t[a].fc[s].F&=-129,t[a].fc[s].F=(127&t[a].fc[s].F)<<8|255&e.get()),t[a].fc[s].C=i,0===t[a].fc[s].F&&(t[a].fc[s].F=w),null==r[a][s]&&(r[a][s]=new S.RansDecSymbol),S.symbolInit(r[a][s],t[a].fc[s].C,t[a].fc[s].F),null==t[a].R&&(t[a].R=new Array(w)),t[a].R.fill(s,i,i+t[a].fc[s].F),i+=t[a].fc[s].F,R(i<=w),0===o&&s+1===(255&e.getByteAt(e.position()))?(s=255&e.get(),o=255&e.get()):0!==o?(o-=1,s+=1):s=255&e.get()}while(0!==s);0===n&&a+1===(255&e.getByteAt(e.position()))?(a=255&e.get(),n=255&e.get()):0!==n?(n-=1,a+=1):a=255&e.get()}while(0!==a)}(e,r,n),function(e,t,r,n){const a=t.remaining();let o=e.getInt(),i=e.getInt(),s=e.getInt(),c=e.getInt();const f=a>>2;let l=0,d=f,h=2*f,u=3*f,g=0,m=0,p=0,w=0;for(;l<f;l+=1,d+=1,h+=1,u+=1){const a=255&r[g].R[S.get(o,y)],f=255&r[m].R[S.get(i,y)],v=255&r[p].R[S.get(s,y)],b=255&r[w].R[S.get(c,y)];t.putAt(l,a),t.putAt(d,f),t.putAt(h,v),t.putAt(u,b),o=S.advanceSymbolStep(o,n[g][a],y),i=S.advanceSymbolStep(i,n[m][f],y),s=S.advanceSymbolStep(s,n[p][v],y),c=S.advanceSymbolStep(c,n[w][b],y),o=S.renormalize(o,e),i=S.renormalize(i,e),s=S.renormalize(s,e),c=S.renormalize(c,e),g=a,m=f,p=v,w=b}for(;u<a;u+=1){const a=255&r[w].R[S.get(c,y)];t.putAt(u,a),c=S.advanceSymbol(c,e,n[w][a],y),w=a}}(e,t,r,n),t}class M{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._buffer=e,this._position=t,this.length=e.length}get(){const e=this._buffer[this._position];return this._position+=1,e}getByte(){return this.get()}getByteAt(e){return this._buffer[e]}position(){return this._position}put(e){return this._buffer[this._position]=e,this._position+=1,e}putAt(e,t){return this._buffer[e]=t,t}setPosition(e){return this._position=e,e}getInt(){const e=this._buffer.readInt32LE(this._position);return this._position+=4,e}remaining(){return this._buffer.length-this._position}}var E=r(34013);const I=(new E._).itf8(),F={parser:(new E._).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},q={parser:(new E._).uint8("compressionMethod",{formatter:e=>{const t=["raw","gzip","bzip2","lzma","rans","rans4x16","arith","fqzcomp","tok3"][e];if(!t)throw new Error("compression method number ".concat(e," not implemented"));return t}}).uint8("contentType",{formatter:e=>{const t=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][e];if(!t)throw new Error("invalid block content type id ".concat(e));return t}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},U={parser:(new E._).uint32("crc32"),maxLength:4},k=(new E._).itf8("size").buffer("ents",{length:"size",formatter:e=>{function t(t,r){const n=e.toString("utf8",t,r),a=[];for(let e=0;e<n.length;e+=3)a.push(n.substr(e,3));return a}var r,n=[],a=0;for(r=0;r<e.length;r+=1)e[r]||(n.push(t(a,r)),a=r+1);return r>a&&n.push(t(a,r)),n}}),x=(new E._).uint8(null,{formatter:e=>!!e}),P=(new E._).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new E._).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:x,UI:x,PI:x,RN:x,AP:x,RR:x,SM:(new E._).array(null,{type:"uint8",length:5}),TD:(new E._).nest(null,{type:k,formatter:e=>e.ents})}})});function L(e){const t={};for(let r=0;r<e.ents.length;r+=1){const{key:n,value:a}=e.ents[r];t[n]&&console.warn("duplicate key ".concat(n," in map")),t[n]=a}return t}const D={cramFileDefinition:F,cramBlockHeader:q,cramBlockCrc32:U};function W(e){return"number"===typeof e.refSeqId}const N={cramUnmappedSliceHeader(e){let t=0,r=(new E._).itf8("numRecords");t+=5,e>=3?(r=r.ltf8("recordCounter"),t+=9):2===e&&(r=r.itf8("recordCounter"),t+=5),r=r.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:I,length:"numContentIds"}),t+=10,e>=2&&(r=r.array("md5",{type:"uint8",length:16}),t+=16);return{parser:r,maxLength:e=>t+5*e}},cramMappedSliceHeader(e){let t=(new E._).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),r=20;e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),t=t.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:I,length:"numContentIds"}).itf8("refBaseBlockId"),r+=15,e>=2&&(t=t.array("md5",{type:"uint8",length:16}),r+=16);return{parser:t,maxLength:e=>r+5*e}},cramEncoding:e=>({parser:(new E._).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new E._,1:(new E._).itf8("blockContentId"),2:(new E._).itf8("offset").itf8("M"),3:E._.start().itf8("numCodes").array("symbols",{length:"numCodes",type:I}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:I}),4:E._.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new E._).uint8("stopByte").itf8("blockContentId"),6:(new E._).itf8("offset").itf8("length"),7:(new E._).itf8("offset").itf8("K"),8:(new E._).itf8("offset").itf8("log2m"),9:(new E._).itf8("offset")}})}),cramDataSeriesEncodingMap(e){return(new E._).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new E._).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(e).parser})})},cramTagEncodingMap(e){return(new E._).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new E._).itf8("key",{formatter:e=>String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)}).nest("value",{type:this.cramEncoding(e).parser})})},cramCompressionHeader(e){let t=new E._;return t=t.nest("preservation",{type:P,formatter:L}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(e),formatter:L}).nest("tagEncoding",{type:this.cramTagEncodingMap(e),formatter:L}),{parser:t}},cramContainerHeader1(e){let t=(new E._).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),r=24;return e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),e>1&&(t=t.ltf8("numBases"),r+=9),t=t.itf8("numBlocks").itf8("numLandmarks"),r+=10,{parser:t,maxLength:r}},cramContainerHeader2(e){let t=(new E._).itf8("numLandmarks").array("landmarks",{type:(new E._).itf8(),length:"numLandmarks"}),r=0;return e>=3&&(t=t.uint32("crc32"),r=4),{parser:t,maxLength:e=>5+5*e+r}}};var z=r(86576),T=r.n(z),H=r(49277),O=r.n(H);class Q extends Error{}function V(e,t,r){let n=0;if(t.bytePosition+(7-t.bitPosition+r)/8>e.length)throw new Q("read error during decoding. the file seems to be truncated.");for(let a=r;a;a--)n<<=1,n|=e[t.bytePosition]>>t.bitPosition&1,t.bitPosition-=1,t.bitPosition<0&&(t.bytePosition+=1),t.bitPosition&=7;return n}function j(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const{offset:a,result:o}=t.parse(e);return{...o,_endPosition:a+n,_size:a-r}}function G(e,t){const r=e.prototype[t],n="_memo_".concat(t);e.prototype[t]=function(){if(!(n in this)){const e=r.call(this);this[n]=e,Promise.resolve(e).catch((()=>{delete this[n]}))}return this[n]}}const X={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183};var Z=r(64229),K=r.n(Z);const Y={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};function J(e){const t={};for(const[r,n]of e)t["is"+n]=e=>!!(e&r),t["set"+n]=e=>e|r;return t}const $=J([[1,"Paired"],[2,"ProperlyPaired"],[4,"SegmentUnmapped"],[8,"MateUnmapped"],[16,"ReverseComplemented"],[32,"MateReverseComplemented"],[64,"Read1"],[128,"Read2"],[256,"Secondary"],[512,"FailedQc"],[1024,"Duplicate"],[2048,"Supplementary"]]),ee=J([[1,"PreservingQualityScores"],[2,"Detached"],[4,"WithMateDownstream"],[8,"DecodeSequenceAsStar"]]),te=J([[1,"OnNegativeStrand"],[2,"Unmapped"]]);class re{constructor(e){let{flags:t,cramFlags:r,readLength:n,mappingQuality:a,lengthOnRef:o,qualityScores:i,mateRecordNumber:s,readBases:c,readFeatures:f,mateToUse:l,readGroupId:d,readName:h,sequenceId:u,uniqueId:g,templateSize:m,alignmentStart:p,tags:y}=e;this.flags=t,this.cramFlags=r,this.readLength=n,this.mappingQuality=a,this.lengthOnRef=o,this.qualityScores=i,c&&(this.readBases=c),this.readGroupId=d,this.readName=h,this.sequenceId=u,this.uniqueId=g,this.templateSize=m,this.alignmentStart=p,this.tags=y,f&&(this.readFeatures=f),l&&(this.mate={flags:l.mateFlags,readName:l.mateReadName,sequenceId:l.mateSequenceId,alignmentStart:l.mateAlignmentStart}),s&&(this.mateRecordNumber=s)}isPaired(){return!!(this.flags&X.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&X.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&X.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&X.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&X.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&X.BAM_FMREVERSE)}isRead1(){return!!(this.flags&X.BAM_FREAD1)}isRead2(){return!!(this.flags&X.BAM_FREAD2)}isSecondary(){return!!(this.flags&X.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&X.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&X.BAM_FDUP)}isSupplementary(){return!!(this.flags&X.BAM_FSUPPLEMENTARY)}isDetached(){return!!(this.cramFlags&X.CRAM_FLAG_DETACHED)}hasMateDownStream(){return!!(this.cramFlags&X.CRAM_FLAG_MATE_DOWNSTREAM)}isPreservingQualityScores(){return!!(this.cramFlags&X.CRAM_FLAG_PRESERVE_QUAL_SCORES)}isUnknownBases(){return!!(this.cramFlags&X.CRAM_FLAG_NO_SEQ)}getReadBases(){if(!this.readBases&&this._refRegion){const e=function(e,t){if(!e.lengthOnRef&&!e.readLength)return null;if(e.isUnknownBases())return null;const r=e.alignmentStart-t.start;if(!e.readFeatures)return t.seq.substr(r,e.lengthOnRef).toUpperCase();let n="",a=r,o=0;for(;n.length<e.readLength;)if(o<e.readFeatures.length){const r=e.readFeatures[o];if("Q"===r.code||"q"===r.code)o+=1;else if(r.pos===n.length+1)if(o+=1,"b"===r.code){const e=r.data;n+=e,a+=e.length}else"B"===r.code?(n+=r.data[0],a+=1):"X"===r.code?(n+=r.sub,a+=1):"I"===r.code?n+=r.data:"D"===r.code?a+=r.data:"i"===r.code?n+=r.data:"N"===r.code?a+=r.data:"S"===r.code?n+=r.data:"P"===r.code||r.code;else if(o<e.readFeatures.length){const r=t.seq.substr(a,e.readFeatures[o].pos-n.length-1);n+=r,a+=r.length}}else{const r=t.seq.substr(a,e.readLength-n.length);n+=r,a+=r.length}return n.toUpperCase()}(this,this._refRegion);e&&(this.readBases=e)}return this.readBases}getPairOrientation(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.mate&&this.sequenceId===this.mate.sequenceId){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let r=" ",n=" ";this.isRead1()?(r="1",n="2"):this.isRead2()&&(r="2",n="1");const a=[];let o=this.templateLength||this.templateSize;if(void 0===o)throw new Error("One of templateSize and templateLength must be set");return this.alignmentStart>this.mate.alignmentStart&&o>0&&(o=-o),o>0?(a[0]=e,a[1]=r,a[2]=t,a[3]=n):(a[2]=e,a[3]=r,a[0]=t,a[1]=n),a.join("")}return null}addReferenceSequence(e,t){this.readFeatures&&this.readFeatures.forEach((r=>{"X"===r.code&&function(e,t,r,n){if(!t)return;const a=n.refPos-t.start,o=t.seq.charAt(a);o&&(n.ref=o);let i=Y[o];void 0===i&&(i=4);const s=r.substitutionMatrix[i][n.data];s&&(n.sub=s)}(0,e,t,r)})),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}toJSON(){const e={};return Object.keys(this).forEach((t=>{"_"!==t.charAt(0)&&(e[t]=this[t])})),e.readBases=this.getReadBases(),e}}function ne(e){let t="";for(let r=0;r<e.length&&0!==e[r];r++)t+=String.fromCharCode(e[r]);return t}function ae(e,t){if("Z"===e)return ne(t);if("A"===e)return String.fromCharCode(t[0]);if("I"===e)return K().fromBytesLE(t).toNumber();if("i"===e)return new Int32Array(t.buffer)[0];if("s"===e)return new Int16Array(t.buffer)[0];if("S"===e)return new Uint16Array(t.buffer)[0];if("c"===e)return new Int8Array(t.buffer)[0];if("C"===e)return t[0];if("f"===e)return new Float32Array(t.buffer)[0];if("H"===e)return Number.parseInt(ne(t).replace(/^0x/,""),16);if("B"===e)return function(e){const t=String.fromCharCode(e[0]),r=Int32Array.from(e.slice(1))[0],n=new Array(r);if(e=e.slice(5),"c"===t){const t=new Int8Array(e.buffer);for(let e=0;e<r;e+=1)n[e]=t[e]}else if("C"===t){const t=new Uint8Array(e.buffer);for(let e=0;e<r;e+=1)n[e]=t[e]}else if("s"===t){const t=new Int16Array(e.buffer);for(let e=0;e<r;e+=1)n[e]=t[e]}else if("S"===t){const t=new Uint16Array(e.buffer);for(let e=0;e<r;e+=1)n[e]=t[e]}else if("i"===t){const t=new Int32Array(e.buffer);for(let e=0;e<r;e+=1)n[e]=t[e]}else if("I"===t){const t=new Uint32Array(e.buffer);for(let e=0;e<r;e+=1)n[e]=t[e]}else{if("f"!==t)throw new Error("unknown type: "+t);{const t=new Float32Array(e.buffer);for(let e=0;e<r;e+=1)n[e]=t[e]}}return n}(t);throw new g("Unrecognized tag type ".concat(e))}function oe(e,t,r,n,a,o,i,s,c){let f=t("BF");const l=t("CF");if(!W(n.parsedContent))throw new Error;let d;d=s>1&&-2===n.parsedContent.refSeqId?t("RI"):n.parsedContent.refSeqId;const h=t("RL");let u=t("AP");r.APdelta&&(u+=i.lastAlignmentStart),i.lastAlignmentStart=u;const m=t("RG");let p,y,w,v;if(r.readNamesIncluded&&(p=ne(t("RN"))),ee.isDetached(l)){const e=t("MF");let n;r.readNamesIncluded||(n=ne(t("RN")),p=n);const a=t("NS"),o=t("NP");(e||a>-1)&&(y={mateFlags:e,mateSequenceId:a,mateAlignmentStart:o,mateReadName:n}),w=t("TS"),te.isUnmapped(e)&&(f=$.setMateUnmapped(f)),te.isOnNegativeStrand(e)&&(f=$.setMateReverseComplemented(f))}else ee.isWithMateDownstream(l)&&(v=t("NF")+c+1);const b=t("TL");if(b<0)throw new g("invalid TL index");const A={},S=r.getTagNames(b),R=S.length;for(let I=0;I<R;I+=1){const t=S[I],n=t.substr(0,2),s=t.substr(2,1),c=r.getCodecForTag(t);if(!c)throw new g("no codec defined for auxiliary tag ".concat(t));const f=c.decode(e,a,o,i);A[n]=ae(s,f)}let _,B,C,M,E;if($.isSegmentUnmapped(f))if(ee.isDecodeSequenceAsStar(l))E=null,M=null;else{const e=new Array(h);for(let r=0;r<e.length;r+=1)e[r]=t("BA");if(E=String.fromCharCode(...e),ee.isPreservingQualityScores(l)){M=new Array(h);for(let r=0;r<e.length;r+=1)M[r]=t("QS")}}else{const e=t("FN");if(e&&(_=function(e,t,r,n,a){let o=0,i=e-1;const s=new Array(t);function c(e){let[t,n]=e;const a=r(n);if("character"===t)return String.fromCharCode(a);if("string"===t){let e="";for(let t=0;t<a.byteLength;t++)e+=String.fromCharCode(a[t]);return e}return"numArray"===t?a.toArray():a}for(let f=0;f<t;f+=1){const e=String.fromCharCode(r("FC")),t=r("FP"),n={B:["character","BA"],S:["string",a>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[e];if(!n)throw new g('invalid read feature code "'.concat(e,'"'));let l=c(n);const d={B:["number","QS"]}[e];d&&(l=[l,c(d)]),o+=t;const h=o;i+=t;const u=i;"D"===e||"N"===e?i+=l:"I"===e||"S"===e?i-=l.length:"i"===e&&(i-=1),s[f]={code:e,pos:h,refPos:u,data:l}}return s}(u,e,t,0,s)),B=h,_)for(const{code:t,data:r}of _)"D"===t||"N"===t?B+=r:"I"===t||"S"===t?B-=r.length:"i"===t&&(B-=1);if(Number.isNaN(B)&&(console.warn("".concat(p||"".concat(d,":").concat(u)," record has invalid read features")),B=h),C=t("MQ"),ee.isPreservingQualityScores(l)){M=new Array(h);for(let e=0;e<M.length;e++)M[e]=t("QS")}}return{readLength:h,sequenceId:d,cramFlags:l,flags:f,alignmentStart:u,readGroupId:m,readName:p,mateToUse:y,templateSize:w,mateRecordNumber:v,readFeatures:_,lengthOnRef:B,mappingQuality:C,qualityScores:M,readBases:E,tags:A}}function ie(e,t,r,n){if(!n)throw new g("could not resolve intra-slice mate pairs, file seems truncated or malformed");const a=!!(n.mate||void 0!==n.mateRecordNumber&&n.mateRecordNumber!==t);r.readName||(r.readName=String(r.uniqueId),n.readName=r.readName),r.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(r.mate.readName=n.readName),n.mate||void 0!==n.mateRecordNumber||(n.mate={sequenceId:r.sequenceId,alignmentStart:r.alignmentStart,uniqueId:r.uniqueId},r.readName&&(n.mate.readName=r.readName)),r.flags|=X.BAM_FPAIRED,n.flags&X.BAM_FUNMAP&&(r.flags|=X.BAM_FMUNMAP),r.flags&X.BAM_FUNMAP&&(n.flags|=X.BAM_FMUNMAP),n.flags&X.BAM_FREVERSE&&(r.flags|=X.BAM_FMREVERSE),r.flags&X.BAM_FREVERSE&&(n.flags|=X.BAM_FMREVERSE),void 0===r.templateLength&&(a?function(e,t,r){const n=function t(r){const n=[r];if(void 0!==r.mateRecordNumber&&r.mateRecordNumber>=0){const a=e[r.mateRecordNumber];if(!a)throw new g("intra-slice mate record not found, this file seems malformed");n.push(...t(a))}return n}(r),a=n.map((e=>e.alignmentStart)),o=n.map((e=>e.alignmentStart+e.readLength-1)),i=Math.max(...o)-Math.min(...a)+1;i>=0&&n.forEach((e=>{if(void 0!==e.templateLength)throw new g("mate pair group has some members that have template lengths already, this file seems malformed");e.templateLength=i}))}(e,0,r):function(e,t){const r=Math.min(e.alignmentStart,t.alignmentStart),n=Math.max(e.alignmentStart+e.readLength-1,t.alignmentStart+t.readLength-1)-r+1;e.templateLength=n,t.templateLength=n}(r,n)),delete r.mateRecordNumber}class se{constructor(e,t,r){this.container=e,this.containerPosition=t,this.file=e.file}async getHeader(){const e=await this.file.getSectionParsers(),t=await this.container.getHeader(),r=await this.file.readBlock(t._endPosition+this.containerPosition);if(void 0===r)throw new Error;if("MAPPED_SLICE_HEADER"===r.contentType){const n=j(r.content,e.cramMappedSliceHeader.parser,0,t._endPosition);return{...r,parsedContent:n}}if("UNMAPPED_SLICE_HEADER"===r.contentType){const n=j(r.content,e.cramUnmappedSliceHeader.parser,0,t._endPosition);return{...r,parsedContent:n}}throw new g("error reading slice header block, invalid content type ".concat(r.contentType))}async getBlocks(){const e=await this.getHeader();let t=e._endPosition;const r=new Array(e.parsedContent.numBlocks);for(let n=0;n<r.length;n+=1){const e=await this.file.readBlock(t);if(void 0===e)throw new Error;r[n]=e,t=r[n]._endPosition}return r}async getCoreDataBlock(){return(await this.getBlocks())[0]}async _getBlocksContentIdIndex(){const e=await this.getBlocks(),t={};return e.forEach((e=>{"EXTERNAL_DATA"===e.contentType&&(t[e.contentId]=e)})),t}async getBlockByContentId(e){return(await this._getBlocksContentIdIndex())[e]}async getReferenceRegion(){const e=(await this.getHeader()).parsedContent;if(!W(e))throw new Error;if(e.refSeqId<0)return;const t=await this.container.getCompressionScheme();if(void 0===t)throw new Error;if(e.refBaseBlockId>=0){const t=await this.getBlockByContentId(e.refBaseBlockId);if(!t)throw new g("embedded reference specified, but reference block does not exist");return{seq:t.data.toString("utf8"),start:e.refSeqStart,end:e.refSeqStart+e.refSeqSpan-1,span:e.refSeqSpan}}if(t.referenceRequired||this.file.fetchReferenceSequenceCallback){if(!this.file.fetchReferenceSequenceCallback)throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");const t=await this.file.fetchReferenceSequenceCallback(e.refSeqId,e.refSeqStart,e.refSeqStart+e.refSeqSpan-1);if(t.length!==e.refSeqSpan)throw new p("seqFetch callback returned a reference sequence of the wrong length");return{seq:t,start:e.refSeqStart,end:e.refSeqStart+e.refSeqSpan-1,span:e.refSeqSpan}}}getAllRecords(){return this.getRecords((()=>!0))}async _fetchRecords(){const{majorVersion:e}=await this.file.getDefinition(),t=await this.container.getCompressionScheme();if(void 0===t)throw new Error;const r=await this.getHeader();if(void 0===r)throw new Error;const n=await this._getBlocksContentIdIndex();if(e>1&&this.file.options.checkSequenceMD5&&W(r.parsedContent)&&r.parsedContent.refSeqId>=0&&"0000000000000000"!==r.parsedContent.md5.join("")){const e=await this.getReferenceRegion();if(e){const{seq:t,start:n,end:a}=e,o=function(e){return O()(e.toUpperCase().replace(/[^\x21-\x7e]/g,""))}(t),i=r.parsedContent.md5.map((e=>(e<16?"0":"")+e.toString(16))).join("");if(o!==i)throw new g("MD5 checksum reference mismatch for ref ".concat(r.parsedContent.refSeqId," pos ").concat(n,"..").concat(a,". recorded MD5: ").concat(i,", calculated MD5: ").concat(o))}}const a=await this.getCoreDataBlock(),o={lastAlignmentStart:W(r.parsedContent)?r.parsedContent.refSeqStart:0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{map:new Map,getCursor(e){let t=this.map.get(e);return void 0===t&&(t={bitPosition:7,bytePosition:0},this.map.set(e,t)),t}}},i=e=>{const r=t.getCodecForDataSeries(e);if(!r)throw new g("no codec defined for ".concat(e," data series"));return r.decode(this,a,n,o)};let s=new Array(r.parsedContent.numRecords);for(let f=0;f<s.length;f+=1)try{const c=oe(this,i,t,r,a,n,o,e,f);s[f]=new re({...c,uniqueId:r.contentPosition+r.parsedContent.recordCounter+f+1})}catch(c){if(c instanceof Q){console.warn("read attempted beyond end of buffer, file seems truncated."),s=s.filter((e=>!!e));break}throw c}for(let f=0;f<s.length;f+=1){const{mateRecordNumber:e}=s[f];void 0!==e&&e>=0&&ie(s,f,s[f],s[e])}return s}async getRecords(e){const t=this.container.filePosition+this.containerPosition;let r=this.file.featureCache.get(t.toString());r||(r=this._fetchRecords(),this.file.featureCache.set(t.toString(),r));const n=(await r).filter(e);if(n.length&&this.file.fetchReferenceSequenceCallback){const e=await this.getHeader();if(W(e.parsedContent)&&(e.parsedContent.refSeqId>=0||-2===e.parsedContent.refSeqId)){const t=e.parsedContent.refSeqId>=0?e.parsedContent.refSeqId:void 0,r=await this.container.getCompressionScheme();if(void 0===r)throw new Error;const a={};for(let e=0;e<n.length;e+=1){const r=void 0!==t?t:n[e].sequenceId;let o=a[r];o||(o={id:r,start:n[e].alignmentStart,end:-1/0,seq:null},a[r]=o);const i=n[e].alignmentStart+(n[e].lengthOnRef||n[e].readLength)-1;i>o.end&&(o.end=i),n[e].alignmentStart<o.start&&(o.start=n[e].alignmentStart)}await Promise.all(Object.values(a).map((async e=>{-1!==e.id&&e.start<=e.end&&(e.seq=await this.file.fetchReferenceSequenceCallback(e.id,e.start,e.end))})));for(let e=0;e<n.length;e+=1){const o=a[void 0!==t?t:n[e].sequenceId];if(o&&o.seq){const t=o.seq;n[e].addReferenceSequence({...o,seq:t},r)}}}}return n}}"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach((e=>G(se,e)));class ce{constructor(e,t){this.parameters=e,this.dataType=t}}class fe extends ce{constructor(e,t,r){if(super(e,t),this.instantiateCodec=r,"byteArray"!==t)throw new TypeError("byteArrayLength does not support data type ".concat(t))}decode(e,t,r,n){const a=this._getLengthCodec().decode(e,t,r,n),o=this._getDataCodec(),i=new Uint8Array(a);for(let s=0;s<a;s+=1)i[s]=o.decode(e,t,r,n);return i}_getLengthCodec(){const e=this.parameters.lengthsEncoding;return this.instantiateCodec(e,"int")}_getDataCodec(){const e=this.parameters.valuesEncoding;return this.instantiateCodec(e,"byte")}}"_getLengthCodec _getDataCodec".split(" ").forEach((e=>G(fe,e)));const le={1:class extends ce{constructor(e,t){if(super(e,t),"int"===this.dataType)this._decodeData=this._decodeInt;else{if("byte"!==this.dataType)throw new u("".concat(this.dataType," decoding not yet implemented by EXTERNAL codec"));this._decodeData=this._decodeByte}}decode(e,t,r,n){const{blockContentId:a}=this.parameters,o=r[a];if(!o)throw new g("no block found with content ID ".concat(a));const i=n.externalBlocks.getCursor(a);return this._decodeData(o,i)}_decodeInt(e,t){const[r,n]=function(e,t){let r=t;const n=e[r];let a;if(n<128?(a=n,r+=1):n<192?(a=16383&(n<<8|e[r+1]),r+=2):n<224?(a=2097151&(n<<16|e[r+1]<<8|e[r+2]),r+=3):n<240?(a=268435455&(n<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]),r+=4):(a=(15&n)<<28|e[r+1]<<20|e[r+2]<<12|e[r+3]<<4|15&e[r+4],r+=5),r>e.length)throw new Q("Attempted to read beyond end of buffer; this file seems truncated.");return[a,r-t]}(e.content,t.bytePosition);return t.bytePosition=t.bytePosition+n,r}_decodeByte(e,t){if(t.bytePosition>=e.content.length)throw new Q("attempted to read beyond end of block. this file seems truncated.");return e.content[t.bytePosition++]}},3:class extends ce{constructor(e,t){if(super(e,t),this.codes={},this.codeBook={},this.sortedByValue=[],this.sortedCodes=[],this.sortedValuesByBitCode=[],this.sortedBitCodes=[],this.sortedBitLengthsByBitCode=[],this.bitCodeToValue=[],!["byte","int"].includes(this.dataType))throw new TypeError("".concat(this.dataType," decoding not yet implemented by HUFFMAN_INT codec"));this.buildCodeBook(),this.buildCodes(),this.buildCaches(),0===this.sortedCodes[0].bitLength&&(this._decode=this._decodeZeroLengthCode)}buildCodeBook(){let e=new Array(this.parameters.numCodes);for(let t=0;t<this.parameters.numCodes;t+=1)e[t]={symbol:this.parameters.symbols[t],bitLength:this.parameters.bitLengths[t]};e=e.sort(((e,t)=>e.bitLength-t.bitLength||e.symbol-t.symbol)),this.codeBook={},e.forEach((e=>{this.codeBook[e.bitLength]||(this.codeBook[e.bitLength]=[]),this.codeBook[e.bitLength].push(e.symbol)}))}buildCodes(){this.codes={};let e=0,t=-1;Object.entries(this.codeBook).forEach((r=>{let[n,a]=r;const o=parseInt(n,10);a.forEach((r=>{const n={bitLength:o,value:r,bitCode:0};t+=1;const a=o-e;if(t<<=a,n.bitCode=t,e+=a,function(e){let t=e-(e>>1)&1431655765;return t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}(t)>o)throw new g("Symbol out of range");this.codes[r]=n}))}))}buildCaches(){this.sortedCodes=Object.values(this.codes).sort(((e,t)=>e.bitLength-t.bitLength||e.bitCode-t.bitCode)),this.sortedByValue=Object.values(this.codes).sort(((e,t)=>e.value-t.value)),this.sortedValuesByBitCode=this.sortedCodes.map((e=>e.value)),this.sortedBitCodes=this.sortedCodes.map((e=>e.bitCode)),this.sortedBitLengthsByBitCode=this.sortedCodes.map((e=>e.bitLength));const e=Math.max(...this.sortedBitCodes);this.bitCodeToValue=new Array(e+1).fill(-1);for(let t=0;t<this.sortedBitCodes.length;t+=1)this.bitCodeToValue[this.sortedCodes[t].bitCode]=t}decode(e,t,r,n){return this._decode(e,t,n.coreBlock)}_decodeZeroLengthCode(){return this.sortedCodes[0].value}_decode(e,t,r){const n=t.content;let a=0,o=0;for(let i=0;i<this.sortedCodes.length;i+=1){const e=this.sortedCodes[i].bitLength;o<<=e-a,o|=V(n,r,e-a),a=e;{const t=this.bitCodeToValue[o];if(t>-1&&this.sortedBitLengthsByBitCode[t]===e)return this.sortedValuesByBitCode[t];for(let r=i;this.sortedCodes[r+1].bitLength===e&&r<this.sortedCodes.length;r+=1)i+=1}}throw new g("Huffman symbol not found.")}},4:fe,5:class extends ce{constructor(e,t){if(super(e,t),"byteArray"!==t)throw new TypeError("byteArrayStop codec does not support data type ".concat(t))}decode(e,t,r,n){const{blockContentId:a}=this.parameters,o=r[a];if(!o)throw new g("no block found with content ID ".concat(a));const i=n.externalBlocks.getCursor(a);return this._decodeByteArray(o,i)}_decodeByteArray(e,t){const r=e.content,{stopByte:n}=this.parameters,a=t.bytePosition;let o=t.bytePosition;for(;r[o]!==n&&o<r.length;){if(o===r.length)throw new Q("byteArrayStop reading beyond length of data buffer?");o+=1}return t.bytePosition=o+1,r.subarray(a,o)}},6:class extends ce{constructor(e,t){if(super(e,t),"int"!==this.dataType)throw new u("".concat(this.dataType," decoding not yet implemented by BETA codec"))}decode(e,t,r,n){return V(t.content,n.coreBlock,this.parameters.length)-this.parameters.offset}},7:class extends ce{constructor(e,t){if(super(e,t),"int"!==this.dataType)throw new u("".concat(this.dataType," decoding not yet implemented by SUBEXP codec"))}decode(e,t,r,n){let a,o,i=0;for(;V(t.content,n.coreBlock,1);)i+=1;if(0===i)a=this.parameters.K,o=V(t.content,n.coreBlock,a);else{a=i+this.parameters.K-1;o=1<<a|V(t.content,n.coreBlock,a)}return o-this.parameters.offset}},9:class extends ce{constructor(e,t){if(super(e,t),"int"!==this.dataType)throw new u("".concat(this.dataType," decoding not yet implemented by GAMMA codec"))}decode(e,t,r,n){let a=1;for(;0===V(t.content,n.coreBlock,1);)a+=1;return(V(t.content,n.coreBlock,a-1)|1<<a-1)-this.parameters.offset}}};function de(e,t){const r=(n="ignore"===t?0:e.codecId,le[n]);var n;if(!r)throw new u("no codec implemented for codec ID ".concat(e.codecId));return new r(e.parameters,t,de)}const he={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int"};class ue{constructor(e){this.dataSeriesCodecCache={},this.tagCodecCache={},this.tagEncoding={},this.readNamesIncluded=e.preservation.RN,this.APdelta=e.preservation.AP,this.referenceRequired=!!e.preservation.RR,this.tagIdsDictionary=e.preservation.TD,this.substitutionMatrix=function(e){const t=new Array(5);for(let r=0;r<5;r+=1)t[r]=new Array(4);return t[0][e[0]>>6&3]="C",t[0][e[0]>>4&3]="G",t[0][e[0]>>2&3]="T",t[0][e[0]>>0&3]="N",t[1][e[1]>>6&3]="A",t[1][e[1]>>4&3]="G",t[1][e[1]>>2&3]="T",t[1][e[1]>>0&3]="N",t[2][e[2]>>6&3]="A",t[2][e[2]>>4&3]="C",t[2][e[2]>>2&3]="T",t[2][e[2]>>0&3]="N",t[3][e[3]>>6&3]="A",t[3][e[3]>>4&3]="C",t[3][e[3]>>2&3]="G",t[3][e[3]>>0&3]="N",t[4][e[4]>>6&3]="A",t[4][e[4]>>4&3]="C",t[4][e[4]>>2&3]="G",t[4][e[4]>>0&3]="T",t}(e.preservation.SM),this.dataSeriesEncoding=e.dataSeriesEncoding,this.tagEncoding=e.tagEncoding,this.preservation=e.preservation,this._size=e._size,this._endPosition=e._endPosition}getCodecForTag(e){if(!this.tagCodecCache[e]){const t=this.tagEncoding[e];t&&(this.tagCodecCache[e]=de(t,"byteArray"))}return this.tagCodecCache[e]}getTagNames(e){return this.tagIdsDictionary[e]}getCodecForDataSeries(e){let t=this.dataSeriesCodecCache[e];if(void 0===t){const r=this.dataSeriesEncoding[e];if(r){const n=he[e];if(!n)throw new g("data series name ".concat(e," not defined in file compression header"));t=de(r,n),this.dataSeriesCodecCache[e]=t}}return t}toJSON(){const e={};return Object.keys(this).forEach((t=>{/Cache$/.test(t)||(e[t]=this[t])})),e}}var ge=r(35051).lW;class me{constructor(e,t){this.file=e,this.filePosition=t}getHeader(){return this._readContainerHeader(this.filePosition)}async getCompressionHeaderBlock(){if(!(await this.getHeader()).numRecords)return null;const e=await this.file.getSectionParsers(),t=await this.getFirstBlock();if(void 0===t)return;if("COMPRESSION_HEADER"!==t.contentType)throw new g("invalid content type ".concat(t.contentType," in what is supposed to be the compression header block"));const r=j(t.content,e.cramCompressionHeader.parser,0,t.contentPosition);return{...t,parsedContent:r}}async getFirstBlock(){const e=await this.getHeader();return this.file.readBlock(e._endPosition)}async getCompressionScheme(){const e=await this.getCompressionHeaderBlock();if(e)return new ue(e.parsedContent)}getSlice(e,t){return new se(this,e,t)}async _readContainerHeader(e){const t=await this.file.getSectionParsers(),{cramContainerHeader1:r,cramContainerHeader2:n}=t,{size:a}=await this.file.stat();if(e>=a)return;const o=ge.allocUnsafe(r.maxLength);await this.file.read(o,0,r.maxLength,e);const i=j(o,r.parser),s=-128&(c=i.numLandmarks)?-16384&c?-2097152&c?-268435456&c?5:4:3:2:1;var c;if(e+i.length>=a)return void console.warn("".concat(this.file,": container header at ").concat(e," indicates that the container has length ").concat(i.length,", which extends beyond the length of the file. Skipping this container."));const f=ge.allocUnsafe(n.maxLength(i.numLandmarks));await this.file.read(f,0,n.maxLength(i.numLandmarks),e+i._size-s);const l=j(f,n.parser);this.file.validateChecksums&&void 0!==l.crc32&&await this.file.checkCrc32(e,i._size+l._size-s-4,l.crc32,"container header beginning at position ".concat(e));return Object.assign(i,l,{_size:i._size+l._size-s,_endPosition:i._size+l._size-s+e})}}"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach((e=>G(me,e)));var pe=r(56102);var ye=r(37168);function we(e){const{protocol:t,pathname:r}=pe.parse(e);return"file:"===t?new ye.S9(unescape(function(e){if(null===e||void 0===e)throw new Error("Value must not be nullish.");return e}(r))):new ye.kC(e)}function ve(e,t,r){if(r)return r;if(e)return we(e);if(t)return new ye.S9(t);throw new Error("no url, path, or filehandle provided, cannot open")}function be(e){const t=e.split(/\r?\n/),r=[];return t.forEach((e=>{const[t,...n]=e.split(/\t/),a=n.map((e=>{const[t,r]=e.split(":",2);return{tag:t,value:r}}));t&&r.push({tag:t.substr(1),data:a})})),r}var Ae=r(35051).lW;class Se{constructor(e){var t;if(this.file=ve(e.url,e.path,e.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=e.seqFetch,this.options={checkSequenceMD5:e.checkSequenceMD5,cacheSize:null!==(t=e.cacheSize)&&void 0!==t?t:2e4},this.featureCache=new(f())({maxSize:this.options.cacheSize}),function(){const e=new Uint32Array([287454020]),t=new Uint8Array(e.buffer);return 68===t[0]?0:17===t[0]?1:2}()>0)throw new Error("Detected big-endian machine, may be unable to run")}read(e,t,r,n){return this.file.read(e,t,r,n)}stat(){return this.file.stat()}async getDefinition(){const e=Ae.allocUnsafe(F.maxLength);await this.file.read(e,0,F.maxLength,0);const t=F.parser.parse(e).result;if(2!==t.majorVersion&&3!==t.majorVersion)throw new u("CRAM version ".concat(t.majorVersion," not supported"));return t}async getSamHeader(){const e=await this.getContainerById(0);if(!e)throw new g("file contains no containers");const t=await e.getFirstBlock();if(void 0===t)return be("");const r=t.content,n=r.readInt32LE(0),a=r.toString("utf8",4,4+n);return this.header=a,be(a)}async getHeaderText(){return await this.getSamHeader(),this.header}async getSectionParsers(){const{majorVersion:e}=await this.getDefinition();return function(e){const t=Object.assign({},D);return Object.keys(N).forEach((r=>{t[r]=N[r](e)})),t}(e)}async getContainerById(e){const t=await this.getSectionParsers();let r=t.cramFileDefinition.maxLength;const{size:n}=await this.file.stat(),{cramContainerHeader1:a}=t;let o;for(let i=0;i<=e;i+=1){if(r+a.maxLength+8>=n)return;o=this.getContainerAtPosition(r);const t=await o.getHeader();if(!t)throw new g("container ".concat(e," not found in file"));if(0===i){r=t._endPosition;for(let e=0;e<t.numBlocks;e+=1){const e=await this.readBlock(r);if(void 0===e)return;r=e._endPosition}}else r+=t._size+t.length}return o}async checkCrc32(e,t,r,n){const a=Ae.allocUnsafe(t);await this.file.read(a,0,t,e);const o=s().unsigned(a);if(o!==r)throw new g("crc mismatch in ".concat(n,": recorded CRC32 = ").concat(r,", but calculated CRC32 = ").concat(o))}async containerCount(){const e=await this.getSectionParsers(),{size:t}=await this.file.stat(),{cramContainerHeader1:r}=e;let n=0,a=e.cramFileDefinition.maxLength;for(;a+r.maxLength+8<t;){const e=await this.getContainerAtPosition(a).getHeader();if(!e)break;if(0===n){a=e._endPosition;for(let t=0;t<e.numBlocks;t+=1){const e=await this.readBlock(a);if(void 0===e)return;a=e._endPosition}}else a+=e._size+e.length;n+=1}return n}getContainerAtPosition(e){return new me(this,e)}async readBlockHeader(e){const t=await this.getSectionParsers(),{cramBlockHeader:r}=t,{size:n}=await this.file.stat();if(e+r.maxLength>=n)return;const a=Ae.allocUnsafe(r.maxLength);return await this.file.read(a,0,r.maxLength,e),j(a,r.parser,0,e)}async _parseSection(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.maxLength,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(a)r=a;else{const{size:e}=await this.file.stat();if(t+n>=e)return;r=Ae.allocUnsafe(n),await this.file.read(r,0,n,t)}const o=j(r,e.parser,0,t);if(o._size!==n)throw new g("section read error: requested size ".concat(n," does not equal parsed size ").concat(o._size));return o}_uncompress(e,t,r){if("gzip"===e){o(t).copy(r)}else if("bzip2"===e){const e=d().array(t);let n,a=d().header(e),o=0;do{n=d().decompress(e,a),-1!=n&&(Ae.from(n).copy(r,o),o+=n.length,a-=n.length)}while(-1!=n)}else if("rans"===e)!function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e.length)return t.fill(0),t;const n=new M(e,r),a=n.get();if(0!==a&&1!==a)throw new g("Invalid rANS order ".concat(a));if(n.getInt()!==n.remaining()-4)throw new g("Incorrect input length.");const o=n.getInt(),i=new M(t||_.allocUnsafe(o));if(i.length<o)throw new g("Output buffer too small to fit ".concat(o," bytes."));switch(a){case 0:return B(n,i);case 1:return C(n,i);default:throw new g("Invalid rANS order: ".concat(a))}}(t,r);else if("rans4x16"===e)T().r4x16_uncompress(t,r);else if("arith"===e)T().arith_uncompress(t,r);else if("fqzcomp"===e)T().fqzcomp_uncompress(t,r);else{if("tok3"!==e)throw new u("".concat(e," decompression not yet implemented"));T().tok3_uncompress(t,r)}}async readBlock(e){const{majorVersion:t}=await this.getDefinition(),r=await this.getSectionParsers(),n=await this.readBlockHeader(e);if(void 0===n)return;const a=n._endPosition,o=Ae.allocUnsafe(n.uncompressedSize),i={...n,_endPosition:a,contentPosition:a,content:o};if("raw"!==n.compressionMethod){const e=Ae.allocUnsafe(n.compressedSize);await this.read(e,0,n.compressedSize,a),this._uncompress(n.compressionMethod,e,o)}else await this.read(o,0,n.uncompressedSize,a);if(t>=3){const t=await this._parseSection(r.cramBlockCrc32,a+n.compressedSize);if(void 0===t)return;i.crc32=t.crc32,this.validateChecksums&&await this.checkCrc32(e,n._size+n.compressedSize,t.crc32,"block data"),i._endPosition=t._endPosition,i._size=i.compressedSize+r.cramBlockCrc32.maxLength}else i._endPosition=a+i.compressedSize,i._size=i.compressedSize;return i}}"getDefinition getSectionParsers getSamHeader".split(" ").forEach((e=>G(Se,e)));const Re=Se;class _e{constructor(e){if(e.cram?this.cram=e.cram:this.cram=new Re({url:e.cramUrl,path:e.cramPath,filehandle:e.cramFilehandle,seqFetch:e.seqFetch,checkSequenceMD5:e.checkSequenceMD5,cacheSize:e.cacheSize}),!(this.cram instanceof Re))throw new Error("invalid arguments: no cramfile");if(this.index=e.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=e.fetchSizeLimit||3e6}async getRecordsForRange(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n.viewAsPairs=n.viewAsPairs||!1,n.pairAcrossChr=n.pairAcrossChr||!1,n.maxInsertSize=n.maxInsertSize||2e5,"string"===typeof e)throw new u("string sequence names not yet supported");const a=e,o=await this.index.getEntriesForRange(a,t,r),i=o.map((e=>e.sliceBytes)).reduce(((e,t)=>e+t),0);if(i>this.fetchSizeLimit)throw new m("data size of ".concat(i.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));const s=n=>n.sequenceId===e&&n.alignmentStart<=r&&void 0!==n.lengthOnRef&&n.alignmentStart+n.lengthOnRef-1>=t,c=await Promise.all(o.map((e=>this.getRecordsInSlice(e,s))));let f=Array.prototype.concat(...c);if(n.viewAsPairs){const e={},t={};for(let n=0;n<f.length;n+=1){const r=f[n].readName;if(void 0===r)throw new Error;const a=f[n].uniqueId;e[r]||(e[r]=0),e[r]+=1,t[a]=1}const r={};Object.entries(e).forEach((e=>{let[t,n]=e;1===n&&(r[t]=!0)}));const o=[];for(let u=0;u<f.length;u+=1){const e=f[u],t=e.readName;if(void 0===t)throw new Error;if(r[t]&&e.mate&&(e.mate.sequenceId===a||n.pairAcrossChr)&&Math.abs(e.alignmentStart-e.mate.alignmentStart)<n.maxInsertSize){const t=this.index.getEntriesForRange(e.mate.sequenceId,e.mate.alignmentStart,e.mate.alignmentStart+1);o.push(t)}}const i=await Promise.all(o);let s=[];for(let n=0;n<i.length;n+=1)s.push(...i[n]);s=s.sort(((e,t)=>e.toString().localeCompare(t.toString()))).filter(((e,t,r)=>!t||e.toString()!==r[t-1].toString()));const c=[],l=[],d=s.map((e=>e.sliceBytes)).reduce(((e,t)=>e+t),0);if(d>this.fetchSizeLimit)throw new Error("mate data size of ".concat(d.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));s.forEach((e=>{let n=this.cram.featureCache.get(e.toString());n||(n=this.getRecordsInSlice(e,(()=>!0)),this.cram.featureCache.set(e.toString(),n)),c.push(n);const a=n.then((e=>{const n=[];for(let a=0;a<e.length;a+=1){const o=e[a];if(void 0===o.readName)throw new Error;r[o.readName]&&!t[o.uniqueId]&&n.push(o)}return n}));l.push(a)}));const h=await Promise.all(l);if(h.length){const e=h.reduce(((e,t)=>e.concat(t)));f=f.concat(e)}}return f}getRecordsInSlice(e,t){let{containerStart:r,sliceStart:n,sliceBytes:a}=e;return this.cram.getContainerAtPosition(r).getSlice(n,a).getRecords(t)}hasDataForReferenceSequence(e){return this.index.hasDataForReferenceSequence(e)}}var Be=r(62979),Ce=r.n(Be);function Me(e,t){if(t.some((e=>void 0===e)))throw new g("invalid .crai index file");const[r,n,a,o,i,s]=t;e[r]||(e[r]=[]),e[r].push({start:n,span:a,containerStart:o,sliceStart:i,sliceBytes:s})}class Ee{constructor(e){this.filehandle=ve(e.url,e.path,e.filehandle),this._parseCache=new(Ce())({cache:new(f())({maxSize:1}),fill:(e,t)=>this.parseIndex()})}parseIndex(){const e={};return this.filehandle.readFile().then((e=>31===e[0]&&139===e[1]?o(e):e)).then((t=>{if(t.length>4&&21578050===t.readUInt32LE(0))throw new g("invalid .crai index file. note: file appears to be a .bai index. this is technically legal but please open a github issue if you need support");let r=[],n="";for(let a=0;a<t.length;a+=1){const o=t[a];if(o>=48&&o<=57||!n&&45===o)n+=String.fromCharCode(o);else if(9===o)r.push(Number.parseInt(n,10)),n="";else if(10===o)r.push(Number.parseInt(n,10)),n="",Me(e,r),r=[];else if(13!==o&&32!==o)throw new g("invalid .crai index file")}return n&&r.push(Number.parseInt(n,10)),6===r.length&&Me(e,r),Object.entries(e).forEach((t=>{let[r,n]=t;e[r]=n.sort(((e,t)=>e.start-t.start||e.span-t.span))})),e}))}getIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._parseCache.get("index",null,e.signal)}async hasDataForReferenceSequence(e){return!!(await this.getIndex())[e]}async getEntriesForRange(e,t,r){const n=(await this.getIndex())[e];if(!n)return[];const a=e=>{const n=e.start,a=e.start+e.span;return n>r?-1:a<=t?1:0},o=[];for(let i=0;i<n.length;i+=1)0===a(n[i])&&o.push(n[i]);return o}}},95165:(e,t,r)=>{var n=r(35051).lW;const a=r(15004),o=r(63364),i=r(36440),s=r(36972),c=128;e.exports=class{decode(e){return this.stream=new o(e),this.decodeStream(this.stream)}decodeStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=this.stream.ReadByte();16&r||(t=this.stream.ReadUint7());var n,a=t,o=1&r;if(8&r)return this.decodeStripe(this.stream,t);r&c&&([n,a]=this.decodePackMeta(this.stream));if(32&r)var i=this.decodeCat(this.stream,a);else if(4&r)i=this.decodeExt(this.stream,a);else if(64&r)i=o?this.decodeRLE1(this.stream,a):this.decodeRLE0(this.stream,a);else i=o?this.decode1(this.stream,a):this.decode0(this.stream,a);return r&c&&(i=this.decodePack(i,n,t)),i}encode(e,t){if(this.stream=new o("",0,1.1*e.length+100),this.stream.WriteByte(t),16&t||this.stream.WriteUint7(e.length),8&t)return n.concat([this.stream.buf.slice(0,this.stream.pos),this.encodeStripe(this.stream,e,t>>8)]);var r,a=1&t,i=e.length;return t&c&&([r,e,i]=this.encodePack(e)),t&c&&this.stream.WriteStream(r),64&t?a?this.encodeRLE1(e,i,this.stream):this.encodeRLE0(e,i,this.stream):a?this.encode1(e,i,this.stream):this.encode0(e,i,this.stream)}decode0(e,t){var r=new n.allocUnsafe(t),o=e.ReadByte();0==o&&(o=256);var s=new i(o),c=new a(e);c.RangeStartDecode(e);for(var f=0;f<t;f++)r[f]=s.ModelDecode(e,c);return r}encode0(e,t,r){for(var n=0,o=0;o<t;o++)n<e[o]&&(n=e[o]);n++;var s=new i(n);r.WriteByte(n);var c=new a(r);for(o=0;o<t;o++)s.ModelEncode(r,c,e[o]);return c.RangeFinishEncode(r),r.buf.slice(0,r.pos)}decode1(e,t){var r=new n.allocUnsafe(t),o=e.ReadByte();0==o&&(o=256);for(var s=new Array(o),c=0;c<o;c++)s[c]=new i(o);var f=new a(e);f.RangeStartDecode(e);var l=0;for(c=0;c<t;c++)r[c]=s[l].ModelDecode(e,f),l=r[c];return r}encode1(e,t,r){for(var n=0,o=0;o<t;o++)n<e[o]&&(n=e[o]);n++;var s=new Array(n);for(o=0;o<n;o++)s[o]=new i(n);r.WriteByte(n);var c=new a(r),f=0;for(o=0;o<t;o++)s[f].ModelEncode(r,c,e[o]),f=e[o];return c.RangeFinishEncode(r),r.buf.slice(0,r.pos)}decodeExt(e,t){var r=new n.allocUnsafe(t),a=s.array(e.buf.slice(e.pos)),o=s.header(a),i=0;do{var c=s.decompress(a,o);-1!=c&&(n.from(c).copy(r,i),i+=c.length,o-=c.length)}while(-1!=c);return r}encodeExt(e,t){}decodeRLE0(e,t){var r=new n.allocUnsafe(t),o=e.ReadByte();0==o&&(o=256);for(var s=new i(o),c=new Array(258),f=0;f<=257;f++)c[f]=new i(4);var l=new a(e);l.RangeStartDecode(e);for(f=0;f<t;){r[f]=s.ModelDecode(e,l);for(var d=c[r[f]].ModelDecode(e,l),h=d,u=256;3==d;)d=c[u].ModelDecode(e,l),u=257,h+=d;for(var g=1;g<=h;g++)r[f+g]=r[f];f+=h+1}return r}encodeRLE0(e,t,r){for(var n=0,o=0;o<t;o++)n<e[o]&&(n=e[o]);n++;var s=new i(n),c=new Array(258);for(o=0;o<=257;o++)c[o]=new i(4);r.WriteByte(n);var f=new a(r);for(o=0;o<t;){s.ModelEncode(r,f,e[o]);for(var l=1;o+l<t&&e[o+l]==e[o];)l++;l--;var d=e[o];e[o];o+=l+1;var h=l>=3?3:l;for(c[d].ModelEncode(r,f,h),l-=h,d=256;3==h;)h=l>=3?3:l,c[d].ModelEncode(r,f,h),d=257,l-=h}return f.RangeFinishEncode(r),r.buf.slice(0,r.pos)}decodeRLE1(e,t){var r=new n.allocUnsafe(t),o=e.ReadByte();0==o&&(o=256);for(var s=new Array(o),c=0;c<o;c++)s[c]=new i(o);var f=new Array(258);for(c=0;c<=257;c++)f[c]=new i(4);var l=new a(e);l.RangeStartDecode(e);var d=0;for(c=0;c<t;){r[c]=s[d].ModelDecode(e,l),d=r[c];for(var h=f[r[c]].ModelDecode(e,l),u=h,g=256;3==h;)h=f[g].ModelDecode(e,l),g=257,u+=h;for(var m=1;m<=u;m++)r[c+m]=r[c];c+=u+1}return r}encodeRLE1(e,t,r){for(var n=0,o=0;o<t;o++)n<e[o]&&(n=e[o]);n++;var s=new Array(n);for(o=0;o<n;o++)s[o]=new i(n);var c=new Array(258);for(o=0;o<=257;o++)c[o]=new i(4);r.WriteByte(n);for(var f=new a(r),l=(o=0,0);o<t;){s[l].ModelEncode(r,f,e[o]);for(var d=1;o+d<t&&e[o+d]==e[o];)d++;d--;var h=e[o];l=e[o],o+=d+1;var u=d>=3?3:d;for(c[h].ModelEncode(r,f,u),d-=u,h=256;3==u;)u=d>=3?3:d,c[h].ModelEncode(r,f,u),h=257,d-=u}return f.RangeFinishEncode(r),r.buf.slice(0,r.pos)}decodePackMeta(e){this.nsym=e.ReadByte();for(var t=new Array(this.nsym),r=0;r<this.nsym;r++)t[r]=e.ReadByte();return[t,e.ReadUint7()]}decodePack(e,t,r){var a=new n.allocUnsafe(r);if(this.nsym<=1)for(var o=0;o<r;o++)a[o]=t[0];else if(this.nsym<=2){o=0;for(var i=0;o<r;o++){if(o%8==0)var s=e[i++];a[o]=t[1&s],s>>=1}}else if(this.nsym<=4)for(o=0,i=0;o<r;o++){if(o%4==0)s=e[i++];a[o]=t[3&s],s>>=2}else{if(!(this.nsym<=16))return e;for(o=0,i=0;o<r;o++){if(o%2==0)s=e[i++];a[o]=t[15&s],s>>=4}}return a}packMeta(e){for(var t=new o("",0,1024),r=new Array(256),n=0;n<e.length;n++)r[e[n]]=1;var a=0;for(n=0;n<256;n++)r[n]&&(r[n]=++a);t.WriteByte(a);for(n=0;n<256;n++)r[n]&&(t.WriteByte(n),r[n]--);return[t,r,a]}encodePack(e){var t,r,a;[t,r,a]=this.packMeta(e);var o=e.length,i=0;if(a<=1)return t.WriteUint7(0),[t,new n.allocUnsafe(0),0];if(a<=2){for(var s=new n.allocUnsafe(Math.floor((o+7)/8)),c=(i=0,0);i<(-8&o);i+=8,c++)s[c]=(r[e[i+0]]<<0)+(r[e[i+1]]<<1)+(r[e[i+2]]<<2)+(r[e[i+3]]<<3)+(r[e[i+4]]<<4)+(r[e[i+5]]<<5)+(r[e[i+6]]<<6)+(r[e[i+7]]<<7);if(i<o){s[c]=0;for(var f=0;i<o;)s[c]|=r[e[i++]]<<f,f++;c++}return t.WriteUint7(c),[t,s,s.length]}if(a<=4){for(s=new n.allocUnsafe(Math.floor((o+3)/4)),i=0,c=0;i<(-4&o);i+=4,c++)s[c]=(r[e[i+0]]<<0)+(r[e[i+1]]<<2)+(r[e[i+2]]<<4)+(r[e[i+3]]<<6);if(i<o){s[c]=0;for(f=0;i<o;)s[c]|=r[e[i++]]<<f,f+=2;c++}return t.WriteUint7(c),[t,s,s.length]}if(a<=16){for(s=new n.allocUnsafe(Math.floor((o+1)/2)),i=0,c=0;i<(-2&o);i+=2,c++)s[c]=(r[e[i+0]]<<0)+(r[e[i+1]]<<4);return i<o&&(s[c++]=r[e[i++]]),t.WriteUint7(c),[t,s,s.length]}return t.WriteUint7(e.length),[t,e,e.length]}encodeStripe(e,t,r){0==r&&(r=4);for(var n=new Array(r),a=new Array(r),i=0;i<r;i++)a[i]=Math.floor(t.length/r)+(t.length%r>i),n[i]=new Array(a[i]);for(var s=0,c=0;c<t.length;c+=r,s++)for(var f=0;f<r;f++)s<n[f].length&&(n[f][s]=t[c+f]);var l=new Array(r),d=0;for(i=0;i<r;i++){var h=this.encode(n[i],0),u=this.encode(n[i],1);l[i]=u.length<h.length?u:h,d+=l[i].length}var g=new o("",0,d+5*r+1);g.WriteByte(r);for(i=0;i<r;i++)g.WriteUint7(l[i].length);for(i=0;i<r;i++)g.WriteData(l[i],l[i].length);return g.buf.slice(0,g.buf.pos)}decodeStripe(e,t){for(var r=e.ReadByte(),a=new Array(r),o=new Array(r),i=0;i<r;i++)a[i]=e.ReadUint7();var s=new Array(r);for(i=0;i<r;i++)o[i]=Math.floor(t/r)+(t%r>i),s[i]=this.decodeStream(e,o[i]);var c=new n.allocUnsafe(t);for(i=0;i<r;i++)for(var f=0;f<o[i];f++)c[f*r+i]=s[i][f];return c}decodeCat(e,t){for(var r=new n.allocUnsafe(t),a=0;a<t;a++)r[a]=e.ReadByte();return r}}},15004:e=>{e.exports=class{constructor(e){this.low=0,this.range=4294967295,this.code=0,this.FFnum=0,this.carry=0,this.cache=0}RangeStartDecode(e){for(var t=0;t<5;t++)this.code=(this.code<<8)+e.ReadByte();this.code&=4294967295,this.code>>>=0}RangeGetFrequency(e){return this.range=Math.floor(this.range/e),Math.floor(this.code/this.range)}RangeDecode(e,t,r,n){for(this.code-=t*this.range,this.range*=r;this.range<1<<24;)this.range*=256,this.code=256*this.code+e.ReadByte()}RangeShiftLow(e){if(this.low<4278190080|this.carry){for(e.WriteByte(this.cache+this.carry);this.FFnum;)e.WriteByte(this.carry-1),this.FFnum--;this.cache=this.low>>>24,this.carry=0}else this.FFnum++;this.low<<=8,this.low>>>=0}RangeEncode(e,t,r,n){var a=this.low;for(this.range=Math.floor(this.range/n),this.low+=t*this.range,this.low>>>=0,this.range*=r,this.low<a&&(0!=this.carry&&console.log("ERROR: Multiple carry"),this.carry=1);this.range<1<<24;)this.range*=256,this.RangeShiftLow(e)}RangeFinishEncode(e){for(var t=0;t<5;t++)this.RangeShiftLow(e)}}},36440:e=>{e.exports=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;this.total_freq=e,this.max_sym=e-1,this.S=new Array,this.F=new Array;for(var t=0;t<=this.max_sym;t++)this.S[t]=t,this.F[t]=1}ModelDecode(e,t){for(var r=t.RangeGetFrequency(this.total_freq),n=0,a=0;n+this.F[a]<=r;)n+=this.F[a++];t.RangeDecode(e,n,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();var o=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var i=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=i,i=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=i}return o}ModelRenormalise(){this.total_freq=0;for(var e=0;e<=this.max_sym;e++)this.F[e]-=Math.floor(this.F[e]/2),this.total_freq+=this.F[e]}ModelEncode(e,t,r){for(var n=0,a=0;this.S[a]!=r;a++)n+=this.F[a];t.RangeEncode(e,n,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();r=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var o=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=o,o=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=o}}}},45140:(e,t,r)=>{var n=r(35051).lW,a=r(3995);const o=r(63364),i=r(36440),s=r(15004);function c(e,t,r){for(var n=0,a=0,o=-1,i=new Array(1024);a<r;){var s=e.ReadByte();if(i[n++]=s,a+=s,s==o){var c=e.ReadByte();for(a+=s*c;c--;)i[n++]=s}o=s}var f=0;for(n=0,a=0;a<r;){var l=0;do{var d=i[n++];l+=d}while(255==d);for(;l--;)t[a++]=f;f++}}const f=2,l=4,d=8,h=16,u=32,g=64,m=128,p=1,y=2,w=4;function v(e,t,r){var n=e.context;return t.qctx=(t.qctx<<e.qshift)+e.qtab[r],n+=(t.qctx&(1<<e.qbits)-1)<<e.qloc,e.do_pos&&(n+=e.ptab[Math.min(t.p,1023)]<<e.ploc),e.do_delta&&(n+=e.dtab[Math.min(t.delta,255)]<<e.dloc,t.delta+=t.prevq!=r?1:0,t.prevq=r),e.do_sel&&(n+=t.s<<e.sloc),t.p--,65535&n}function b(e){var t={};t.context=e.ReadUint16(),t.pflags=e.ReadByte(),t.do_dedup=t.pflags&f,t.fixed_len=t.pflags&l,t.do_sel=t.pflags&d,t.do_qmap=t.pflags&h,t.do_pos=t.pflags&u,t.do_delta=t.pflags&g,t.do_qtab=t.pflags&m,t.max_sym=e.ReadByte();var r=e.ReadByte();if(t.qbits=r>>4,t.qshift=15&r,r=e.ReadByte(),t.qloc=r>>4,t.sloc=15&r,r=e.ReadByte(),t.ploc=r>>4,t.dloc=15&r,t.qmap=new Array(256),t.pflags&h)for(var n=0;n<t.max_sym;n++)t.qmap[n]=e.ReadByte();else for(n=0;n<256;n++)t.qmap[n]=n;if(t.qtab=new Array(1024),t.qbits>0&&t.pflags&m)c(e,t.qtab,256);else for(n=0;n<256;n++)t.qtab[n]=n;return t.ptab=new Array(1024),t.pflags&u&&c(e,t.ptab,1024),t.dtab=new Array(256),t.pflags&g&&c(e,t.dtab,256),t}function A(e,t,r,n,a,o){r.max_sel>0?a.s=n.sel.ModelDecode(e,t):a.s=0,a.x=r.stab[a.s];var i=r.params[a.x];if(i.fixed_len>=0){var s=n.len[0].ModelDecode(e,t);s|=n.len[1].ModelDecode(e,t)<<8,s|=n.len[2].ModelDecode(e,t)<<16,s|=n.len[3].ModelDecode(e,t)<<24,i.fixed_len>0&&(i.fixed_len=-s)}else s=-i.fixed_len;a.len=s,r.do_rev&&(o[a.rec]=n.rev.ModelDecode(e,t)),a.is_dup=0,i.pflags&f&&n.dup.ModelDecode(e,t)&&(a.is_dup=1),a.p=s,a.delta=0,a.qctx=0,a.prevq=0,a.rec++}function S(e,t){var r=e.ReadUint7(),a=function(e){var t={max_sym:0};if(5==e.ReadByte()){var r=e.ReadByte(),n=r&p?e.ReadByte():1,a=r.nparam>1?r.nparam-1:0,o=new Array(256);if(r&y)a=e.ReadByte(),c(e,o,256);else{for(var i=0;i<n;i++)o[i]=i;for(;i<256;i++)o[i]=n-1}t.do_rev=r&w,t.stab=o,t.max_sel=a,t.params=new Array(t.nparam);for(var s=0;s<n;s++)t.params[s]=b(e),t.max_sym<t.params[s].max_sym&&(t.max_sym=t.params[s].max_sym);return t}console.error("Invalid FQZComp version number")}(e);if(a){var o=a.params,f=new Array(t.length),l=function(e){var t={};t.qual=new Array(65536);for(var r=0;r<65536;r++)t.qual[r]=new i(e.max_sym+1);for(t.len=new Array(4),r=0;r<4;r++)t.len[r]=new i(256);return t.rev=new i(2),t.dup=new i(2),e.max_sel>0&&(t.sel=new i(e.max_sel+1)),t}(a),d=new s(e);d.RangeStartDecode(e);for(var h=new n.allocUnsafe(r),u={qctx:0,prevq:0,delta:0,p:0,s:0,x:0,len:0,is_dup:0,rec:0},g=0;g<r;){if(0==u.p){if(A(e,d,a,l,u,f),u.is_dup>0&&l.dup.ModelDecode(e,d)){for(var m=0;m<len;m++)h[g+m]=h[g+m-u.len];g+=u.len,u.p=0;continue}t.push(u.len);var S=(o=a.params[u.x]).context}var R=l.qual[S].ModelDecode(e,d);h[g++]=o.qmap[R],S=v(o,u,R)}return a.do_rev&&function(e,t,r,n){var a=0,o=0;for(;o<t;){if(r[a])for(var i=0,s=n[a]-1;i<s;){var c=e[o+i];e[o+i]=e[o+s],e[o+s]=c,i++,s--}o+=n[a++]}}(h,r,f,t),h}}function R(e,t,r){for(var n=0,a=0,o=new Array(2*r),i=0;n<r;){for(var s=n;n<r&&t[n]==a;)n++;var c=n-s;do{var f=Math.min(255,c);o[i++]=f,c-=f}while(255==f);a++}var l=-1,d=new Array(2*r),h=0;for(n=0;n<i;){var u=o[n++];if(d[h++]=u,u==l){for(s=n;n<i&&o[n]==l&&n-s<255;)n++;d[h++]=n-s}else l=u}e.WriteData(d,h)}e.exports={decode:function(e,t){return S(new o(e),t)},encode:function(e,t,r){for(var n=new Array(2),c=new Array(2),w=new Array(2),v=new Array(2),b=new Array(256),A=0;A<2;A++)n[A]=new Array(256),c[A]=new Array(256),w[A]=new Array(1024),v[A]=new Array(256);(_=new o("",0,1.1*e.length+100)).WriteUint7(e.length);var S=function(e,t,r,n){for(var a=r[0],o=0;o<r.length&&r[o]==a;o++);var i=o==r.length?1:0,s=0,c=0;for(o=0;o<256;o++)n[0][o]=0;var f=0,l=0;for(o=0;o<e.length;o++)0==l&&(l=t[f<t.length-1?f++:f]),n[0][e[o]]++,l--;for(o=0;o<256;o++)n[0][o]&&(c<o&&(c=o),s++);var d=5,h=0;return s<=16&&(h=1,d=s<=2?1:s<=4?2:s<=8?3:4),[{qbits:8+(d>4),qshift:d,qloc:7,pbits:7,pshift:t[0]>128?1:0,ploc:0,dbits:d>4?0:1,dshift:3,dloc:15,sbits:0,sloc:15,do_stab:0,context:0,max_sym:c,nsym:s,do_qmap:h,do_dedup:0,fixed_len:1==t.length?1:0,do_sel:0,do_rev:0,do_pos:1,do_delta:d<=4?1:0,do_qtab:0,qbits:8+(d>4)-(0==i),sbits:1,sloc:15-(d<=4),do_stab:1,do_sel:1}]}(e,t,r,n),_=function(e,t,r,n,a,o,i){for(var s=[0,1,1,1,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],c=0;c<t.length;c++)i[c]=c;for(;c<256;c++)i[c]=t.length-1;e.WriteByte(5);var w=(t.length>1?p:0)|(t[0].do_stab?y:0);if(e.WriteByte(w),w&p&&e.WriteByte(t.length),w&y){var v=1<<t[0].sbits;v>0&&v--,e.WriteByte(v),R(e,i,256)}for(var b=0;b<t.length;b++){if(e.WriteUint16(t[b].context),e.WriteByte((t[b].do_qtab?m:0)|(t[b].do_delta?g:0)|(t[b].do_pos?u:0)|(t[b].do_qmap?h:0)|(t[b].do_sel?d:0)|(t[b].fixed_len?l:0)|(t[b].do_dedup?f:0)),t[b].do_qmap?e.WriteByte(t[b].nsym):e.WriteByte(t[b].max_sym),e.WriteByte(t[b].qbits<<4|t[b].qshift),e.WriteByte(t[b].qloc<<4|t[b].sloc),e.WriteByte(t[b].ploc<<4|t[b].dloc),t[b].do_qmap){t[b].max_sym=t[b].nsym;var A=0;for(c=0;c<256;c++)r[b][c]&&(e.WriteByte(c),r[b][c]=A++);for(;A<t[b].nsym;A++)e.WriteByte(0)}else for(c=0;c<256;c++)r[b][c]=c;if(t[b].qbits>0){for(c=0;c<256;c++)n[b][c]=c;t[b].do_qtab&&R(e,n[b],256)}if(t[b].pbits>0){for(c=0;c<1024;c++)a[b][c]=Math.min((1<<t[b].pbits)-1,c>>t[b].pshift);R(e,a[b],1024)}if(t[b].dbits>0){for(c=0;c<256;c++)s[c]>(1<<t[b].dbits)-1&&(s[c]=(1<<t[b].dbits)-1);for(c=0;c<256;c++)o[b][c]=s[Math.min(s.length-1,c>>t[b].dshift)];R(e,o[b],256)}}return e}(_,S,n,c,w,v,b);return function(e,t,r,n,o,c,f,l,d,h){var u=1<<o[0].sbits;u>0&&u--;for(var g=t.length,m=0,p=0;p<o.length;p++)m<o[p].max_sym&&(m=o[p].max_sym);for(var y=new Array(65536),w=0;w<65536;w++)y[w]=new i(m+1);var v=new Array(4);for(w=0;w<4;w++)v[w]=new i(256);new i(2),new i(2);for(var b=new i(u+1),A=new s(t),S=(p=0,w=0,0);w<g;){if(0==p){var R=n[S];o[0].sbits>0&&b.ModelEncode(e,A,R);var _=h[R],B=r[Math.min(r.length-1,S++)];o[_].fixed_len?o[_].fixed_len>0&&(v[0].ModelEncode(e,A,255&B),v[1].ModelEncode(e,A,B>>8&255),v[2].ModelEncode(e,A,B>>16&255),v[3].ModelEncode(e,A,B>>24&255),o[_].fixed_len=-1):(v[0].ModelEncode(e,A,255&B),v[1].ModelEncode(e,A,B>>8&255),v[2].ModelEncode(e,A,B>>16&255),v[3].ModelEncode(e,A,B>>24&255)),o[_].do_dedup&&a.exit(1),p=B;var C=0,M=o[_].context,E=0,I=0}var F=t[w++],q=c[_][F];y[M].ModelEncode(e,A,q),E=(E<<o[_].qshift)+f[_][q],M=o[_].context,M+=(E&(1<<o[_].qbits)-1)<<o[_].qloc,o[_].pbits>0&&(M+=l[_][Math.min(p,1023)]<<o[_].ploc),o[_].dbits>0&&(M+=d[_][Math.min(C,255)]<<o[_].dloc,C+=I!=q?1:0,I=q),o[_].do_sel&&(M+=R<<o[_].sloc),M&=65535,p--}return A.RangeFinishEncode(e),e.buf.slice(0,e.pos)}(_,e,t,r,S,n,c,w,v,b)}}},86576:(e,t,r)=>{"use strict";var n=r(35051).lW,a=r(31754),o=r(37653),i=r(95165),s=r(45140),c=r(58195);e.exports={r4x8_uncompress:function(e,t){a.decode(e).copy(t,0,0)},r4x16_uncompress:function(e,t){o.decode(e).copy(t,0,0)},arith_uncompress:function(e,t){i.decode(e).copy(t,0,0)},fqzcomp_uncompress:function(e,t){var r=new Array;s.decode(e,r).copy(t,0,0)},tok3_uncompress:function(e,t){var r=c.decode(e,0,"\0");n.from(r,"binary").copy(t,0,0)}}},63364:(e,t,r)=>{var n=r(35051).lW;e.exports=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;0!=r?(this.buf=n.allocUnsafe(r),this.length=r):(this.buf=e,this.length=e.length),this.pos=t}EOF(){return this.pos>=this.length}ReadData(e){var t=this.buf.slice(this.pos,this.pos+e);return this.pos+=e,t}ReadByte(){const e=this.buf[this.pos];return this.pos++,e}ReadChar(){const e=this.buf[this.pos];return this.pos++,String.fromCharCode(e)}ReadUint16(){var e=this.ReadByte();return e|=this.ReadByte()<<8}ReadUint32(){const e=this.buf.readInt32LE(this.pos);return this.pos+=4,e}ReadString(){var e="";do{var t=this.buf[this.pos++];t&&(e+=String.fromCharCode(t))}while(t);return e}ReadUint7(){var e=0;do{var t=this.ReadByte();e=e<<7|127&t}while(128&t);return e}ReadITF8(){var e=this.buf[this.pos];return this.pos++,e>=240?(e=(15&e)<<28,e+=(this.buf[this.pos+0]<<20)+(this.buf[this.pos+1]<<12)+(this.buf[this.pos+2]<<4)+(this.buf[this.pos+3]>>4),this.pos+=4):e>=224?(e=(15&e)<<24,e+=(this.buf[this.pos+0]<<16)+(this.buf[this.pos+1]<<8)+(this.buf[this.pos+2]<<0),this.pos+=3):e>=192?(e=(31&e)<<16,e+=(this.buf[this.pos+0]<<8)+(this.buf[this.pos+1]<<0),this.pos+=2):e>=128&&(e=(63&e)<<8,e+=this.buf[this.pos],this.pos++),e}WriteByte(e){this.buf[this.pos++]=e}WriteChar(e){this.buf[this.pos++]=e.charCodeAt(0)}WriteString(e){for(var t=0;t<e.length;t++)this.buf[this.pos++]=e.charCodeAt(t);this.buf[this.pos++]=0}WriteData(e,t){for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]}WriteStream(e){this.WriteData(e.buf,e.pos)}WriteUint16(e){this.WriteByte(255&e),this.WriteByte(e>>8&255)}WriteUint32(e){this.buf.writeInt32LE(e,this.pos),this.pos+=4}WriteUint7(e){var t=0,r=e;do{t+=7,r>>=7}while(r>0);do{t-=7,this.WriteByte((e>>t&127)+((t>0)<<7))}while(t>0)}WriteITF8(e){e<0&&(e=1+e),e<=127?this.buf[this.pos++]=e:e<=16383?(this.buf[this.pos++]=128|Math.floor(e/256),this.buf[this.pos++]=255&e):e<131071?(this.buf[this.pos++]=192|Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):e<268435455?(this.buf[this.pos++]=224|Math.floor(e/16777216),this.buf[this.pos++]=255&Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):(this.buf[this.pos++]=240|Math.floor(e/268435456),this.buf[this.pos++]=255&Math.floor(e/1048576),this.buf[this.pos++]=255&Math.floor(e/4096),this.buf[this.pos++]=255&Math.floor(e/4),this.buf[this.pos++]=15&e)}WriteByteNeg(e){this.buf[--this.pos]=e}}},31754:(e,t,r)=>{var n=r(35051).lW;const a=r(63364);function o(e){return 4095&e}function i(e,t){for(var r=0;t>=e[r+1];)r++;return r}function s(e){for(var t=new Array(4096),r=0,n=0;n<4096;n++){for(;n>=e[r+1];)r++;t[n]=r}return t}function c(e,t,r){return r*(e>>12)+(4095&e)-t}function f(e,t){for(;t<1<<23;)t=(t<<8)+e.ReadByte();return t}function l(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function d(e,t,r,n,a){return e=function(e,t,r,n){for(var a=(1<<23>>n<<8)*r;e>=a;)t.WriteByteNeg(255&e),e>>=8;return e}(e,t,n,a),e=(Math.floor(e/n)<<a)+e%n+r}function h(e,t,r){for(var n=0;n<256;n++)t[n]=0;var a=e.ReadByte(),o=a,i=0;do{var s=e.ReadITF8();t[a]=s,i>0?(i--,a++):(a=e.ReadByte())==o+1&&(i=e.ReadByte()),o=a}while(0!=a);r[0]=0;for(n=0;n<=255;n++)r[n+1]=r[n]+t[n]}function u(e){for(var t=0,r=0;r<256;r++)t+=e[r];const n=4096;var a=n/t;do{var o=0,i=0,s=0;t=0;for(r=0;r<256;r++)0!=e[r]&&(o<e[r]&&(o=e[r],i=r),e[r]=Math.floor(e[r]*a),0==e[r]&&(e[r]=1),t+=e[r]);t<n?e[i]+=n-t:t-n<e[i]/2&&e[i]>2?e[i]-=t-n:t!=n&&(a*=.99,s=1)}while(s)}function g(e,t){for(var r=0,n=0;n<256;n++)if(t[n]){if(r>0)r--;else if(e.WriteByte(n),n>0&&t[n-1]>0){for(r=n+1;r<256&&t[r];r++);r-=n+1,e.WriteByte(r)}e.WriteITF8(t[n])}e.WriteByte(0)}e.exports={decode:function(e){var t=new a(e),r=t.ReadByte(),l=(t.ReadUint32(),t.ReadUint32());return 0==r?function(e,t){var r=new Array(256),a=new Array(256);h(e,r,a);for(var i=s(a),l=new Array(4),d=0;d<4;d++)l[d]=e.ReadUint32();var u=new n.allocUnsafe(t);for(d=0;d<t;d++){var g=d%4,m=i[o(l[g])];u[d]=m,l[g]=c(l[g],a[m],r[m]),l[g]=f(e,l[g])}return u}(t,l):function(e,t){var r=new Array(256),a=new Array(256);!function(e,t,r){for(var n=0;n<256;n++){t[n]=new Array(256),r[n]=new Array(256);for(var a=0;a<256;a++)t[n][a]=0}var o=e.ReadByte(),i=o,s=0;do{h(e,t[o],r[o]),s>0?(s--,o++):(o=e.ReadByte())==i+1&&(s=e.ReadByte()),i=o}while(0!=o)}(e,r,a);for(var l=new Array(256),d=0;d<256;d++)l[d]=s(a[d]);for(var u=new Array(4),g=new Array(4),m=0;m<4;m++)u[m]=e.ReadUint32(),g[m]=0;var p=new n.allocUnsafe(t),y=Math.floor(t/4);for(d=0;d<y;d++)for(m=0;m<4;m++){var w=o(u[m]),v=l[g[m]][w];p[d+m*y]=v,u[m]=c(u[m],a[g[m]][v],r[g[m]][v]),u[m]=f(e,u[m]),g[m]=v}d*=4;for(;d<t;){w=o(u[3]),v=i(a[g[3]],w);p[d++]=v,u[3]=c(u[3],a[g[3]][v],r[g[3]][v]),u[3]=f(e,u[3]),g[3]=v}return p}(t,l)},encode:function(e,t){return 0==t?function(e){const t=e.length;var r=new a("",0,780);r.WriteByte(0),r.WriteUint32(0),r.WriteUint32(0);var o=new Array(256);(function(e,t){for(var r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++})(e,o),u(o),g(r,o);var i=new Array(256);i[0]=0;for(var s=1;s<256;s++)i[s]=i[s-1]+o[s-1];var c=new Array(4);for(s=0;s<4;s++)c[s]=1<<23;var f=Math.floor(1.05*t+100),h=new a("",f,f);for(s=t-1;s>=0;s--)c[s%4]=d(c[s%4],h,i[e[s]],o[e[s]],12);for(s=3;s>=0;s--)l(c[s],h);var m=r.pos;return r.buf.writeInt32LE(m-9+(h.length-h.pos),1),r.buf.writeInt32LE(t,5),n.concat([r.buf.slice(0,r.pos),h.buf.slice(h.pos,h.length)],r.pos+h.length-h.pos)}(e):function(e){const t=e.length;var r=new a("",0,198156);r.WriteByte(1),r.WriteUint32(0),r.WriteUint32(0);for(var o=new Array(256),i=new Array(256),s=new Array(256),c=0;c<256;c++)i[c]=new Array(256),s[c]=new Array(256);(function(e,t,r){for(var n=0;n<256;n++){r[n]=0;for(var a=0;a<256;a++)t[n][a]=0}var o=0;for(n=0;n<e.length;n++)r[e[n]]++,t[o][e[n]]++,o=e[n];t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,r[0]+=3})(e,i,o),function(e,t){for(var r=0;r<256;r++)t[r]&&u(e[r])}(i,o),function(e,t,r){for(var n=0,a=0;a<256;a++)if(r[a]){if(n>0)n--;else if(e.WriteByte(a),a>0&&r[a-1]>0){for(n=a+1;n<256&&r[n];n++);n-=a+1,e.WriteByte(n)}g(e,t[a])}e.WriteByte(0)}(r,i,o);for(c=0;c<256;c++)if(o[c]){s[c][0]=0;for(var f=1;f<256;f++)s[c][f]=s[c][f-1]+i[c][f-1]}var h=new Array(4),m=new Array(4);for(f=0;f<4;f++)h[f]=1<<23,m[f]=0;var p=new a("",t,t),y=Math.floor(t/4),w=new Array(4),v=new Array(4);for(f=0;f<4;f++)w[f]=(f+1)*y-2,v[f]=e[w[f]+1];v[3]=e[t-1];for(c=t-2;c>4*y-2;c--)h[3]=d(h[3],p,s[e[c]][v[3]],i[e[c]][v[3]],12),v[3]=e[c];for(;w[0]>=0;)for(f=3;f>=0;f--){var b=e[w[f]];h[f]=d(h[f],p,s[b][v[f]],i[b][v[f]],12),v[f]=b,w[f]--}for(f=3;f>=0;f--)h[f]=d(h[f],p,s[0][v[f]],i[0][v[f]],12);for(c=3;c>=0;c--)l(h[c],p);var A=r.pos;return r.buf.writeInt32LE(A-9+(p.length-p.pos),1),r.buf.writeInt32LE(t,5),n.concat([r.buf.slice(0,r.pos),p.buf.slice(p.pos,p.length)],r.pos+p.length-p.pos)}(e)}}},37653:(e,t,r)=>{var n=r(35051).lW;const a=r(63364);function o(e,t){return e&(1<<t)-1}function i(e,t){for(var r=0;t>=e[r+1];)r++;return r}function s(e,t){for(var r=1<<t,n=new Array(r),a=0,o=0;o<r;o++){for(;o>=e[a+1];)a++;n[o]=a}return n}function c(e,t,r,n){return r*(e>>n)+(e&(1<<n)-1)-t}function f(e,t){return t<32768&&(t=(t<<16)+e.ReadUint16()),t}function l(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function d(e,t,r,n,a){return e=function(e,t,r,n){for(var a=(1<<31-n)*r;e>=a;)t.WriteByteNeg(e>>8&255),t.WriteByteNeg(255&e),e>>=16;return e}(e,t,n,a),e=(Math.floor(e/n)<<a)+e%n+r}function h(e,t,r){0==r&&(r=4);for(var n=new Array(r),o=new Array(r),i=0;i<r;i++)o[i]=Math.floor(t.length/r)+(t.length%r>i),n[i]=new Array(o[i]);for(var s=0,c=0;c<t.length;c+=r,s++)for(var f=0;f<r;f++)s<n[f].length&&(n[f][s]=t[c+f]);var l=new Array(r),d=0;for(i=0;i<r;i++){var h=g(n[i],0),u=g(n[i],1);l[i]=u.length<h.length?u:h,d+=l[i].length}var m=new a("",0,d+5*r+1);m.WriteByte(r);for(i=0;i<r;i++)m.WriteUint7(l[i].length);for(i=0;i<r;i++)m.WriteData(l[i],l[i].length);return m.buf.slice(0,m.buf.pos)}function u(e,t){var r=e.ReadByte(),l=1&r,d=8&r,h=32&r,g=64&r,y=128&r;if(16&r||(t=e.ReadUint7()),d)return function(e,t){for(var r=e.ReadByte(),a=new Array(r),o=new Array(r),i=0;i<r;i++)a[i]=e.ReadUint7();var s=new Array(r);for(i=0;i<r;i++)o[i]=Math.floor(t/r)+(t%r>i),s[i]=u(e,o[i]);var c=new n.allocUnsafe(t);for(i=0;i<r;i++)for(var f=0;f<o[i];f++)c[f*r+i]=s[i][f];return c}(e,t);if(y)var v=t,[b,A,t]=function(e){for(var t=e.ReadByte(),r=new Array(t),n=0;n<t;n++)r[n]=e.ReadByte();return[r,t,e.ReadUint7()]}(e);if(g)var S=t,[R,_,t]=function(e){var t=e.ReadUint7(),r=e.ReadUint7();if(1&t)var n=e.ReadData((t-1)/2);else{var o=e.ReadUint7();n=e.ReadData(o),n=p(new a(n),t/2)}n=new a(n);var i=new Array(256),s=n.ReadByte();0==s&&(s=256);for(var c=0;c<s;c++)i[n.ReadByte()]=1;return[i,n,r]}(e);if(h)var B=e.ReadData(t);else if(0==l)B=p(e,t);else B=function(e,t){var r=(u=e.ReadByte())>>4,l=e;if(1&u){var d=e.ReadUint7(),h=e.ReadUint7(),u=new a(e.ReadData(h));l=new a(p(u,d))}var g=new Array(256),y=new Array(256);!function(e,t,r,n){for(var a=0;a<256;a++){t[a]=new Array(256),r[a]=new Array(256);for(var o=0;o<256;o++)t[a][o]=0}var i=m(e);for(a=0;a<256;a++)if(i[a]){var s=0;for(o=0;o<256;o++)i[o]&&(s>0?s--:(t[a][o]=e.ReadUint7(),0==t[a][o]&&(s=e.ReadByte())));w(t[a],n),r[a][0]=0;for(o=0;o<256;o++)r[a][o+1]=r[a][o]+t[a][o]}}(l,g,y,r);for(var v=new Array(256),b=0;b<256;b++)v[b]=s(y[b],r);for(var A=new Array(4),S=new Array(4),R=0;R<4;R++)A[R]=e.ReadUint32(),S[R]=0;var _=new n.allocUnsafe(t),B=Math.floor(t/4);for(b=0;b<B;b++)for(R=0;R<4;R++){var C=o(A[R],r),M=v[S[R]][C];_[b+R*B]=M,A[R]=c(A[R],y[S[R]][M],g[S[R]][M],r),A[R]=f(e,A[R]),S[R]=M}b*=4;for(;b<t;){C=o(A[3],r),M=i(y[S[3]],C);_[b++]=M,A[3]=c(A[3],y[S[3]][M],g[S[3]][M],r),A[3]=f(e,A[3]),S[3]=M}return _}(e,t);return g&&(B=function(e,t,r,o){new a(e);for(var i=new n.allocUnsafe(o),s=0,c=0;s<o;c++){var f=e[c];if(t[f])for(var l=r.ReadUint7(),d=0;d<=l;d++)i[s++]=f;else i[s++]=f}return i}(B,R,_,S)),y&&(B=function(e,t,r,a){var o=new n.allocUnsafe(a),i=0;if(r<=1)for(var s=0;s<a;s++)o[s]=t[0];else if(r<=2)for(s=0;s<a;s++){if(s%8==0)var c=e[i++];o[s]=t[1&c],c>>=1}else if(r<=4)for(s=0;s<a;s++)s%4==0&&(c=e[i++]),o[s]=t[3&c],c>>=2;else if(r<=16)for(s=0;s<a;s++)s%2==0&&(c=e[i++]),o[s]=t[15&c],c>>=4;return o}(B,b,A,v)),B}function g(e,t){var r=new a("",0,10);r.WriteByte(t);var o=1&t,i=8&t,s=32&t,c=64&t,f=128&t,u=t>>8;if(16&t||r.WriteUint7(e.length),i)return n.concat([r.buf.slice(0,r.pos),h(0,e,u)]);var g=new n.alloc(0);f&&([g,e]=function(e){for(var t=new Array(256),r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++;var o=new Array(256),i=0;for(r=0;r<256;r++)t[r]>0&&(o[r]=i++);if(!(i>16)){if(i<=1)var s=new n.allocUnsafe(0);else if(i<=2){s=new n.allocUnsafe(Math.ceil(e.length/8));var c=-1;for(r=0;r<e.length;r++)r%8==0&&(s[++c]=0),s[c]+=o[e[r]]<<r%8}else if(i<=4)for(s=new n.allocUnsafe(Math.ceil(e.length/4)),c=-1,r=0;r<e.length;r++)r%4==0&&(s[++c]=0),s[c]+=o[e[r]]<<r%4*2;else for(s=new n.allocUnsafe(Math.ceil(e.length/2)),c=-1,r=0;r<e.length;r++)r%2==0&&(s[++c]=0),s[c]+=o[e[r]]<<r%2*4;var f=new a("",0,i+5);for(f.WriteByte(i),c=0,r=0;r<256;r++)t[r]>0&&(t[r]=c++,f.WriteByte(r));return f.WriteUint7(s.length),[f.buf.slice(0,f.pos),s]}}(e));var m=new n.alloc(0);if(c&&([m,e]=function(e){for(var t=new Array(256),r=0;r<256;r++)t[r]=0;var o=-1;for(r=0;r<e.length;r++)t[e[r]]+=e[r]==o?1:-1,o=e[r];var i=0;for(r=0;r<256;r++)t[r]>0&&i++;for(i||(i=1,t[0]=1),(l=new a("",0,i+1+e.length)).WriteByte(i),r=0;r<256;r++)t[r]>0&&l.WriteByte(r);var s=new n.allocUnsafe(e.length),c=0;for(r=0;r<e.length;r++)if(s[c++]=e[r],t[e[r]]>0){o=e[r];for(var f=0;r+f+1<e.length&&e[r+f+1]==o;)f++;l.WriteUint7(f),r+=f}var l,d=b(l.buf.slice(0,l.pos)),h=new a("",0,16);return h.WriteUint7(2*l.pos),h.WriteUint7(c),h.WriteUint7(d.length),[l=n.concat([h.buf.slice(0,h.pos),d]),s.slice(0,c)]}(e)),e.length<4&&1==o&&(o=0,r.buf[0]&=-2),s)var p=e;else if(0==o)p=b(e);else p=function(e){const t=e.length;for(var r=new a("",0,198156),o=new Array(256),i=new Array(256),s=new Array(256),c=0;c<256;c++)i[c]=new Array(256),s[c]=new Array(256);var f=12;(function(e,t,r){for(var n=0;n<256;n++){r[n]=0;for(var a=0;a<256;a++)t[n][a]=0}var o=0;for(n=0;n<e.length;n++)r[o]++,t[o][e[n]]++,o=e[n];r[o]++,t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,r[0]+=3})(e,i,o),function(e,t,r){for(var n=0;n<256;n++)if(t[n]){var a=Math.ceil(Math.log2(t[n]));a>r&&(a=r),y(e[n],a)}}(i,o,f);var h=new a("",0,198156);!function(e,t,r){v(e,r);for(var n=0;n<256;n++)if(r[n])for(var a=0,o=0;o<256;o++)if(r[o])if(a)a--;else if(e.WriteUint7(t[n][o]),!t[n][o]){for(var i=o+1;i<256;i++)if(r[i]){if(0!=t[n][i])break;a++}e.WriteByte(a)}}(h,i,o);var u=b(h.buf.slice(0,h.pos));u.length<h.pos?(r.WriteByte(1|f<<4),r.WriteUint7(h.pos),r.WriteUint7(u.length),r.WriteData(u,u.length)):(r.WriteByte(0|f<<4),r.WriteData(h.buf,h.pos));!function(e,t,r){for(var n=0;n<256;n++)t[n]&&w(e[n],r)}(i,o,f);for(c=0;c<256;c++)if(o[c]){s[c][0]=0;for(var g=1;g<256;g++)s[c][g]=s[c][g-1]+i[c][g-1]}var m=new Array(4),p=new Array(4);for(g=0;g<4;g++)m[g]=32768,p[g]=0;var A=new a("",1.05*t+100>>0,1.05*t+100>>0),S=Math.floor(t/4),R=new Array(4),_=new Array(4);for(g=0;g<4;g++)R[g]=(g+1)*S-2,_[g]=e[R[g]+1];_[3]=e[t-1];for(c=t-2;c>4*S-2;c--)m[3]=d(m[3],A,s[e[c]][_[3]],i[e[c]][_[3]],f),_[3]=e[c];for(;R[0]>=0;)for(g=3;g>=0;g--){var B=e[R[g]];m[g]=d(m[g],A,s[B][_[g]],i[B][_[g]],f),_[g]=B,R[g]--}for(g=3;g>=0;g--)m[g]=d(m[g],A,s[0][_[g]],i[0][_[g]],f);for(c=3;c>=0;c--)l(m[c],A);return n.concat([r.buf.slice(0,r.pos),A.buf.slice(A.pos,A.length)],r.pos+A.length-A.pos)}(e);return n.concat([r.buf.slice(0,r.pos),g,m,p])}function m(e){for(var t=new Array(256),r=0;r<256;r++)t[r]=0;var n=0,a=e.ReadByte(),o=a;do{t[a]=1,n>0?(n--,a++):(a=e.ReadByte())==o+1&&(n=e.ReadByte()),o=a}while(0!=a);return t}function p(e,t){var r=new Array(256),a=new Array(256);!function(e,t,r){for(var n=0;n<256;n++)t[n]=0;var a=m(e);for(n=0;n<256;n++)a[n]>0&&(t[n]=e.ReadUint7());for(w(t,12),r[0]=0,n=0;n<=255;n++)r[n+1]=r[n]+t[n]}(e,r,a);for(var i=s(a,12),l=new Array(4),d=0;d<4;d++)l[d]=e.ReadUint32();var h=new n.allocUnsafe(t);for(d=0;d<t;d++){var u=d%4,g=i[o(l[u],12)];h[d]=g,l[u]=c(l[u],a[g],r[g],12),l[u]=f(e,l[u])}return h}function y(e,t){for(var r=0,n=0;n<256;n++)r+=e[n];const a=1<<t;var o=a/r;do{var i=0,s=0,c=0;r=0;for(n=0;n<256;n++)0!=e[n]&&(i<e[n]&&(i=e[n],s=n),e[n]=Math.floor(e[n]*o),0==e[n]&&(e[n]=1),r+=e[n]);r<a?e[s]+=a-r:r-a<e[s]/2&&e[s]>2?e[s]-=r-a:r!=a&&(o=a/r,c=1)}while(c)}function w(e,t){for(var r=0,n=0;n<256;n++)r+=e[n];if(0!=r&&r!=1<<t){for(var a=0;r<1<<t;)r*=2,a++;for(n=0;n<256;n++)e[n]<<=a}}function v(e,t){for(var r=0,n=0;n<256;n++)if(t[n])if(r>0)r--;else if(e.WriteByte(n),n>0&&t[n-1]>0){for(r=n+1;r<256&&t[r];r++);r-=n+1,e.WriteByte(r)}e.WriteByte(0)}function b(e){const t=e.length;var r=new a("",0,780),o=new Array(256);!function(e,t){for(var r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++}(e,o);var i=Math.ceil(Math.log2(t));i>12&&(i=12),y(o,i),function(e,t){v(e,t);for(var r=0;r<256;r++)t[r]&&e.WriteUint7(t[r])}(r,o),y(o,12);var s=new Array(256);s[0]=0;for(var c=1;c<256;c++)s[c]=s[c-1]+o[c-1];var f=new Array(4);for(c=0;c<4;c++)f[c]=32768;var h=new a("",1.05*t+100>>0,1.05*t+100>>0);for(c=t-1;c>=0;c--)f[c%4]=d(f[c%4],h,s[e[c]],o[e[c]],12);for(c=3;c>=0;c--)l(f[c],h);return n.concat([r.buf.slice(0,r.pos),h.buf.slice(h.pos,h.length)],r.pos+h.length-h.pos)}e.exports={decode:function(e){return u(new a(e),0)},encode:g}},58195:(e,t,r)=>{var n=r(35051).lW;const a=r(63364),o=r(37653);var i=new(r(95165));const s=0,c=1,f=2,l=3,d=4,h=5,u=6,g=7,m=8,p=9,y=10,w=12;function v(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r}function b(e,t,r,n){var a=e[0][s].ReadByte(),o=n-e[0][a].ReadUint32();if(a==h)return t[n]=t[o],r[n]=r[o],t[n];var i=1;t[n]="",r[n]=new Array(256);do{switch(a=e[i][s].ReadByte()){case f:r[n][i]=e[i][f].ReadChar();break;case c:r[n][i]=e[i][c].ReadString();break;case g:r[n][i]=e[i][g].ReadUint32();break;case l:var u=e[i][l].ReadUint32(),b=e[i][d].ReadByte();r[n][i]=v(u,b);break;case m:r[n][i]=(r[o][i]>>0)+e[i][m].ReadByte();break;case p:u=(r[o][i]>>0)+e[i][p].ReadByte(),b=r[o][i].length;r[n][i]=v(u,b);break;case y:r[n][i]=r[o][i];break;default:r[n][i]=""}t[n]+=r[n][i++]}while(a!=w);return t[n]}function A(e,t,r,n,a,o){for(var i=0;i<n.length;i++)if(!(r>0&&t[i][0].type==h)&&t[i][r])switch(e[s].WriteByte(t[i][r].type),t[i][r].type){case u:e[u].WriteUint32(t[i][r].val);break;case h:e[h].WriteUint32(t[i][r].val);break;case c:e[c].WriteString(t[i][r].val);break;case f:e[f].WriteChar(t[i][r].val);break;case g:e[g].WriteUint32(t[i][r].val);break;case l:e[l].WriteUint32(t[i][r].val),e[d].WriteByte(t[i][r].val.length);break;case m:case p:e[t[i][r].type].WriteByte(t[i][r].val)}}function S(e,t,r,n){for(var a=0;a<=w;a++)if(!(e[a].pos<=0)){n.WriteByte(a+(0==a?128:0)),e[a]=e[a].buf.slice(0,e[a].pos);var o=R(e[a],r);n.WriteUint7(o.length),n.WriteData(o,o.length)}}function R(e,t){var r,n=1<<30,a=[0,1,64,65,128,129,201];for(var s in a){var c=a[s];if(!(1&c&&e.length<100)&&!(8&c&&e.length%4!=0)){try{var f=t?i.encode(e,c):o.encode(e,c)}catch(l){f=0}f&&n>f.length&&(n=f.length,r=f)}}return r}function _(e,t,r,n,a){var o=0,i=a-1;e[a]=new Array(256),t[n]?e[a][0]={type:h,val:a-t[n]}:e[a][0]={type:u,val:0==a?0:1},t[n]=a;for(var s=n.match(/([a-zA-Z0-9]{1,9})|([^a-zA-Z0-9]+)/g),d=0;d<s.length;d++){var v=d+1,b=c,A=s[d];if(s[d].match(/^0+[0-9]*$/g)?b=l:s[d].match(/^[0-9]+$/g)?b=g:1==s[d].length&&(b=f),i>=0&&e[i][v])if(e[i][v].str==s[d])b=y,A="";else if(e[i][v].type==g||e[i][v].type==m){var S=A-e[i][v].str;r[v]++,S>=0&&S<256&&r[v]>a/2&&(b=m,A=S)}else if((e[i][v].type==l||e[i][v].type==p)&&e[i][v].str.length==A.length){S=A-e[i][v].str;r[v]++,S>=0&&S<256&&r[v]>a/2&&(b=p,A=S)}e[a][v]={str:s[d],val:A,type:b},o<e[a][v].val.length+3&&(o=e[a][v].val.length+3)}return e[a][++v]={type:w},[v+1,o]}e.exports={encode:function(e,t){var r=e.toString();"\n"==r[r.length-1]&&(r=r.substring(0,r.length-1));var n=r.split("\n"),o=new a("",0,2*r.length+1e4);o.WriteUint32(r.length),o.WriteUint32(n.length),o.WriteByte(t);for(var i=new Array(n.length),s={},c=new Array(256).fill(0),f=0,l=0,d=0;d<n.length;d++){var[h,u]=_(i,s,c,n[d],d);f<h&&(f=h),l<u&&(l=u)}for(var g=0;g<f;g++){for(var m=new Array(w+1),p=0;p<=w;p++)m[p]=new a("",0,n.length*l);A(m,i,g,n,f,l),S(m,g,t,o)}return o.buf.slice(0,o.pos)},decode:function(e,t,r){(e=new a(e)).ReadUint32();var c=e.ReadUint32(),f=e.ReadByte(),l=function(e,t,r,c){for(var f=-1,l=new Array(256);!e.EOF();){var d=e.ReadByte(),h=128&d,u=64&d,g=63&d;if(h&&(l[++f]=new Array(13)),g!=s&&h){var m=new Array(c-1).fill(y);l[f][s]=new a(n.from([g].concat(m)))}if(u){var p=e.ReadByte(),w=e.ReadByte();l[f][g]=new a(l[p][w].buf)}else{var v=e.ReadUint7(),b=e.ReadData(v);l[f][g]=r?i.decode(b):o.decode(b),l[f][g]=new a(l[f][g])}}return l}(e,0,f,c),d=new Array(c),h=new Array(c),u="";"undefined"===typeof r&&(r="\n");for(var g=0;g<c;g++)u+=b(l,d,h,g)+r;return u}}},36972:e=>{var t={array:function(e){var t=0,r=0,n=[0,1,3,7,15,31,63,127,255];return function(a){for(var o=0;a>0;){var i=8-t;a>=i?(o<<=i,o|=n[i]&e[r++],t=0,a-=i):(o<<=a,o|=(e[r]&n[a]<<8-a-t)>>8-a-t,t+=a,a=0)}return o}},simple:function(e){var r,n,a=t.header(e),o=[],i=0;do{-1!=(n=t.decompress(e,a))&&(o.push(n),i+=n.byteLength)}while(-1!=n);r=new Uint8Array(i),i=0;for(var s=0;s<o.length;++s)n=o[s],r.set(n,i),i+=n.byteLength;return r},header:function(e){if(4348520!=e(24))throw"No magic number found";var t=e(8)-48;if(t<1||t>9)throw"Not a BZIP archive";return t},decompress:function(e,t,r){for(var n=9e5,a="",o=0;o<6;o++)a+=e(8).toString(16);if("177245385090"==a)return-1;if("314159265359"!=a)throw"eek not valid bzip data";if(e(32),e(1))throw"unsupported obsolete version";var i=e(24);if(i>n)throw"Initial position larger than buffer size";var s=e(16),c=new Uint8Array(256),f=0;for(o=0;o<16;o++)if(s&1<<15-o){var l=e(16);for(m=0;m<16;m++)l&1<<15-m&&(c[f++]=16*o+m)}var d=e(3);if(d<2||d>6)throw"another error";var h=e(15);if(0==h)throw"meh";var u=[];for(o=0;o<d;o++)u[o]=o;var g=new Uint8Array(32768);for(o=0;o<h;o++){for(var m=0;e(1);m++)if(m>=d)throw"whoops another error";var p=u[m];u.splice(m,1),u.splice(0,0,p),g[o]=p}var y=f+2,w=[];for(m=0;m<d;m++){var v,b,A,S=new Uint8Array(258),R=new Uint8Array(21);s=e(5);for(o=0;o<y;o++){for(;;){if(s<1||s>20)throw"I gave up a while ago on writing error messages";if(!e(1))break;e(1)?s--:s++}S[o]=s}v=b=S[0];for(o=1;o<y;o++)S[o]>b?b=S[o]:S[o]<v&&(v=S[o]);(A=w[m]={}).permute=new Uint32Array(258),A.limit=new Uint32Array(21),A.base=new Uint32Array(21),A.minLen=v,A.maxLen=b;var _=A.base.subarray(1),B=A.limit.subarray(1),C=0;for(o=v;o<=b;o++)for(s=0;s<y;s++)S[s]==o&&(A.permute[C++]=s);for(o=v;o<=b;o++)R[o]=B[o]=0;for(o=0;o<y;o++)R[S[o]]++;for(C=s=0,o=v;o<b;o++)C+=R[o],B[o]=C-1,C<<=1,_[o+1]=C-(s+=R[o]);B[b]=C+R[b]-1,_[v]=0}var M,E,I,F=new Uint32Array(256);for(o=0;o<256;o++)u[o]=o;M=E=y=I=0;for(var q=new Uint32Array(n);;){if(!y--){if(y=49,I>=h)throw"meow i'm a kitty, that's an error";_=(A=w[g[I++]]).base.subarray(1),B=A.limit.subarray(1)}for(m=e(o=A.minLen);;){if(o>A.maxLen)throw"rawr i'm a dinosaur";if(m<=B[o])break;o++,m=m<<1|e(1)}if((m-=_[o])<0||m>=258)throw"moo i'm a cow";var U=A.permute[m];if(0!=U&&1!=U){if(M){if(M=0,E+s>=n)throw"Boom.";for(F[p=c[u[0]]]+=s;s--;)q[E++]=p}if(U>f)break;if(E>=n)throw"I can't think of anything. Error";p=u[o=U-1],u.splice(o,1),u.splice(0,0,p),F[p=c[p]]++,q[E++]=p}else M||(M=1,s=0),s+=0==U?M:2*M,M<<=1}if(i<0||i>=E)throw"I'm a monkey and I'm throwing something at someone, namely you";for(m=0,o=0;o<256;o++)l=m+F[o],F[o]=m,m=l;for(o=0;o<E;o++)q[F[p=255&q[o]]]|=o<<8,F[p]++;var k=0,x=0,P=0;E&&(x=255&(k=q[i]),k>>=8,P=-1);var L,D,W,N=new Uint8Array(n),z=0;for(r||(r=1/0);E;){for(E--,D=x,x=255&(k=q[k]),k>>=8,3==P++?(L=x,W=D,x=-1):(L=1,W=x);L--;)if(N[z++]=W,! --r)return N;x!=D&&(P=0)}return N.subarray(0,z)}};e.exports=t},68381:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},79972:e=>{!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var a=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?r.push(t.charAt(a>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,a=0;n<e.length;a=++n%4)0!=a&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(n))>>>6-2*a);return r}};e.exports=r}()},62782:e=>{function t(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},49277:(e,t,r)=>{!function(){var t=r(79972),n=r(68381).utf8,a=r(62782),o=r(68381).bin,i=function(e,r){e.constructor==String?e=r&&"binary"===r.encoding?o.stringToBytes(e):n.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var s=t.bytesToWords(e),c=8*e.length,f=1732584193,l=-271733879,d=-1732584194,h=271733878,u=0;u<s.length;u++)s[u]=16711935&(s[u]<<8|s[u]>>>24)|4278255360&(s[u]<<24|s[u]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var g=i._ff,m=i._gg,p=i._hh,y=i._ii;for(u=0;u<s.length;u+=16){var w=f,v=l,b=d,A=h;f=g(f,l,d,h,s[u+0],7,-680876936),h=g(h,f,l,d,s[u+1],12,-389564586),d=g(d,h,f,l,s[u+2],17,606105819),l=g(l,d,h,f,s[u+3],22,-1044525330),f=g(f,l,d,h,s[u+4],7,-176418897),h=g(h,f,l,d,s[u+5],12,1200080426),d=g(d,h,f,l,s[u+6],17,-1473231341),l=g(l,d,h,f,s[u+7],22,-45705983),f=g(f,l,d,h,s[u+8],7,1770035416),h=g(h,f,l,d,s[u+9],12,-1958414417),d=g(d,h,f,l,s[u+10],17,-42063),l=g(l,d,h,f,s[u+11],22,-1990404162),f=g(f,l,d,h,s[u+12],7,1804603682),h=g(h,f,l,d,s[u+13],12,-40341101),d=g(d,h,f,l,s[u+14],17,-1502002290),f=m(f,l=g(l,d,h,f,s[u+15],22,1236535329),d,h,s[u+1],5,-165796510),h=m(h,f,l,d,s[u+6],9,-1069501632),d=m(d,h,f,l,s[u+11],14,643717713),l=m(l,d,h,f,s[u+0],20,-373897302),f=m(f,l,d,h,s[u+5],5,-701558691),h=m(h,f,l,d,s[u+10],9,38016083),d=m(d,h,f,l,s[u+15],14,-660478335),l=m(l,d,h,f,s[u+4],20,-405537848),f=m(f,l,d,h,s[u+9],5,568446438),h=m(h,f,l,d,s[u+14],9,-1019803690),d=m(d,h,f,l,s[u+3],14,-187363961),l=m(l,d,h,f,s[u+8],20,1163531501),f=m(f,l,d,h,s[u+13],5,-1444681467),h=m(h,f,l,d,s[u+2],9,-51403784),d=m(d,h,f,l,s[u+7],14,1735328473),f=p(f,l=m(l,d,h,f,s[u+12],20,-1926607734),d,h,s[u+5],4,-378558),h=p(h,f,l,d,s[u+8],11,-2022574463),d=p(d,h,f,l,s[u+11],16,1839030562),l=p(l,d,h,f,s[u+14],23,-35309556),f=p(f,l,d,h,s[u+1],4,-1530992060),h=p(h,f,l,d,s[u+4],11,1272893353),d=p(d,h,f,l,s[u+7],16,-155497632),l=p(l,d,h,f,s[u+10],23,-1094730640),f=p(f,l,d,h,s[u+13],4,681279174),h=p(h,f,l,d,s[u+0],11,-358537222),d=p(d,h,f,l,s[u+3],16,-722521979),l=p(l,d,h,f,s[u+6],23,76029189),f=p(f,l,d,h,s[u+9],4,-640364487),h=p(h,f,l,d,s[u+12],11,-421815835),d=p(d,h,f,l,s[u+15],16,530742520),f=y(f,l=p(l,d,h,f,s[u+2],23,-995338651),d,h,s[u+0],6,-198630844),h=y(h,f,l,d,s[u+7],10,1126891415),d=y(d,h,f,l,s[u+14],15,-1416354905),l=y(l,d,h,f,s[u+5],21,-57434055),f=y(f,l,d,h,s[u+12],6,1700485571),h=y(h,f,l,d,s[u+3],10,-1894986606),d=y(d,h,f,l,s[u+10],15,-1051523),l=y(l,d,h,f,s[u+1],21,-2054922799),f=y(f,l,d,h,s[u+8],6,1873313359),h=y(h,f,l,d,s[u+15],10,-30611744),d=y(d,h,f,l,s[u+6],15,-1560198380),l=y(l,d,h,f,s[u+13],21,1309151649),f=y(f,l,d,h,s[u+4],6,-145523070),h=y(h,f,l,d,s[u+11],10,-1120210379),d=y(d,h,f,l,s[u+2],15,718787259),l=y(l,d,h,f,s[u+9],21,-343485551),f=f+w>>>0,l=l+v>>>0,d=d+b>>>0,h=h+A>>>0}return t.endian([f,l,d,h])};i._ff=function(e,t,r,n,a,o,i){var s=e+(t&r|~t&n)+(a>>>0)+i;return(s<<o|s>>>32-o)+t},i._gg=function(e,t,r,n,a,o,i){var s=e+(t&n|r&~n)+(a>>>0)+i;return(s<<o|s>>>32-o)+t},i._hh=function(e,t,r,n,a,o,i){var s=e+(t^r^n)+(a>>>0)+i;return(s<<o|s>>>32-o)+t},i._ii=function(e,t,r,n,a,o,i){var s=e+(r^(t|~n))+(a>>>0)+i;return(s<<o|s>>>32-o)+t},i._blocksize=16,i._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(i(e,r));return r&&r.asBytes?n:r&&r.asString?o.bytesToString(n):t.bytesToHex(n)}}()}}]);
//# sourceMappingURL=287.5b4dd929.chunk.js.map