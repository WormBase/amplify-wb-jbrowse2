"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[5588],{35588:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(66204),a=n(80846),l=n(86636),i=n(25063),o=n(41846),s=n(25086),c=n(80013),u=n(46338),m=n(39780),d=n(70539),f=n(23155),p=n(84081),h=n(31211),E=n(63754),g=n(77540);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function b({columns:e,filter:t,setFilter:n}){return r.createElement(r.Fragment,null,r.createElement(c.Z,null,"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"),e.map((({field:e})=>r.createElement(u.Z,{key:`filter-${e}`,placeholder:`Filter ${e}`,value:t[e]||"",onChange:r=>n({...t,[e]:r.target.value})}))))}function v(e){const{feature:t,descriptions:n={}}=e,{ref:a,scrollLeft:l}=(0,g.x)(),[i,s]=(0,r.useState)({}),u=t.samples||{},v=Object.entries(u);let y,k=[];const O=Object.keys(i);try{k=v.map((e=>({...Object.fromEntries(Object.entries(e[1]).map((e=>[e[0],`${e[1]}`]))),sample:e[0],id:e[0]}))).filter((e=>!O.length||O.every((t=>{const n=i[t];return!n||e[t].match(new RegExp(n,"i"))}))))}catch(e){y=e}const S=["sample",...Object.keys(v[0]?.[1]||{})],[Z,C]=(0,r.useState)(!1),[N,F]=(0,r.useState)(S.map((e=>(0,h.measureGridWidth)(k.map((t=>t[e])))))),$=S.map(((e,t)=>({field:e,description:n?.FORMAT?.[e]?.Description,width:N[t]})));return v.length?r.createElement(o.BaseCard,w({},e,{title:"Samples"}),y?r.createElement(c.Z,{color:"error"},`${y}`):null,r.createElement(m.Z,{control:r.createElement(d.Z,{checked:Z,onChange:e=>C(e.target.checked)}),label:r.createElement(c.Z,{variant:"body2"},"Show options")}),Z?r.createElement(b,{setFilter:s,columns:$,filter:i}):null,r.createElement("div",{ref:a},r.createElement(E.Z,{widths:N,setWidths:F,scrollLeft:l}),r.createElement(f._$,{rows:k,hideFooter:k.length<100,columns:$,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:Z?p.n:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}}))):null}var y=n(66159),k=n(28777),O=n(29520),S=n(62301),Z=n(7146),C=n(38684),N=n(88196),F=n(43902);const $=(0,C.ZL)()({block:{display:"block"}}),j=(0,a.observer)((function({model:e,handleClose:t,feature:n,viewType:a}){const{classes:l}=$(),[i,o]=(0,r.useState)(!0),[s,c]=(0,r.useState)(!0);return r.createElement(F.Dialog,{open:!0,onClose:t,title:"Breakpoint split view options"},r.createElement(O.Z,null,r.createElement(m.Z,{className:l.block,control:r.createElement(d.Z,{checked:i,onChange:e=>o(e.target.checked)}),label:"Copy tracks into the new view"}),r.createElement(m.Z,{className:l.block,control:r.createElement(d.Z,{checked:s,onChange:e=>c(e.target.checked)}),label:"Mirror tracks vertically in vertically stacked view"})),r.createElement(S.Z,null,r.createElement(Z.Z,{onClick:()=>{const{view:r}=e,l=(0,h.getSession)(e);try{const i=a.snapshotFromBreakendFeature(n,r);function o(e){return e.map((e=>({...e,id:`${e.trackId}-${Math.random()}`})))}i.views[0].offsetPx-=r.width/2+100,i.views[1].offsetPx-=r.width/2+100,i.featureData=n;const c=(0,N.getSnapshot)(r.tracks);i.views[0].tracks=o(c),i.views[1].tracks=o(s?[...c].reverse():c),l.addView("BreakpointSplitView",i)}catch(u){console.error(u),l.notify(`${u}`)}t()},variant:"contained",color:"primary",autoFocus:!0},"OK"),r.createElement(Z.Z,{onClick:()=>t(),color:"secondary",variant:"contained"},"Cancel")))}));function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}function L(e){const{model:t,locStrings:n,feature:a}=e,l=(0,h.getSession)(t),{pluginManager:i}=(0,h.getEnv)(l),[s,u]=(0,r.useState)(!1);let m;try{m=i.getViewType("BreakpointSplitView")}catch(e){}const d=new k.Z(a);return r.createElement(o.BaseCard,T({},e,{title:"Breakends"}),r.createElement(c.Z,null,"Link to linear view of breakend endpoints"),r.createElement("ul",null,n.map((e=>r.createElement("li",{key:`${JSON.stringify(e)}`},r.createElement(y.Z,{href:"#",onClick:n=>{n.preventDefault();const{view:r}=t;try{if(!r)throw new Error("No view associated with this feature detail panel anymore");r.navToLocString?.(e)}catch(e){console.error(e),l.notify(`${e}`)}}},`LGV - ${e}`))))),m?r.createElement("div",null,r.createElement(c.Z,null,"Launch split views with breakend source and target"),r.createElement("ul",null,n.map((e=>r.createElement("li",{key:`${JSON.stringify(e)}`},r.createElement(y.Z,{href:"#",onClick:e=>{e.preventDefault(),u(!0)}},`${a.refName}:${a.start} // ${e} (split view)`))))),s?r.createElement(j,{model:t,feature:d,viewType:m,handleClose:()=>{u(!1)}}):null):null)}function A({rows:e,columns:t}){const{ref:n,scrollLeft:a}=(0,g.x)(),[l,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(t.map((t=>(0,h.measureGridWidth)(e.map((e=>e[t.field]))))));return e.length?r.createElement("div",{ref:n},r.createElement(m.Z,{control:r.createElement(d.Z,{checked:l,onChange:e=>i(e.target.checked)}),label:r.createElement(c.Z,{variant:"body2"},"Show options")}),r.createElement("div",{ref:n},r.createElement(E.Z,{widths:o,setWidths:s,scrollLeft:a}),r.createElement(f._$,{rowHeight:25,rows:e,columns:t.map(((e,t)=>({...e,width:o[t]}))),slots:{toolbar:l?p.n:null}}))):null}function D({data:e,fields:t,title:n}){return e.length?r.createElement(o.BaseCard,{title:n},r.createElement(A,{rows:e.map(((e,n)=>({id:n,...Object.fromEntries(e.split("|").map(((e,n)=>[t[n],e])))})))||[],columns:t.map((e=>({field:e})))})):null}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}const P={CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"};function B({descriptions:e,feature:t}){const n=e?.INFO?.ANN?.Description,a=n?.match(/.*Functional annotations:'(.*)'$/)?.[1].split("|")||[],l=t.INFO?.ANN||[];return r.createElement(D,{fields:a,data:l,title:"Variant ANN field"})}function x({descriptions:e,feature:t}){const n=e?.INFO?.CSQ?.Description,a=n?.match(/.*Format: (.*)/)?.[1].split("|")||[],l=t.INFO?.CSQ||[];return r.createElement(D,{fields:a,data:l,title:"Variant CSQ field"})}const M=(0,a.observer)((function(e){const{model:t}=e,{featureData:n,descriptions:a}=t,c=JSON.parse(JSON.stringify(n)),{samples:u,...m}=c;return r.createElement(l.Z,{"data-testid":"variant-side-drawer"},r.createElement(o.FeatureDetails,I({feature:m,descriptions:{...P,...a}},e)),r.createElement(i.Z,null),r.createElement(x,{feature:m,descriptions:a}),r.createElement(i.Z,null),r.createElement(B,{feature:m,descriptions:a}),r.createElement(i.Z,null),"breakend"===c.type?r.createElement(L,{feature:c,locStrings:c.ALT.map((e=>(0,s.I)(e)?.MatePosition||"")),model:t}):null,"translocation"===c.type?r.createElement(L,{feature:c,model:t,locStrings:[`${c.INFO.CHR2[0]}:${c.INFO.END}`]}):null,r.createElement(v,I({feature:c},e,{descriptions:a})))}))}}]);
//# sourceMappingURL=5588.adae46aa.chunk.js.map