"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3795,383],{383:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(7552),o=n(75785),a=n(68446),l=n(18283),i=n(9555),s=n(36715),c=n(99546),d=n(49823),m=n(89003);const u=(0,o.n9)()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",zIndex:10},sm:{fontSize:10}}),p=(0,a.observer)((function({model:e,coordX:t}){const{classes:n}=u();return r.createElement(m.A,{open:!0,placement:"top",title:e.views.map((e=>e.pxToBp(t))).map(((e,t)=>r.createElement(s.A,{className:n.sm,key:[JSON.stringify(e),t].join("-")},(0,c.stringify)(e,!0)))),arrow:!0},r.createElement("div",{className:n.guide,style:{left:t,background:"red"}}))})),v=(0,o.n9)()((e=>{const{tertiary:t,primary:n}=e.palette;return{rubberband:{height:"100%",background:t?(0,l.X4)(t.main,.7):(0,l.X4)(n.main,.7),position:"absolute",zIndex:10,textAlign:"center",overflow:"hidden"},rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberbandText:{color:t?t.contrastText:n.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}})),f=(0,a.observer)((function({model:e,ControlComponent:t=r.createElement("div",null)}){const[n,o]=(0,r.useState)(),[a,l]=(0,r.useState)(),[m,u]=(0,r.useState)(),[f,b]=(0,r.useState)(),g=(0,r.useRef)(null),h=(0,r.useRef)(null),{classes:E}=v(),y=void 0!==n&&void 0===m;function w(e){e.preventDefault(),e.stopPropagation();const t=e.clientX-e.target.getBoundingClientRect().left;o(t),l(t)}function k(e){const t=e.target;b(e.clientX-t.getBoundingClientRect().left)}function C(){b(void 0),e.views.forEach((e=>e.setOffsets(void 0,void 0)))}function x(){u(void 0),o(void 0),l(void 0)}(0,r.useEffect)((()=>{function t(e){if(g.current&&y){const t=e.clientX-g.current.getBoundingClientRect().left;l(t)}}function r(t){if(void 0!==n&&g.current){const{clientX:r,clientY:o}=t,a=r-g.current.getBoundingClientRect().left;u({offsetX:a,clientX:r,clientY:o}),e.views.forEach((e=>{const t=function(e,t){if(void 0===n)return;let r=n,o=e;return o<r&&([r,o]=[o,r]),{leftOffset:t.pxToBp(r),rightOffset:t.pxToBp(o)}}(a,e);if(t){const{leftOffset:n,rightOffset:r}=t;e.setOffsets(n,r)}})),b(void 0)}}return y?(window.addEventListener("mousemove",t),window.addEventListener("mouseup",r),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",r)}):()=>{}}),[n,y,m,e]),(0,r.useEffect)((()=>{!y&&void 0!==a&&void 0!==n&&Math.abs(a-n)<=3&&x()}),[y,a,n]);const N=Boolean(m);if(void 0===n)return r.createElement(r.Fragment,null,void 0!==f?r.createElement(p,{model:e,coordX:f}):null,r.createElement("div",{ref:g,className:E.rubberbandControl,onMouseDown:w,onMouseOut:C,onMouseMove:k},t));const B=m?m.offsetX:a||0,M=B<n?B:n,S=Math.abs(B-n),{views:A}=e,O=A.map((e=>e.pxToBp(M))),T=A.map((e=>e.pxToBp(M+S))),z=A.map((e=>Math.ceil(S*e.bpPerPx)));return r.createElement(r.Fragment,null,h.current?r.createElement(r.Fragment,null,r.createElement(i.Ay,{className:E.popover,classes:{paper:E.paper},open:!0,anchorEl:h.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0},O.map(((e,t)=>r.createElement(s.A,{key:[JSON.stringify(e),t,"left"].join("-")},(0,c.stringify)(e,!0))))),r.createElement(i.Ay,{className:E.popover,classes:{paper:E.paper},open:!0,anchorEl:h.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0},T.map(((e,t)=>r.createElement(s.A,{key:[JSON.stringify(e),t,"right"].join("-")},(0,c.stringify)(e,!0)))))):null,r.createElement("div",{ref:h,className:E.rubberband,style:{left:M,width:S}},r.createElement(s.A,{variant:"h6",className:E.rubberbandText},z.map(((e,t)=>r.createElement(s.A,{key:`${e}_${t}`},`${e.toLocaleString("en-US")}bp`))))),r.createElement("div",{className:E.rubberbandControl,ref:g,onMouseDown:w,onMouseOut:C,onMouseMove:k},t),m?r.createElement(d.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:m.clientX,top:m.clientY},onMenuItemClick:function(e,t){t(),x()},open:N,onClose:x,menuItems:e.rubberBandMenuItems()}):null)}));var b=n(68666),g=n(23758),h=n(64359),E=n(90542);const y=(0,o.n9)()((()=>({headerBar:{gridArea:"1/1/auto/span 2",display:"flex"},spacer:{flexGrow:1},iconButton:{margin:5},bp:{display:"flex",alignItems:"center",marginLeft:10},searchContainer:{marginLeft:5},searchBox:{display:"flex"}}))),w=(0,a.observer)((function({model:e}){return r.createElement(g.A,{menuItems:[{label:"Synteny track selector",onClick:()=>e.activateTrackSelector()},...e.views.map(((e,t)=>({label:`View ${t+1} track selector`,onClick:()=>e.activateTrackSelector()})))]},r.createElement(E.xU,null))})),k=(0,a.observer)((function({model:e}){const{classes:t}=y(),{views:n}=e,[o,a]=(0,r.useState)(!1);return r.createElement("div",{className:t.headerBar},r.createElement(w,{model:e}),r.createElement(g.A,{className:t.iconButton,menuItems:[...e.headerMenuItems(),{label:"Show search boxes?",checked:o,onClick:()=>a(!o),type:"checkbox"}]},r.createElement(h.A,null)),o?r.createElement("div",null,n.map((e=>r.createElement("div",{key:e.id,className:t.searchBox},r.createElement("div",{className:t.searchContainer},r.createElement(b.Gd,{model:e,showHelp:!1})),r.createElement(s.A,{variant:"body2",color:"textSecondary",className:t.bp},e.assemblyNames.join(",")," ",Math.round(e.coarseTotalBp).toLocaleString("en-US")," bp"))))):null,r.createElement("div",{className:t.spacer}))}));var C=n(68584);const x=(0,o.n9)()({container:{display:"grid"},grid:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},resizeHandle:{height:4,background:"#ccc"}}),N=(0,a.observer)((function({model:e}){const{classes:t}=x(),{views:n,levels:o}=e,{pluginManager:a}=(0,c.getEnv)(e),{ReactComponent:l}=a.getViewType(n[0].type),i=[r.createElement(l,{key:n[0].id,model:n[0]})];for(let a=1;a<n.length;a++)i.push(r.createElement(r.Fragment,{key:n[a].id},r.createElement("div",{className:t.grid},r.createElement(B,{model:e,level:a-1})),r.createElement(d.ResizeHandle,{onDrag:e=>o[a-1].setHeight(o[a-1].height+e),className:t.resizeHandle}),r.createElement(l,{model:n[a]})));return r.createElement("div",{className:t.container},i)})),B=(0,a.observer)((function({model:e,level:t}){const{classes:n}=x();return r.createElement(r.Fragment,null,e.levels[t]?.tracks.map((e=>{const[t]=e.displays,{RenderingComponent:o}=t,a=(0,C.getConf)(e,"trackId");return o?r.createElement("div",{className:n.overlay,key:a,style:{height:t.height,overflow:"hidden"}},r.createElement(o,{model:t})):null})))})),M=N,S=(0,o.n9)()((e=>({rubberbandContainer:{position:"relative",overflow:"hidden"},rubberbandDiv:{width:"100%",background:e.palette.action.disabledBackground,height:15,"&:hover":{background:e.palette.action.selected}}}))),A=(0,a.observer)((function({model:e}){const{classes:t}=S();return r.createElement("div",{className:t.rubberbandContainer},r.createElement(k,{model:e}),r.createElement(f,{model:e,ControlComponent:r.createElement("div",{className:t.rubberbandDiv})}),r.createElement(M,{model:e}))}))},13795:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(7552),o=n(68446),a=n(383);const l=(0,r.lazy)((()=>n.e(2116).then(n.bind(n,12116)))),i=(0,o.observer)((function({model:e}){return e.initialized?r.createElement(a.default,{model:e}):r.createElement(l,{model:e})}))}}]);
//# sourceMappingURL=3795.0ffb51d5.chunk.js.map