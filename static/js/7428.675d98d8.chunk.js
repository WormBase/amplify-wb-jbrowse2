"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7428],{27428:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var o=n(7552),r=n(36715),a=n(5401),l=n(68446),s=n(78781),c=n(49823),i=n(99546),u=n(54579),m=n(14465);const d=(0,o.lazy)((()=>n.e(6999).then(n.bind(n,66999)))),p=(0,o.lazy)((()=>n.e(6746).then(n.bind(n,76746)))),f=(0,l.observer)((function({model:e,feature:t}){const{sequenceFeatureDetails:n}=e,{upDownBp:l}=n,f=(0,o.useRef)(null),[b,w]=(0,o.useState)(!1),{sequence:g,error:h}=(0,s.p)(e,t,l,b),[C,E]=(0,o.useState)("cds");return o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement(m.A,{mode:C,setMode:E,feature:t,model:n}),o.createElement(u.A,{ref:f,model:n,extraItems:[{label:"Open in dialog",onClick:()=>{(0,i.getSession)(e).queueDialog((n=>[p,{model:e,feature:t,handleClose:n}]))}}]})),o.createElement("div",null,"gene"===t.type?o.createElement(r.A,null,"Note: inspect subfeature sequences for protein/CDS computations"):null,h?o.createElement(c.ErrorMessage,{error:h}):g?g?"error"in g?o.createElement(o.Fragment,null,o.createElement(r.A,{color:"error"},g.error),o.createElement(a.A,{variant:"contained",color:"inherit",onClick:()=>w(!0)},"Force load")):o.createElement(o.Suspense,{fallback:o.createElement(c.LoadingEllipses,null)},o.createElement(d,{ref:f,feature:t,mode:C,sequence:g,model:n})):o.createElement(r.A,null,"No sequence found"):o.createElement(c.LoadingEllipses,null)))}))},54579:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(7552),r=n(68446),a=n(31409),l=n.n(a),s=n(45465),c=n(23758),i=n(64359),u=n(27820);const m=(0,o.lazy)((()=>n.e(3550).then(n.bind(n,21169)))),d=(0,r.observer)(o.forwardRef((function({model:e,extraItems:t=[]},n){if("function"==typeof n)throw new Error("needs a non function ref");const[r,a]=(0,o.useState)(!1),{showCoordinates2:d}=e;return o.createElement(o.Fragment,null,o.createElement(c.A,{menuItems:[{label:"Copy plaintext",onClick:()=>{const e=n?.current;e&&l()(e.textContent||"",{format:"text/plain"})}},{label:"Copy HTML",onClick:()=>{const e=n?.current;e&&l()(e.outerHTML,{format:"text/html"})}},{label:"Download plaintext",onClick:()=>{const e=n?.current;e&&(0,s.saveAs)(new Blob([e.textContent||""],{type:"text/plain;charset=utf-8"}),"sequence.txt")}},{label:"Download HTML",onClick:()=>{const e=n?.current;e&&(0,s.saveAs)(new Blob([e.outerHTML||""],{type:"text/html;charset=utf-8"}),"sequence.html")}},...t,{label:"Show coordinates?",type:"subMenu",subMenu:[{label:"No coordinates",type:"radio",checked:"none"===d,onClick:()=>e.setShowCoordinates("none")},{label:"Coordinates relative to feature start",type:"radio",checked:"relative"===d,onClick:()=>e.setShowCoordinates("relative")}]},{label:"Settings",icon:u.A,onClick:()=>a(!0)}]},o.createElement(i.A,null)),r?o.createElement(m,{model:e,handleClose:()=>a(!1)}):null)})))},14465:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(7552),r=n(48171),a=n(98360),l=n(29629),s=n(68446);const c=(0,n(75785).n9)()({formControl:{margin:0,marginLeft:4}}),i=(0,s.observer)((function({mode:e,setMode:t,feature:n,model:s}){const{classes:i}=c(),{intronBp:u,upDownBp:m}=s,d=n.subfeatures?.some((e=>"CDS"===e.type)),p=n.subfeatures?.some((e=>"exon"===e.type)),f=p||d;return(0,o.useEffect)((()=>{t(d?"cds":p?"cdna":"genomic")}),[t,d,p]),o.createElement(r.A,{className:i.formControl},o.createElement(a.A,{size:"small",value:e,onChange:e=>t(e.target.value)},Object.entries({...d?{cds:"CDS"}:{},...d?{protein:"Protein"}:{},...f?{cdna:"cDNA"}:{},...f?{gene:"Genomic w/ full introns"}:{},...f?{gene_updownstream:`Genomic w/ full introns +/- ${m}bp up+down stream`}:{},...f?{gene_collapsed_intron:`Genomic w/ ${u}bp intron`}:{},...f?{gene_updownstream_collapsed_intron:`Genomic w/ ${u}bp intron +/- ${m}bp up+down stream `}:{},...f?{}:{genomic:"Genomic"},...f?{}:{genomic_sequence_updownstream:`Genomic +/- ${m}bp up+down stream`}}).map((([e,t])=>o.createElement(l.A,{key:e,value:e},t)))))}))},78781:(e,t,n)=>{n.d(t,{p:()=>s});var o=n(7552),r=n(99546),a=n(68584);const l=5e5;function s(e,t,n,s){const[c,i]=(0,o.useState)(),[u,m]=(0,o.useState)();return(0,o.useEffect)((()=>{if(!e)return;const{assemblyManager:o,rpcManager:c}=(0,r.getSession)(e),[u]=e.view?.assemblyNames||[];async function d(e,t,n){const r=await o.waitForAssembly(u);if(!r)throw new Error("assembly not found");const l="getSequence",s=await c.call(l,"CoreGetFeatures",{adapterConfig:(0,a.getConf)(r,["sequence","adapter"]),sessionId:l,regions:[{start:e,end:t,refName:r.getCanonicalRefName(n),assemblyName:u}]}),[i]=s;return i?.get("seq")||""}(async()=>{try{m(void 0);const{start:e,end:o,refName:r}=t;if(!s&&o-e>l)i({error:`Genomic sequence larger than ${l}bp, use "force load" button to display`});else{const t=e-n,a=o+n,l=await d(e,o,r),s=await d(Math.max(0,t),e,r),c=await d(o,a,r);i({seq:l,upstream:s,downstream:c})}}catch(e){console.error(e),m(e)}})()}),[t,e,n,s]),{sequence:c,error:u}}},27820:(e,t,n)=>{var o=n(92120);t.A=void 0;var r=o(n(33380)),a=n(69500);t.A=(0,r.default)((0,a.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")}}]);
//# sourceMappingURL=7428.675d98d8.chunk.js.map